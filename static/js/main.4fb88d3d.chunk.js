(this.webpackJsonpjsgist=this.webpackJsonpjsgist||[]).push([[0],{178:function(e,t,n){},179:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(76),o=n.n(i),s=n(3),c=n(5),l=n(16),u=function(){function e(){Object(s.a)(this,e),this.itemToSubscriptionMap=void 0,this.itemToSubscriptionMap=new Map}return Object(c.a)(e,[{key:"subscribe",value:function(e,t){this.unsubscribe(e,t);var n=this.itemToSubscriptionMap.get(e);n||(n=[],this.itemToSubscriptionMap.set(e,n)),n.push(t)}},{key:"unsubscribe",value:function(e,t){var n=this.itemToSubscriptionMap.get(e);if(n){var a=n.indexOf(t);a>=0&&(n.splice(a,1),0===n.length&&this.itemToSubscriptionMap.delete(e))}}},{key:"notify",value:function(e){var t=this.itemToSubscriptionMap.get(e);if(t){var n,a=Object(l.a)(t.slice());try{for(a.s();!(n=a.n()).done;){(0,n.value)()}}catch(r){a.e(r)}finally{a.f()}}}}]),e}();var d=new(function(){function e(t){var n=this;Object(s.a)(this,e),this.prefix=void 0,this.subscriptionManager=void 0,this._handleNewValue=function(e){var t=e.key;if(t&&t.startsWith(n.prefix)){var a=t.substr(n.prefix.length);n.subscriptionManager.notify(a)}},this.prefix="".concat(t,"-"),this.subscriptionManager=new u,window.addEventListener("storage",this._handleNewValue)}return Object(c.a)(e,[{key:"_addPrefix",value:function(e){return"".concat(this.prefix).concat(e)}},{key:"subscribe",value:function(e,t){this.subscriptionManager.subscribe(e,t)}},{key:"unsubscribe",value:function(e,t){this.subscriptionManager.unsubscribe(e,t)}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this._addPrefix(e);if(t){var a=sessionStorage.getItem(n);if(a)return a}return localStorage.getItem(n)}},{key:"set",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=this._addPrefix(e);n&&sessionStorage.setItem(a,t),localStorage.setItem(a,t),this.subscriptionManager.notify(e)}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this._addPrefix(e);t&&sessionStorage.removeItem(n),localStorage.removeItem(n),this.subscriptionManager.notify(e)}},{key:"cleanup",value:function(){window.removeEventListener("storage",this._handleNewValue)}}]),e}())("jsgist"),h=(n(94),n(95),document.createElement("div"));h.setAttribute("style","width:30px;height:30px;"),h.classList.add("scrollbar-test");var m=document.createElement("div");m.setAttribute("style","width:100%;height:40px"),h.appendChild(m),document.body.appendChild(h),30-h.firstChild.clientWidth&&document.body.classList.add("layout-scrollbar-obtrusive"),document.body.removeChild(h);var p=n(1),f=n.n(p),g=n(8),v=n(42),b=n(6),y=n(7);function E(e){return r.a.createElement("input",{type:"text",onChange:function(t){e.onChange(t.target.value)},placeholder:e.placeholder,value:e.value})}var w=n(20),k=n(4),S=n(9),j=n(53),O="/*bug-in-github-api-content-can-not-be-empty*/";function x(e){return e.content.startsWith(O)?e.content.substr(O.length):e.content}function C(e){var t=JSON.parse(e.files["jsGist.json"].content);return t.filenames?t.files=t.filenames.map((function(t){return{name:t,content:x(e.files[t])}})):t.files=Object.entries(e.files).filter((function(e){return"jsGist.json"!==Object(S.a)(e,1)[0]})).map((function(e){var t=Object(S.a)(e,2);return{name:t[0],content:x(t[1])}})).concat(t.files||[]),t}function M(e,t,n){var a=e.files.reduce((function(e,t){return e[t.name]={content:t.content.trim()?t.content:"".concat(O).concat(t.content)},e}),{}),r=Object(k.a)({},e),i={};if(a["jsGist.json"]=i,Object.keys(a).length===e.files.length+1?(delete r.files,r.filenames=e.files.map((function(e){return e.name}))):a={"jsGist.json":i},i.content=JSON.stringify(r),n){var o=Object.keys(a).map((function(e){return e.toLowerCase()}));if(!(o.includes("readme.md")||o.includes("readme.txt")||o.includes("readme"))){var s="## ".concat(e.name,"\n\n[view on jsgist](").concat(window.location.origin,"?src=").concat(n,")");a["README.md"]={content:s}}for(var c=0,l=Object.entries(a);c<l.length;c++){var u=Object(S.a)(l[c],2),d=u[0];u[1].filename=d}}return Object(k.a)(Object(k.a)({files:a,description:e.name},!n&&{public:!t}),n&&{gist_id:n})}var z=function(e){Object(b.a)(n,e);var t=Object(y.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.call(this)).pat="",e.user={},e.unAuthorizedOctokit=new j.a({userAgent:"jsGist v0.0.1"}),e}return Object(c.a)(n,[{key:"_updateUserData",value:function(e){var t=function(e){return e&&e.owner?{name:e.owner.login,avatarURL:e.owner.avatar_url}:void 0}(e);if(t){Object.assign(this.user,t);var n=new Event("userdata");n.data=Object(k.a)({},this.user),this.dispatchEvent(n)}}},{key:"setPat",value:function(e){e!==this.pat&&(this.pat=e,this.authorizedOctokit=e?new j.a({auth:e,userAgent:"jsGist v0.0.1"}):void 0)}},{key:"getAuthenticatedUser",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.authorizedOctokit.users.getAuthenticated();case 2:if(200===(t=e.sent).status){e.next=5;break}throw new Error(t.message);case 5:return e.abrupt("return",t.data);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getUserGists",value:function(){var e=Object(g.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.authorizedOctokit.paginate(this.authorizedOctokit.gists.list,Object(k.a)({per_page:100},t&&{since:t}));case 2:return n=e.sent,e.abrupt("return",n.filter((function(e){return!!e.files["jsGist.json"]})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getGist",value:function(){var e=Object(g.a)(f.a.mark((function e(t){var n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.authorizedOctokit||this.octokit,e.next=3,n.gists.get({gist_id:t});case 3:return a=e.sent,e.abrupt("return",{data:C(a.data),rawData:a.data});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGist",value:function(){var e=Object(g.a)(f.a.mark((function e(t){var n,a,r,i=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]&&i[1],a=M(t,n),e.next=4,this.authorizedOctokit.gists.create(a);case 4:return r=e.sent,this._updateUserData(r.data),e.next=8,this.updateGist(r.data.id,t);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateGist",value:function(){var e=Object(g.a)(f.a.mark((function e(t,n){var a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=M(n,!1,t),e.next=3,this.authorizedOctokit.gists.update(a);case 3:return r=e.sent,e.abrupt("return",{id:r.data.id,name:r.data.description,date:r.data.updated_at,public:r.data.public});case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"forkGist",value:function(){var e=Object(g.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.authorizedOctokit.gists.fork({gist_id:t});case 2:return n=e.sent,e.abrupt("return",{id:n.data.id});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteGist",value:function(){var e=Object(g.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.authorizedOctokit.gists.delete({gist_id:t});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGistComment",value:function(){var e=Object(g.a)(f.a.mark((function e(t,n){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.authorizedOctokit.gists.createComment({gist_id:t,body:n});case 2:if(!((a=e.sent).status<200||a.status>=300)){e.next=5;break}throw new Error(a.message);case 5:return e.abrupt("return",a.data);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"octokit",get:function(){return this.authorizedOctokit||this.unAuthorizedOctokit}}]),n}(Object(w.a)(EventTarget));function N(){return r.a.createElement("div",{className:"head"},r.a.createElement("div",null,r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:window.location.origin},r.a.createElement("img",{src:"/resources/images/logo-small.svg",alt:"logo"}),window.location.hostname)),r.a.createElement("div",{className:"fix-help-contribute"},r.a.createElement("div",{className:"octocat"},r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/greggman/jsgist/"},r.a.createElement("img",{alt:"github",src:"/resources/images/octocat-icon.svg"})))))}var L=function(e){Object(b.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleKeyDown=function(t){27===t.keyCode&&e.props.onClose()},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.children,a=e.onClose,i=e.className,o=void 0===i?"":i;return r.a.createElement("div",{onClick:a,className:"".concat(o," dialog")},r.a.createElement("div",{tabIndex:"-1",onClick:function(e){e.stopPropagation()}},r.a.createElement("div",{className:"dialog-heading"},r.a.createElement("div",{className:"dialog-title"},t),r.a.createElement("div",{className:"dialog-close"},r.a.createElement("button",{onClick:a},"X"))),r.a.createElement("div",{className:"dialog-content"},n)))}}]),n}(r.a.Component);function I(e){var t=e.onClose;return r.a.createElement(L,{title:"jsGist",onClose:t},r.a.createElement("div",{className:"markdown"},r.a.createElement("p",null,"A gist based JavaScript/HTML/CSS Playground"),r.a.createElement("h2",null,"Contribute, Fix, Enhance!"),r.a.createElement("p",null,r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/greggman/jsgist"},"https://github.com/greggman/jsgist")),r.a.createElement("p",null,"Also see ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://jsbenchit.org"},"jsbenchit.org")),r.a.createElement("h2",null,"Saving"),r.a.createElement("p",null,"You can save your tests in multiple ways."),r.a.createElement("ol",null,r.a.createElement("li",null,"Save to a github gist by logging in"),r.a.createElement("li",null,"Save it manually into github",r.a.createElement("p",null,"Copy the JSON. Go to github. Create a new gist. Name the file",r.a.createElement("code",null,"jsGist.json"),' Paste the JSON in. Pick "Create public gist".'),r.a.createElement("p",null,"Note the id in the URL after you create the gist."),r.a.createElement("p",null,"Create a url in the form ",r.a.createElement("code",null,"https://jsgist.org/?src=<gist_id>--"),"."),r.a.createElement("p",null,"Example: ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://jsgist.org/?src=f793cb359f2571409983351a6099d5d1"},"https://jsgist.org/?src=f793cb359f2571409983351a6099d5d1"))),r.a.createElement("li",null,"Save it manually somewhere else.",r.a.createElement("p",null,"If there's some other service that will provide a string via http get then copy and save the JSON there then create a URL in the form of ",r.a.createElement("code",null,"https://jsgist.org/?src=<url>"),". Note: you may have to escape the URL.")),r.a.createElement("li",null,"Save it as a bookmark or link",r.a.createElement("p",null,"In the SaveAs dialog there's a link that contains all the data for your benchmark.")))))}var U=n(15),T=n.n(U),_=n(14),A=n.n(_),D=n(18),P=/([a-z])([A-Z])/g,R=function(e,t,n){return"".concat(t,"-").concat(n)},G=function(e){return e.replace(P,R).toLowerCase()};function K(){for(var e=[],t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];for(var r=0,i=n;r<i.length;r++){var o=i[r];if("string"===typeof o)e.push(o);else for(var s=0,c=Object.entries(o);s<c.length;s++){var l=Object(S.a)(c[s],2),u=l[0],d=l[1];d&&e.push(G(u))}}return e.join(" ")}var F=r.a.createContext();var J=function(e){Object(b.a)(n,e);var t=Object(y.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.call(this)).clear=function(){e._msgs=[],e._notify()},e._addMsg=function(t){var n=e._msgs[e._msgs.length-1];!function(e,t){if(!!e!==!!t)return!1;var n=Object.keys(e).filter((function(e){return"count"!==e}));if(n.length!==Object.keys(t).length)return!1;var a,r=Object(l.a)(n);try{for(r.s();!(a=r.n()).done;){var i=a.value;if(e[i]!==t[i])return!1}}catch(o){r.e(o)}finally{r.f()}return!0}(n,t)?e._msgs.push(t):n.count=(n.count||0)+1},e.addMsg=function(t){e._addMsg(t),e._notify()},e.addMsgs=function(t){var n,a=Object(l.a)(t);try{for(a.s();!(n=a.n()).done;){var r=n.value,i=r.type,o=r.data;switch(i){case"jsError":case"jsUnhandledRejection":e._addMsg(Object(k.a)(Object(k.a)({},o),{},{type:"error",showStack:!0}));break;default:e._addMsg(o)}}}catch(s){a.e(s)}finally{a.f()}e._notify()},e._msgs=[],e}return Object(c.a)(n,[{key:"_notify",value:function(){this.dispatchEvent(new Event("change"))}},{key:"getMsgs",value:function(){return this._msgs}}]),n}(Object(w.a)(EventTarget)),V=function(e){Object(b.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).handleChange=function(){a.forceUpdate()},a.logMessagesRef=r.a.createRef(),a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.context.logManager.addEventListener("change",this.handleChange)}},{key:"componentWillUnmount",value:function(){this.context.logManager.removeEventListener("change",this.handleChange)}},{key:"componentDidUpdate",value:function(e,t,n){if(null!==n&&n<1){var a=this.logMessagesRef.current;a.scrollTop=a.scrollHeight-a.parentElement.clientHeight}}},{key:"getSnapshotBeforeUpdate",value:function(e,t){var n=this.logMessagesRef.current;return n.scrollHeight-(n.scrollTop+n.parentElement.clientHeight)}},{key:"render",value:function(){var e=this.props.onGoToLine,t=this.context.logManager;return r.a.createElement("div",{className:"logger"},r.a.createElement("div",{className:"log-messages layout-scrollbar",ref:this.logMessagesRef},r.a.createElement("table",null,r.a.createElement("tbody",null,t.getMsgs().map((function(t,n){var a=!t.section;return r.a.createElement("tr",{className:K("log-line",Object(D.a)({},t.type,!0)),key:"l".concat(n)},r.a.createElement("td",{className:t.count?"count":"no-count"},t.count?t.count:""),r.a.createElement("td",{className:"msg"},t.msg),r.a.createElement("td",{className:K("file",{tooltip:a,fileLink:t.section}),onClick:function(){return e(t)},"data-tooltip":"".concat(t.section||t.url,":").concat(t.lineNo)},t.section||function(e){var t=e.lastIndexOf("/");return t>=0?e.substr(t+1):e}(t.url||""),":",t.lineNo))}))))))}}]),n}(r.a.Component);function W(e,t){for(var n=new URL(e),a=new URLSearchParams(n.search),r=0,i=Object.entries(t);r<i.length;r++){var o=Object(S.a)(i[r],2),s=o[0],c=o[1];void 0===c?a.delete(s):a.set(s,c)}return n.search=a.toString(),n.href}V.contextType=F;var H=new Map,q=new Map([[null,H]]);function B(e,t,n){Y(e,t,n);var a=q.get(t);a||(a=new Map,q.set(t,a));var r=a.get(e);r||(r=[],a.set(e,r)),r.push(n)}function Y(e,t,n){var a=q.get(t);if(a){var r=a.get(e);if(r){var i=r.indexOf(n);i>=0&&r.splice(i,1),0===r.length&&(a.delete(e),0===a.size&&t&&q.delete(t))}}}function $(e,t,n){var a=e.get(t);if(a){var r,i=Object(l.a)(a);try{for(i.s();!(r=i.n()).done;){(0,r.value)(n)}}catch(o){i.e(o)}finally{i.f()}return!0}return!1}window.addEventListener("message",(function(e){var t=e.data,n=t.type,a=t.data,r=q.get(e.source);r&&$(r,n,a)||$(H,n,a)}));var X=["accelerometer","bluetooth","camera","encrypted-media","display-capture","geolocation","gyroscope","microphone","midi","clipboard-read","clipboard-write","serial","xr-spatial-tracking"].map((function(e){return"".concat(e," *")})).join("; "),Z=function(e){Object(b.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).handleJSLog=function(e){a.context.logManager.addMsg(e)},a.handleJSError=function(e){a.context.logManager.addMsg(Object(k.a)(Object(k.a)({},e),{},{type:"error",showStack:!0}))},a.handleJSUnhandledRejection=function(e){a.context.logManager.addMsg(Object(k.a)(Object(k.a)({},e),{},{type:"error",showStack:!0}))},a.handleInfoMessages=function(e){a.context.logManager.addMsgs(e)},a.handleGimmeDaCodez=function(){a.iframe.contentWindow.postMessage({type:"run",data:a.data},"*")},a.handleMessage=function(e){var t=e.data,n=t.type,r=t.data,i=a.handlers[n];i&&i(r)},a.runnerRef=r.a.createRef(),a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.registerAPI,n=Object.fromEntries(new URLSearchParams(window.location.search).entries()).debug,a=Object(k.a)({},n&&{debug:n});t({run:function(t,n){e.data=t,e.removeIFrame();var r=document.createElement("iframe");r.allow=X,e.iframe=r,r.src=W("https://jsgistrunner.devcomments.org/runner-03.html",Object(k.a)({url:"https://jsgist.org/jsgist-runner.js"},a)),n&&(r.style.background="none"),e.runnerRef.current.appendChild(r)}}),B("gimmeDaCodez",null,this.handleGimmeDaCodez),B("jsLog",null,this.handleJSLog),B("jsError",null,this.handleJSError),B("jsUnhandledRejection",null,this.handleJSUnhandledRejection),B("infoMessages",null,this.handleInfoMessages)}},{key:"removeIFrame",value:function(){this.iframe&&(this.iframe.remove(),this.iframe.src="about:blank",this.iframe=void 0)}},{key:"componentWillUnmount",value:function(){this.removeIFrame(),Y("gimmeDaCodez",null,this.handleGimmeDaCodez),Y("jsLog",null,this.handleJSLog),Y("jsError",null,this.handleJSError),Y("jsUnhandledRejection",null,this.handleJSUnhandledRejection),Y("infoMessages",null,this.handleInfoMessages)}},{key:"render",value:function(){return r.a.createElement("div",{className:"runner",ref:this.runnerRef})}}]),n}(r.a.Component);Z.contextType=F;var Q=n(79),ee=(new T.a).compile(Q),te={};function ne(e){var t=te[e]||{subscriptions:new Set};return te[e]=t,t}function ae(e,t){var n=ne(e);return void 0!==t&&(n.value=t),n}function re(e){return te[e].value}function ie(e,t){var n=te[e];if(!n)throw new Error("no such track value: ".concat(e));n.value=t;var a,r=Object(v.a)(n.subscriptions.keys()),i=Object(l.a)(r);try{for(i.s();!(a=i.n()).done;){(0,a.value)(t,e)}}catch(o){i.e(o)}finally{i.f()}}function oe(e,t){ne(e).subscriptions.add(t)}function se(e,t){ne(e).subscriptions.delete(t)}var ce,le={name:"My jsGist",settings:{},files:[{name:"index.html",content:""},{name:"index.css",content:""},{name:"index.js",content:""}]};function ue(){var e="".concat(window.location.origin,"/resources/images/logo.svg");return JSON.parse(JSON.stringify({name:"jsGist",settings:{},files:[{name:"index.html",content:""},{name:"index.css",content:"\n          html, body {\n            margin: 0;\n            width: 100%;\n            height: 100%;\n            background-image: url(".concat(e,");\n            background-size: contain contain;\n            background-position: center center;\n            background-repeat: no-repeat no-repeat;\n          }\n          @media (prefers-color-scheme: dark) {\n            html {\n              background: #222;\n            }\n          }\n        ")},{name:"index.js",content:""}]}))}function de(){return ce}ae("dataVersion",0),ae("updateVersion",0),ae("filesVersion",0);var he=function(e){return ie(e,re(e)+1)},me=function(e){return he("dataVersion")},pe=function(e){return he("filesVersion")};function fe(e,t){ce.files[e].name=t,me()}function ge(e,t){ce.files[e].content=t,me()}function ve(e){!function(e){if(!ee(e))throw new Error("data not valid:\n".concat(ee.errors.map((function(e){return"".concat(e.message,": ").concat(e.dataPath)}))))}(e),ce=e,he("updateVersion"),me(),pe()}ve(JSON.parse(JSON.stringify(le)));var be,ye=Object.fromEntries(new URLSearchParams(window.location.search).entries()),Ee=!ye.codeMirror&&!/webOS|iPhone|iPad|Android/.test(navigator.userAgent),we=!1,ke={layout:window.screen.width<540||window.screen.height<540?3:0,editor:Ee?"monaco":"codemirror",lineNumbers:!0,tabs:!1,showWhitespace:!1};function Se(e,t){be[e]=t;var n=JSON.stringify(be);d.set("ui-settings",n,!0),ie("settings",be)}function je(){return function(){if(!we){we=!0;try{if(!(be=JSON.parse(d.get("ui-settings",!0))))throw new Error("no settings")}catch(i){be=Object(k.a)({},ke)}for(var e=0,t=Object.entries(ke);e<t.length;e++){var n=Object(S.a)(t[e],2),a=n[0],r=n[1];typeof r!==typeof be[a]&&(be[a]=r)}}}(),be}function Oe(e){oe("settings",e)}function xe(e){se("settings",e)}ae("settings",be);var Ce=(new T.a).compile({type:"object",properties:{"vSizes:":{type:"array",items:{type:"number"},minItems:2}},required:["vSizes"]}),Me=function(e){Object(b.a)(n,e);var t=Object(y.a)(n);function n(e){var a;Object(s.a)(this,n),(a=t.call(this,e)).onSetVSizes=function(e){a.setState({vSizes:e}),Se("layout1",a.state)};var r=je().layout1;return a.state=Ce(r)?r:{vSizes:[.95,.05]},a}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props.registerRunnerAPI,t=this.state.vSizes;return r.a.createElement(A.a,{direction:"vertical",minSize:0,sizes:t,onSetSizes:this.onSetVSizes},r.a.createElement(Z,{registerAPI:e}),r.a.createElement(V,{onGoToLine:this.handleGoToLine}))}}]),n}(r.a.Component),ze=n(80),Ne=n.n(ze),Le=n(81),Ie=(n(163),n(164),n(165),n(71),n(166),n(170),n(73),n(171),n(172),n(173),n(74),n(174),n(50),n(175),n(176),n(177),n(75),window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):{}),Ue=function(){},Te=function(e){Object(b.a)(n,e);var t=Object(y.a)(n);function n(e){var a;Object(s.a)(this,n),(a=t.call(this,e)).registerEditor=function(e){a.editor=e,e.setOption("extraKeys",{Tab:function(e){var t=a.tabs?"\t":"".padEnd(e.getOption("indentUnit")+1);e.replaceSelection(t)}})};var r=e.value,i=e.hackKey;return a.state={value:r,hackKey:i},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.registerAPI;t&&t({goToLine:function(t,n){e.editor.focus(),e.editor.doc.setCursor(t-1,n-1)},refresh:function(t){e.editor.refresh()},focus:function(t){e.editor.focus()}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.options,a=void 0===n?{}:n,i=t.onValueChange,o=void 0===i?Ue:i,s=t.ui,c=this.state.value,l=Ie.matches;this.tabs=s.tabs;var u=Object(k.a)({mode:"javascript",scrollbarStyle:"overlay",theme:l?"material":"eclipse",matchBrackets:!0,lineNumbers:s.lineNumbers},a.editor&&a.editor);return u.mode.indexOf("html")>=0&&(u.matchTags=!0),r.a.createElement(Le.Controlled,{value:c,options:u,onBeforeChange:function(t,n,a){e.setState({value:a})},onChange:function(e,t,n){o(n)},editorDidMount:this.registerEditor})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.hackKey!==e.hackKey?{hackKey:e.hackKey,value:e.value}:null}}]),n}(r.a.Component),_e=n(88);function Ae(e,t){var n,a=Object(l.a)(t);try{var r=function(){var t=n.value,a=e.findIndex((function(e){return e.name.toLowerCase().endsWith(t.toLowerCase())}));if(a>=0)return{v:a}};for(a.s();!(n=a.n()).done;){var i=r();if("object"===typeof i)return i.v}}catch(o){a.e(o)}finally{a.f()}return-1}function De(e,t){var n=e.findIndex((function(e){return e.name.toLowerCase()===t.toLowerCase}));if(n>=0)return n;for(var a=arguments.length,r=new Array(a>2?a-2:0),i=2;i<a;i++)r[i-2]=arguments[i];return Ae(e,r)}function Pe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];var r=De.apply(void 0,[e,""].concat(n));return r>=0?e[r]:""}var Re=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";return Object.entries(e).map((function(e){var t=Object(S.a)(e,2),n=t[0],a=t[1];return"".concat(n,"=").concat(a)})).join(t)};var Ge=window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):{},Ke=function(){};function Fe(e){return Je.apply(this,arguments)}function Je(){return(Je=Object(g.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.text();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ve,We=(Ve=function(){var e=Object(g.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Fe("/types/webgpu/dist/index.d.ts");case 3:n=e.sent,t.languages.typescript.javascriptDefaults.addExtraLib(n,"");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),function(){var e=!1;e||(e=!0,Ve.apply(void 0,arguments))});var He=function(e){Object(b.a)(n,e);var t=Object(y.a)(n);function n(e){var a;Object(s.a)(this,n),(a=t.call(this,e)).handleEditorDidMount=function(e,t){a.editor=e,We(t),e.getModel().updateOptions({tabSize:2});var n=a.props.registerAPI;n&&n({goToLine:function(e,t){a.editor.focus(),a.editor.setPosition({lineNumber:e,column:t}),a.editor.revealPosition({lineNumber:e,column:t})},refresh:function(e){},focus:function(e){a.editor.focus()}})},a.registerEditor=function(e){a.editor=e};var r=e.value,i=e.hackKey;return a.state={value:r,hackKey:i},a}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props,t=e.options,n=void 0===t?{}:t,a=e.onValueChange,i=void 0===a?Ke:a,o=e.ui,s=this.state.value,c=Ge.matches,l=function(e){var t=((null===e||void 0===e?void 0:e.mode)||"javascript").split("/").pop();return"gfm"===t?"markdown":t}(n.editor).split("/").pop();return r.a.createElement(_e.a,{theme:c?"vs-dark":"light",language:l,value:s,onChange:i,onMount:this.handleEditorDidMount,options:{minimap:{enabled:!1},lineNumbers:o.lineNumbers?"on":"off",glyphMargin:!1,folding:!1,insertSpaces:!o.tabs,renderWhitespace:o.showWhitespace}})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.hackKey!==e.hackKey?{hackKey:e.hackKey,value:e.value}:null}}]),n}(r.a.Component),qe=function(e){Object(b.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleChange=function(){e.forceUpdate()},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){Oe(this.handleChange)}},{key:"componentWillUnmount",value:function(){xe(this.handleChange)}},{key:"render",value:function(){var e=je(),t="monaco"===e.editor,n=this.props,a=Object(k.a)(Object(k.a)({},n),{},{ui:e});return t?r.a.createElement(He,a):r.a.createElement(Te,a)}}]),n}(r.a.Component);function Be(e){var t=e.value,n=e.hackKey,a=e.heading,i=e.extra,o=void 0===i?[]:i,s=e.options,c=void 0===s?{}:s,l=e.onValueChange,u=e.registerAPI;return r.a.createElement("div",{className:"code-area",style:e.style},r.a.createElement("div",{className:"expander"},a),r.a.createElement("div",{className:K("hidee")},r.a.createElement(qe,{hackKey:n,value:t,options:c,onValueChange:l,registerAPI:u}),o))}var Ye=function(e){Object(b.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleRegisterAPI=function(t){e.codeAPI=t},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this;(0,this.props.register)(this,{goToLine:function(t){var n=e.props.title;if(t.section===n)return e.codeAPI.goToLine(t.lineNo,t.colNo),!0},refresh:function(t){return e.codeAPI.refresh()},focus:function(t){return e.codeAPI.focus()}})}},{key:"componentWillUnmount",value:function(){(0,this.props.unregister)(this)}},{key:"render",value:function(){var e,t=this.props,n=t.title,a=t.hackKey,i=r.a.createElement("div",{style:{width:"100%"}},n),o=Ne.a.lookup(n)||("javascript"===n.toLowerCase()?"application/javascript":"application/octet-stream"),s=Object(k.a)(Object(k.a)({},t.options),{},{editor:Object(k.a)(Object(k.a)({},(null===(e=t.options)||void 0===e?void 0:e.editor)&&t.options.editor),{},{mode:o})});return r.a.createElement(Be,Object.assign({key:a},t,{options:s,heading:i,registerAPI:this.handleRegisterAPI}))}}]),n}(r.a.Component),$e=(new T.a).compile({type:"object",properties:{"sizes:":{type:"array",items:{type:"number"}}},required:["sizes"]}),Xe=function(e){Object(b.a)(n,e);var t=Object(y.a)(n);function n(e){var a;Object(s.a)(this,n),(a=t.call(this,e)).onSetSizes=function(e){a.setState({sizes:e}),Se(a.kUIStateKey,a.state)},a.handleRegister=function(e,t){a.files.set(e,t)},a.handleUnregister=function(e){a.files.delete(e)},a.files=new Map,a.fileToKeyMap=new Map,a.kUIStateKey="".concat(e.uiStateKey,"-files");var r=je()[a.kUIStateKey];return a.state=$e(r)?r:{sizes:[]},a.state.sizes.length!==e.data.files.length&&(a.state.sizes=e.data.files.map((function(t,n){return 1/e.data.files.length}))),a}return Object(c.a)(n,[{key:"getFileKey",value:function(e){var t=this.fileToKeyMap.get(e);return t||(t="".concat(Date.now(),"+").concat(Math.random()),this.fileToKeyMap.set(e,t)),t}},{key:"componentDidMount",value:function(){var e=this;(0,this.props.registerAPI)({goToLine:function(t){e.files.forEach((function(e){e.goToLine(t)}))}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.hackKey,a=t.data,i=t.extra,o=t.direction,s=this.state.sizes;return r.a.createElement("div",{className:"codes"},r.a.createElement(A.a,{direction:o,minSize:0,sizes:s,onSetSizes:this.onSetSizes,computeNewSizesFn:_.moveGuttersComputeNewSizes},a.files.map((function(t,a){return r.a.createElement(Ye,{key:"ca".concat(e.getFileKey(t)),hackKey:n,desc:"filename",title:t.name,value:t.content,onTitleChange:function(e){return fe(a,e)},onValueChange:function(e){return ge(a,e)},register:e.handleRegister,unregister:e.handleUnregister,extra:i})}))))}}]),n}(r.a.Component),Ze=(new T.a).compile({type:"object",properties:{"hSizes:":{type:"array",items:{type:"number"},minItems:2},"vSizes:":{type:"array",items:{type:"number"},minItems:2}},required:["hSizes","vSizes"]}),Qe=function(e){Object(b.a)(n,e);var t=Object(y.a)(n);function n(e){var a;Object(s.a)(this,n),(a=t.call(this,e)).onSetVSizes=function(e){a.setState({vSizes:e}),Se("layout3Vertical",a.state)},a.onSetHSizes=function(e){a.setState({hSizes:e}),Se("layout3Vertical",a.state)},a.registerFilesAPI=function(e){a.filesAPI=e},a.handleGoToLine=function(e){a.filesAPI.goToLine(e)};var r=je().layout3Vertical;return a.state=Ze(r)?r:{hSizes:[.5,.5],vSizes:[.9,.1]},a}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props,t=e.hackKey,n=e.data,a=e.registerRunnerAPI,i=this.state,o=i.vSizes,s=i.hSizes;return r.a.createElement(A.a,{direction:"horizontal",minSize:0,sizes:s,onSetSizes:this.onSetHSizes},r.a.createElement("div",{className:"left"},r.a.createElement(Xe,{direction:"vertical",uiStateKey:"layout3Vertical",data:n,hackKey:t,registerAPI:this.registerFilesAPI})),r.a.createElement("div",{className:"right"},r.a.createElement(A.a,{direction:"vertical",minSize:0,sizes:o,onSetSizes:this.onSetVSizes},r.a.createElement(Z,{registerAPI:a}),r.a.createElement(V,{onGoToLine:this.handleGoToLine}))))}}]),n}(r.a.Component),et=(new T.a).compile({type:"object",properties:{"tSizes:":{type:"array",items:{type:"number"},minItems:2},"bSizes:":{type:"array",items:{type:"number"},minItems:2}},required:["tSizes","bSizes"]}),tt=function(e){Object(b.a)(n,e);var t=Object(y.a)(n);function n(e){var a;Object(s.a)(this,n),(a=t.call(this,e)).onSetTSizes=function(e){a.setState({tSizes:e}),Se("layout3Horizontal",a.state)},a.onSetBSizes=function(e){a.setState({bSizes:e}),Se("layout3Horizontal",a.state)},a.registerFilesAPI=function(e){a.filesAPI=e},a.handleGoToLine=function(e){a.filesAPI.goToLine(e)};var r=je().layout3Horizontal;return a.state=et(r)?r:{tSizes:[.5,.5],bSizes:[.9,.1]},a}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props,t=e.hackKey,n=e.data,a=e.registerRunnerAPI,i=this.state,o=i.tSizes,s=i.bSizes;return r.a.createElement(A.a,{direction:"vertical",minSize:0,sizes:o,onSetSizes:this.onSetTSizes},r.a.createElement("div",{className:"layout-3-horizontal-top"},r.a.createElement(Xe,{uiStateKey:"layout3Horizontal",direction:"horizontal",data:n,hackKey:t,registerAPI:this.registerFilesAPI})),r.a.createElement("div",{className:"layout-3-horizontal-bottom"},r.a.createElement(A.a,{direction:"vertical",sizes:s,onSetSizes:this.onSetBSizes},r.a.createElement(Z,{registerAPI:a}),r.a.createElement(V,{onGoToLine:this.handleGoToLine}))))}}]),n}(r.a.Component),nt=(new T.a).compile({type:"object",properties:{"hSizes:":{type:"array",items:{type:"number"},minItems:2},"v1Sizes:":{type:"array",items:{type:"number"},minItems:2},"v2Sizes:":{type:"array",items:{type:"number"},minItems:2}},required:["hSizes","v1Sizes","v2Sizes"]});function at(e){var t=e.data,n=e.ndx,a=e.hackKey,i=e.register,o=e.unregister,s=t.files[n];return r.a.createElement(Ye,{hackKey:a,desc:"filename",title:s.name,value:s.content,onTitleChange:function(e){return fe(n,e)},onValueChange:function(e){return ge(n,e)},register:i,unregister:o})}var rt=function(e){Object(b.a)(n,e);var t=Object(y.a)(n);function n(e){var a;Object(s.a)(this,n),(a=t.call(this,e)).onSetHSizes=function(e){a.setState({hSizes:e}),Se("layout2x2",a.state)},a.onSetV1Sizes=function(e){a.setState({v1Sizes:e}),Se("layout2x2",a.state)},a.onSetV2Sizes=function(e){a.setState({v2Sizes:e}),Se("layout2x2",a.state)},a.handleRegister=function(e,t){a.files.set(e,t)},a.handleUnregister=function(e){a.files.delete(e)},a.handleGoToLine=function(e){a.files.forEach((function(t){t.goToLine(e)}))},a.files=new Map;var r=je().layout2x2;return a.state=nt(r)?r:{hSizes:[.5,.5],v1Sizes:[.4,.6],v2Sizes:[.4,.5,.1]},a}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props,t=e.hackKey,n=e.data,a=e.registerRunnerAPI,i=n.files,o=De(i,"index.html","html"),s=De(i,"index.js","js","js","javascript"),c=De(i,"index.css","css"),l=this.state,u=l.hSizes,d=l.v1Sizes,h=l.v2Sizes;return r.a.createElement(A.a,{direction:"horizontal",minSize:0,sizes:u,onSetSizes:this.onSetHSizes},r.a.createElement("div",{className:"left"},r.a.createElement(A.a,{direction:"vertical",minSize:0,sizes:d,onSetSizes:this.onSetV1Sizes},r.a.createElement(at,{hackKey:t,register:this.handleRegister,unregister:this.handleUnregister,data:n,ndx:o}),r.a.createElement(at,{hackKey:t,register:this.handleRegister,unregister:this.handleUnregister,data:n,ndx:s}))),r.a.createElement("div",{className:"right"},r.a.createElement(A.a,{direction:"vertical",minSize:0,sizes:h,onSetSizes:this.onSetV2Sizes},r.a.createElement(at,{hackKey:t,register:this.handleRegister,unregister:this.handleUnregister,data:n,ndx:c}),r.a.createElement(Z,{registerAPI:a}),r.a.createElement(V,{onGoToLine:this.handleGoToLine}))))}}]),n}(r.a.Component),it=(new T.a).compile({type:"object",properties:{showResult:{type:"boolean"},showLog:{type:"boolean"},currentNdx:{type:"integer"},"sizes:":{type:"array",items:{type:"number"},minItems:3},"lastSizes:":{type:"array",items:{type:"number"},minItems:3}},required:["sizes","lastSizes","showResult","showLog","currentNdx"]});function ot(e,t,n,a){if(a){var r=t[n],i=1-r,o=e.filter((function(e,t){return n!==t})),s=o.reduce((function(e,t){return e+t}),0),c=o.map((function(e){return e/s*i}));return c.splice(n,0,r),c}var l=e.map((function(e,t){return n===t?0:e})),u=l.reduce((function(e,t){return e+t}),0);return l.map((function(e){return e/u}))}var st=[Qe,tt,rt,function(e){Object(b.a)(n,e);var t=Object(y.a)(n);function n(e){var a;Object(s.a)(this,n),(a=t.call(this,e)).handleRegister=function(e,t){a.files.set(e,t)},a.handleUnregister=function(e){a.files.delete(e)},a.setSizes=function(e){var t=a.state.lastSizes.slice();a.state.currentNdx>=0&&(t[0]=e[0]),a.state.showResult&&(t[1]=e[1]),a.state.showLow&&(t[2]=e[2]),a.setState({sizes:e,lastSizes:t}),Se("layoutTabbed",a.state)},a.handleGoToLine=function(e){a.files.forEach((function(t,n){if(t.goToLine(e)){var r=a.props.data.files.findIndex((function(t){return t.name===e.section}));r!==a.state.currentNdx&&a.handleOnChange(r)}}))},a.handleOnChange=function(e){var t=a.state.currentNdx===e?-1:e;a.setState({currentNdx:t,sizes:ot(a.state.sizes,a.state.lastSizes,0,t>=0)}),Se("layoutTabbed",a.state)},a.toggleShowLog=function(){var e=!a.state.showLog;a.setState({showLog:e,sizes:ot(a.state.sizes,a.state.lastSizes,2,e)}),Se("layoutTabbed",a.state)},a.toggleShowResult=function(){var e=!a.state.showResult;a.setState({showResult:e,sizes:ot(a.state.sizes,a.state.lastSizes,1,e)}),Se("layoutTabbed",a.state)};var r=je().layoutTabbed;return a.state=it(r)?r:{showResult:!0,showLog:!0,currentNdx:2,sizes:[.45,.45,.1],lastSizes:[.45,.45,.1]},a.files=new Map,a.fileToKeyMap=new Map,a}return Object(c.a)(n,[{key:"getFileKey",value:function(e){var t=this.fileToKeyMap.get(e);return t||(t="".concat(Date.now(),"-").concat(Math.random()),this.fileToKeyMap.set(e,t)),t}},{key:"componentDidUpdate",value:function(){this.previousNdx!==this.state.currentNdx&&(this.previousNdx=this.state.currentNdx,this.files.forEach((function(e){e.refresh(),e.focus()})))}},{key:"render",value:function(){var e=this,t=this.props,n=t.hackKey,a=t.data,i=t.registerRunnerAPI,o=this.state,s=o.showResult,c=o.showLog,l=o.sizes,u=o.currentNdx,d=Object(k.a)({},!s&&{display:"none"}),h=Object(k.a)({},!c&&{display:"none"});return r.a.createElement("div",{className:"layout-tabbed"},r.a.createElement("div",{className:"layout-tabbed-top"},r.a.createElement("div",{className:"tab-tabs"},a.files.map((function(t,n){var a="ca".concat(e.getFileKey(t));return r.a.createElement(r.a.Fragment,{key:a},r.a.createElement("input",{type:"radio",name:"tabbed-files",id:a,checked:n===u,onClick:function(t){return e.handleOnChange(n)},onChange:function(e){return e}}),r.a.createElement("label",{htmlFor:a},t.name))})),r.a.createElement("input",{type:"checkbox",checked:s,onChange:this.toggleShowResult,id:"result"}),r.a.createElement("label",{htmlFor:"result"},"result"),r.a.createElement("input",{type:"checkbox",checked:c,onChange:this.toggleShowLog,id:"log"}),r.a.createElement("label",{htmlFor:"log"},"log"))),r.a.createElement(A.a,{direction:"vertical",minSize:0,sizes:l,onSetSizes:this.setSizes},r.a.createElement("div",{className:"tab-content"},a.files.map((function(t,a){var i="ca".concat(e.getFileKey(t));return r.a.createElement("div",{key:i,style:Object(k.a)({},a!==u&&{display:"none"})},r.a.createElement(Ye,{hackKey:n,desc:"filename",title:t.name,value:t.content,onTitleChange:function(e){return fe(a,e)},onValueChange:function(e){return ge(a,e)},register:e.handleRegister,unregister:e.handleUnregister}))}))),r.a.createElement("div",{className:"layout-tabbed-result",style:d},r.a.createElement(Z,{registerAPI:i})),r.a.createElement("div",{className:"layout-tabbed-log",style:h},r.a.createElement(V,{onGoToLine:this.handleGoToLine}))))}}]),n}(r.a.Component)],ct=function(e){Object(b.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleChange=function(){e.forceUpdate()},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){Oe(this.handleChange)}},{key:"componentWillUnmount",value:function(){xe(this.handleChange)}},{key:"render",value:function(){var e=this.props.fullscreen,t=je().layout,n=e?Me:st[t];return r.a.createElement(n,this.props)}}]),n}(r.a.Component),lt=n(82),ut={type:"object",properties:{name:{type:"string"},date:{type:"string"},locallySaved:{type:"boolean"}},required:["name","date"]},dt={$schema:"http://json-schema.org/schema#",type:"object",additionalProperties:ut},ht=new T.a,mt=ht.compile(dt),pt=ht.compile(ut);function ft(){try{var e=JSON.parse(d.get("gists"));if(!mt(e))throw d.delete("gists"),new Error;return e}catch(t){return{}}}function gt(e,t,n,a){var r={name:t,date:n,public:a,locallySaved:!0};if(!pt(r))throw new Error("gist not valid:\n".concat(pt.errors.map((function(e){return"".concat(e.message,": ").concat(e.dataPath)}))));var i=Object(k.a)({},re("gists"));i[e]=r,ie("gists",i),bt(i)}function vt(e){var t=Object(k.a)({},re("gists"));delete t[e],ie("gists",t),bt(t)}function bt(e){d.set("gists",JSON.stringify(e))}function yt(e){if(!mt(e))throw new Error("gists not valid:\n".concat(pt.errors.map((function(e){return"".concat(e.message,": ").concat(e.dataPath)}))));ie("gists",e),bt(e)}function Et(e,t,n,a){var r="down"===a?1:-1,i=function(e,t){switch(e){case"score":return function(e,t){return Math.sign(e.score-t.score)};case"name":return function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:e.name.toLowerCase()>t.name.toLowerCase()?1:0};case"date":return function(e,t){return e.date<t.date?-1:e.date>t.date?1:0};case"public":return function(e,t){var n=e.public?1:0,a=t.public?1:0;return Math.sign(n-a)};case"check":return function(e,n){var a=t.has(e.id)?1:0,r=t.has(n.id)?1:0;return Math.sign(a-r)};default:throw new Error("unknown sortKey")}}(n,t);return e.slice().sort((function(e,t){return i(t,e)*r}))}function wt(e){var t=new lt.a({fields:["name"]});return t.addAll(Object.entries(e).map((function(e){var t=Object(S.a)(e,2);return{id:t[0],name:t[1].name}}))),t}function kt(e){var t=e.sortDir,n=e.selected,a=e.update;return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{onClick:function(){return a(n?"up"===t?"down":"up":t)},className:n?"current-sort-key":""},"up"===t?"\u25b2":"\u25bc"))}function St(e){for(var t,n=0,a=Object.values(e);n<a.length;n++){var r=a[n],i=r.date;r.locallySaved||(!t||i>t)&&(t=i)}return t}ae("gists",ft()),d.subscribe("gists",(function(){ie("gists",ft())}));var jt=function(e){Object(b.a)(n,e);var t=Object(y.a)(n);function n(e){var a;Object(s.a)(this,n),(a=t.call(this,e)).handleNewGists=function(e){a.setState({gists:e,index:wt(e)})},a.toggleCheck=function(e){var t=new Set(a.state.checks);t.has(e)?t.delete(e):t.add(e),a.setState({checks:t})},a.onUserStatusChange=function(){a.forceUpdate(),a.context.userManager.getUserData()&&a.loadGists()},a.updateSort=function(e,t){a.setState({sortDir:t,sortKey:e,newFilter:!1})},a.handleKeyDown=function(e){a.setState({shift:e.shiftKey})},a.handleKeyUp=function(e){a.setState({shift:e.shiftKey})},a.loadGists=Object(g.a)(f.a.mark((function e(){var t,n,r,i,o,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.context,n=t.addError,r=t.github,a.setState({loading:!0}),e.prev=2,i=a.state.shift?{}:a.state.gists,o=St(i),e.next=7,r.getUserGists(o);case 7:s=e.sent,yt(s.reduce((function(e,t){return e[t.id]={name:t.description,date:t.updated_at,public:t.public},e}),Object(k.a)({},i))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n("could not load gists: ".concat(e.t0));case 15:a.setState({loading:!1});case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),a.deleteSelected=Object(g.a)(f.a.mark((function e(){var t,n,r,i,o,s,c,l,u,d;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a.state,n=t.checks,r=t.gists,i=[],n.forEach((function(e,t){r[e]&&i.push(e)})),o=a.context,s=o.addError,c=o.github,a.setState({loading:!0}),l=0,u=i;case 6:if(!(l<u.length)){e.next=20;break}return d=u[l],e.prev=8,e.next=11,c.deleteGist(d);case 11:vt(d),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(8),s("could not delete gist: ".concat(d,": ").concat(e.t0));case 17:l++,e.next=6;break;case 20:a.setState({loading:!1});case 21:case"end":return e.stop()}}),e,null,[[8,14]])}))),a.clearBackup=function(){a.context.backupManager.clearBackup()};var r=re("gists");return a.state={loading:!1,gists:r,checks:new Set,filter:"",newFilter:!1,sortKey:"date",sortDir:"down",shift:!1,index:wt(r)},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this.context.userManager;!function(e){oe("gists",e)}(this.handleNewGists),e.subscribe(this.onUserStatusChange),window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("keyup",this.handleKeyUp)}},{key:"componentWillUnmount",value:function(){var e=this.context.userManager;!function(e){se("gists",e)}(this.handleNewGists),e.unsubscribe(this.onUserStatusChange),window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("keyup",this.handleKeyUp)}},{key:"renderLogin",value:function(){var e=this.context.userManager;return r.a.createElement("div",null,r.a.createElement("button",{onClick:e.login},"Login with github"))}},{key:"renderLoad",value:function(){var e=this,t=this.context.userManager,n=this.state,a=n.gists,i=n.checks,o=n.loading,s=n.index,c=n.filter,l=n.sortKey,u=n.sortDir,d=n.shift,h=n.newFilter,m=!!t.getUserData()&&!o,p=h?"score":l,f=h?"down":u,g=Et(function(e,t,n){if(""===(t=t.trim()))return Object.entries(n).map((function(e){var t=Object(S.a)(e,2),n=t[0],a=t[1];return Object(k.a)(Object(k.a)({},a),{},{id:n,score:0})}));var a=new Map(e.search(t,{prefix:!0,fuzzy:.2}).map((function(e){return[e.id,e.score]})));return Object.entries(n).filter((function(e){var t=Object(S.a)(e,1)[0];return a.has(t)})).map((function(e){var t=Object(S.a)(e,2),n=t[0],r=t[1];return Object(k.a)(Object(k.a)({},r),{},{id:n,score:a.get(n)})}))}(s,c,a),i,p,f);return r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement("button",{className:K({disabled:!m}),onClick:this.loadGists},d?"(Force) ":"","Load New Gists")),g.length>=0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,r.a.createElement(E,{className:"foobar",placeholder:"search:",value:c,onChange:function(t){e.setState({filter:t,newFilter:""!==t.trim()})}})),r.a.createElement("div",{className:"gists"},r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement(kt,{selected:"check"===p,sortDir:u,update:function(t){return e.updateSort("check",t)}})),r.a.createElement("th",null,r.a.createElement(kt,{selected:"name"===p,sortDir:u,update:function(t){return e.updateSort("name",t)}})),r.a.createElement("th",null,r.a.createElement(kt,{selected:"date"===p,sortDir:u,update:function(t){return e.updateSort("date",t)}})),r.a.createElement("th",null,r.a.createElement(kt,{selected:"public"===p,sortDir:u,update:function(t){return e.updateSort("public",t)}})))),r.a.createElement("tbody",null,g.map((function(t,n){return r.a.createElement("tr",{key:"g".concat(n)},r.a.createElement("td",null,r.a.createElement("input",{type:"checkbox",id:"gc".concat(n),checked:i.has(t.id),onChange:function(){return e.toggleCheck(t.id)}}),r.a.createElement("label",{htmlFor:"gc".concat(n)})),r.a.createElement("td",null,r.a.createElement("a",{onClick:e.clearBackup,href:"".concat(window.location.origin,"?src=").concat(encodeURIComponent(t.id))},t.name)),r.a.createElement("td",null,t.date.substring(0,10)),r.a.createElement("td",null,t.public?"":"\ud83d\udd12"))}))))),r.a.createElement("div",null,r.a.createElement("button",{onClick:this.deleteSelected},"Delete Selected Gists"))))}},{key:"render",value:function(){return this.context.userManager.getUserData()?this.renderLoad():this.renderLogin()}}]),n}(r.a.Component);function Ot(e){var t=Object(a.useState)(""),n=Object(S.a)(t,2),i=n[0],o=n[1],s=Object(a.useContext)(F).addError;return r.a.createElement("div",null,r.a.createElement("div",{style:{height:"100px"}},r.a.createElement(qe,{value:i,onValueChange:o})),r.a.createElement("p",null,r.a.createElement("button",{onClick:function(){var t=e.onLoad;try{ve(JSON.parse(i)),t()}catch(n){s("bad json: ".concat(n))}}},"Load JSON")))}function xt(e){var t=Object(a.useState)(""),n=Object(S.a)(t,2),i=n[0],o=n[1],s=Object(a.useContext)(F).addError;function c(){return(c=Object(g.a)(f.a.mark((function t(){var n,a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.onLoad,t.prev=1,t.next=4,fetch(i);case 4:return a=t.sent,t.next=7,a.json();case 7:ve(t.sent),n(),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),s("could not load url: ".concat(t.t0));case 15:case"end":return t.stop()}}),t,null,[[1,12]])})))).apply(this,arguments)}return r.a.createElement("div",null,r.a.createElement(E,{value:i,onChange:o,placeholder:"url-to-json"}),r.a.createElement("p",null,r.a.createElement("button",{onClick:function(){return c.apply(this,arguments)}},"Load URL")))}function Ct(e){var t=e.heading,n=e.children;return r.a.createElement("div",{className:"section"},r.a.createElement("div",{className:"section-heading"},t),r.a.createElement("div",{className:"section-content"},n))}function Mt(e){var t=e.data,n=e.onLoad,a=e.onClose;return r.a.createElement(L,{title:"Load",className:"fixed-size-dialog",onClose:a},r.a.createElement(Ct,{heading:"Load Gist"},r.a.createElement(jt,{data:t,onLoad:n})),r.a.createElement(Ct,{heading:"Load URL"},r.a.createElement(xt,{data:t,onLoad:n})),r.a.createElement(Ct,{heading:"Load JSON"},r.a.createElement(Ot,{data:t,onLoad:n})))}jt.contextType=F;var zt=n(52),Nt=n(54),Lt=new TextEncoder,It=new TextDecoder,Ut=function(e){return e.startsWith("cb64,")||e.startsWith("b64,")};function Tt(e){var t=e.startsWith("cb64,"),n=t?"cb64,":"b64,",a=e.substr(n.length).replace(/-/g,"+").replace(/_/g,"/"),r=new Uint8Array(Object(zt.a)(a)),i=t?Object(Nt.b)(r):r,o=It.decode(i);return JSON.parse(o)}var _t=/^[a-z0-9]+$/i,At=function(e){return _t.test(e)};function Dt(e,t){return Pt.apply(this,arguments)}function Pt(){return(Pt=Object(g.a)(f.a.mark((function e(t,n){var a,r,i,o,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!At(t)){e.next=9;break}return e.next=3,n.getGist(t);case 3:return a=e.sent,r=a.data,i=a.rawData,e.abrupt("return",{data:r,id:t,rawData:i});case 9:if(!Ut(t)){e.next=13;break}return e.abrupt("return",{data:Tt(t)});case 13:return e.next=15,fetch(t);case 15:return o=e.sent,e.next=18,o.json();case 18:return s=e.sent,e.abrupt("return",{data:s});case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rt(e){var t=e.gistId,n=t||"f793cb359f2571409983351a6099d5d1";return r.a.createElement("div",null,r.a.createElement("div",{className:"markdown"},r.a.createElement("p",null,"You can embed a jsGist by creating an iframe pointing to"," ",r.a.createElement("code",null,"https://jsgist.org/embed.html?src=<src>")," "," where"," ",r.a.createElement("code",null,"<src>")," "," is one of the forms above. Either"," ",r.a.createElement("code",null,"?src=<gist_id>")," ","or"," ",r.a.createElement("code",null,"?src=<base64url>")," ","or"," ",r.a.createElement("code",null,"?src=<url_to_json>")," ",". You can also add "," ",r.a.createElement("code",null,"noheader=true")," "," if you don't want the header to appear. You can also just run them directly rather than put in an iframe. ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://jsgist.org/embed.html?src=".concat(n)},"[example]")," ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://jsgist.org/embed.html?src=".concat(n,"&noheader=true")},"[example no header]")),!!t&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"For example to embed the current gist:"),r.a.createElement("pre",null,r.a.createElement("code",{style:{userSelect:"all"}},'<iframe src="https://jsgist.org/embed.html?src=',t,'"></iframe>'))),r.a.createElement("p",null)))}var Gt=function(){var e=document.createElement("a");return e.style.display="none",document.body.appendChild(e),function(t,n){var a=window.URL.createObjectURL(t);e.href=a,e.download=n,e.click()}}();function Kt(e){return e.split("\n").map((function(e){return"    ".concat(e)})).join("\n")}function Ft(e,t){var n=e.files,a=Pe(n,"index.html","html"),r=Pe(n,"index.js","js","js","javascript"),i=Pe(n,"index.css","css");return t?"\n\x3c!-- begin snippet: js hide: false console: true babel: false --\x3e\n\n\x3c!-- language: lang-js --\x3e\n\n\x3c!-- language: lang-css --\x3e\n\n".concat(Kt(i.content),"\n\n\x3c!-- language: lang-html --\x3e\n\n").concat(Kt(a.content),'\n    <script type="module">\n').concat(Kt(r.content),"\n    <\/script>\n\n\x3c!-- end snippet --\x3e\n"):"\n\x3c!-- begin snippet: js hide: false console: true babel: false --\x3e\n\n\x3c!-- language: lang-js --\x3e\n\n".concat(Kt(r.content),"\n\n\x3c!-- language: lang-css --\x3e\n\n").concat(Kt(i.content),"\n\n\x3c!-- language: lang-html --\x3e\n\n").concat(Kt(a.content),"\n\n\x3c!-- end snippet --\x3e\n")}function Jt(e,t){var n,a=e.files,r=Pe(a,"index.html","html"),i=Pe(a,"index.js","js","js","javascript"),o=Pe(a,"index.css","css"),s=(void 0!==t?t:/\b(import|async|await)\b/.test(i.content))?' type="module"':"";return'<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset="utf-8" />\n    <meta name="viewport" content="width=device-width, initial-scale=1" />\n    <title>'.concat((n=e.name,n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),"</title>\n    <style>\n").concat(o.content,"\n    </style>\n  </head>\n  <body>\n").concat(r.content,"\n  </body>\n  <","script").concat(s,">\n").concat(i.content,"\n  </","script",">\n</html>\n")}var Vt=function(e){Object(b.a)(n,e);var t=Object(y.a)(n);function n(e){var a;Object(s.a)(this,n),(a=t.call(this,e)).onChange=function(e){a.setState({asModule:e})},a.exportToCodepen=function(){!function(e){var t=e.files,n=Pe(t,"index.html","html"),a=Pe(t,"index.js","js","js","javascript"),r=Pe(t,"index.css","css"),i={title:e.name,description:e.name,editors:"101",html:n.content,css:r.content,js:a.content},o=document.createElement("div");o.innerHTML='\n    <form method="POST" target="_blank" action="https://codepen.io/pen/define" class="hidden">\'\n      <input type="hidden" name="data">\n      <input type="submit" />\n    "</form>"\n  ',o.querySelector("input[name=data]").value=JSON.stringify(i),document.body.appendChild(o),o.querySelector("form").submit(),document.body.removeChild(o)}(a.props.data)},a.exportToJSFiddle=function(){!function(e){var t=e.files,n=Pe(t,"index.html","html"),a=Pe(t,"index.js","js","js","javascript"),r=Pe(t,"index.css","css"),i=document.createElement("div");i.innerHTML='\n    <form method="POST" target="_black" action="https://jsfiddle.net/api/mdn/" class="hidden">\n      <input type="hidden" name="html" />\n      <input type="hidden" name="css" />\n      <input type="hidden" name="js" />\n      <input type="hidden" name="title" />\n      <input type="hidden" name="wrap" value="b" />\n      <input type="submit" />\n    </form>\n  ',i.querySelector("input[name=html]").value=n.content,i.querySelector("input[name=css]").value=r.content,i.querySelector("input[name=js]").value=a.content,i.querySelector("input[name=title]").value=e.name,document.body.appendChild(i),i.querySelector("form").submit(),document.body.removeChild(i)}(a.props.data)},a.saveToFile=function(){var e=a.props.data,t=Jt(e,a.state.asModule),n=new Blob([t],{type:"text/html"}),r="jsgist-".concat(e.name,".html");Gt(n,r)};var r=Pe(e.data.files,"index.js","js","js","javascript");return a.state={asModule:/\bimport\b/.test(r.content)},a}return Object(c.a)(n,[{key:"render",value:function(){var e=this,t=this.props.data,n=this.state.asModule;return r.a.createElement("div",null,r.a.createElement("button",{onClick:this.exportToCodepen},"Codepen"),r.a.createElement("button",{onClick:this.exportToJSFiddle},"JSFiddle"),r.a.createElement("p",null,"StackOverflow Snippet (copy the code below paste into S.O.)"),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("input",{type:"radio",id:"export-as-module",checked:n,onChange:function(t){return e.onChange(!0)}}),r.a.createElement("label",{htmlFor:"export-as-module"},"As es6 module")),r.a.createElement("div",null,r.a.createElement("input",{type:"radio",id:"export-as-script",checked:!n,onChange:function(t){return e.onChange(!1)}}),r.a.createElement("label",{htmlFor:"export-as-script"},"As script")),r.a.createElement("p",null,'S.O. does not support es6 modules yet so picking "As Module" puts the code in a <script> in the HTML area.')),r.a.createElement("div",{className:"copy-text"},r.a.createElement("pre",{className:"layout-scrollbar",style:{userSelect:"all",overflow:"auto",height:"5em"}},Ft(t,n)),r.a.createElement("div",{className:"copy-buttons"},r.a.createElement("button",{type:"button",onClick:function(){return navigator.clipboard.writeText(Ft(t,n))}},"copy"))),r.a.createElement("p",null,"HTML (copy the code below paste into a file)"),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("input",{type:"radio",id:"export-as-module",checked:n,onChange:function(t){return e.onChange(!0)}}),r.a.createElement("label",{htmlFor:"export-as-module"},"As es6 module")),r.a.createElement("div",null,r.a.createElement("input",{type:"radio",id:"export-as-script",checked:!n,onChange:function(t){return e.onChange(!1)}}),r.a.createElement("label",{htmlFor:"export-as-script"},"As script"))),r.a.createElement("div",{className:"copy-text"},r.a.createElement("pre",{className:"layout-scrollbar",style:{userSelect:"all",overflow:"auto",height:"5em"}},Jt(t,n)),r.a.createElement("div",{className:"copy-buttons"},r.a.createElement("button",{type:"button",onClick:this.saveToFile},"save"),r.a.createElement("button",{type:"button",onClick:function(){return navigator.clipboard.writeText(Jt(t,n))}},"copy"))))}}]),n}(r.a.Component),Wt=function(e){Object(b.a)(n,e);var t=Object(y.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.call(this)).onPatChange=function(){e.forceUpdate()},e.toggleSecret=function(){e.setState({secret:!e.state.secret})},e.saveNew=Object(g.a)(f.a.mark((function t(){var n,a,r,i,o,s,c,l,u,d,h,m,p,g;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.context,a=n.github,r=n.addError,i=e.state.secret,e.setState({saving:!0}),o=e.props,s=o.data,c=o.onSave,l=o.onClose,u=!1,t.prev=5,t.next=8,a.createGist(s,i);case 8:d=t.sent,h=d.id,m=d.name,p=d.date,g=d.public,gt(h,m,p,g),c(h),u=!0,t.next=21;break;case 18:t.prev=18,t.t0=t.catch(5),r("could not create gist: ".concat(t.t0));case 21:e.setState({saving:!1}),u&&l();case 23:case"end":return t.stop()}}),t,null,[[5,18]])}))),e.saveOverExisting=Object(g.a)(f.a.mark((function t(){var n,a,r,i,o,s,c,l,u,d,h,m,p;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.context,a=n.github,r=n.addError,e.setState({saving:!0}),i=e.props,o=i.data,s=i.gistId,c=i.onClose,l=!1,t.prev=4,t.next=7,a.updateGist(s,o);case 7:u=t.sent,d=u.id,h=u.name,m=u.date,p=u.public,gt(d,h,m,p),l=!0,t.next=19;break;case 16:t.prev=16,t.t0=t.catch(4),r("could not update gist: ".concat(t.t0));case 19:e.setState({saving:!1}),l&&c();case 21:case"end":return t.stop()}}),t,null,[[4,16]])}))),e.forkAndSave=Object(g.a)(f.a.mark((function t(){var n,a,r,i,o,s,c,l,u,d,h,m,p,g,v,b,y;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.context,a=n.github,r=n.addError,i=e.props,o=i.data,s=i.gistId,c=i.onSave,l=i.onClose,u=e.state.secret,e.setState({saving:!0}),d=!1,t.prev=5,t.next=8,a.forkGist(s,u);case 8:return h=t.sent,m=h.id,t.next=12,a.updateGist(m,o);case 12:p=t.sent,g=p.id,v=p.name,b=p.date,y=p.public,gt(g,v,b,y),c(g),d=!0,t.next=25;break;case 22:t.prev=22,t.t0=t.catch(5),r("could not fork and update gist: ".concat(t.t0));case 25:e.setState({saving:!1}),d&&l();case 27:case"end":return t.stop()}}),t,null,[[5,22]])}))),e.state={saving:!1,secret:!1},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.context.userManager.subscribe(this.onPatChange)}},{key:"componentWillUnmount",value:function(){this.context.userManager.unsubscribe(this.onPatChange)}},{key:"renderLogin",value:function(){var e=this.context.userManager;return r.a.createElement("div",null,r.a.createElement("button",{onClick:e.login},"Login with github"))}},{key:"renderSave",value:function(){var e=this.state,t=e.saving,n=e.secret,a=this.context.userManager.getUserData(),i=this.props,o=i.gistId,s=i.gistOwnerId,c=a&&o&&a.id===s,l=a&&o&&a.id!==s;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("button",{className:K({disabled:t}),"data-type":"new",onClick:this.saveNew},"Save to New Gist"),r.a.createElement("button",{className:K({disabled:!c||t}),"data-type":"update",onClick:this.saveOverExisting},"Update Current Gist"),r.a.createElement("button",{className:K({disabled:!l||t}),"data-type":"fork",onClick:this.forkAndSave},"Fork and Save Gist")),r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("input",{type:"checkbox",checked:n,id:"save-secret",onChange:this.toggleSecret}),r.a.createElement("label",{htmlFor:"save-secret"},"Secret (unlisted)"),r.a.createElement("blockquote",null,"Warning:",r.a.createElement("ul",null,r.a.createElement("li",null,"You can not change a gist from public to secret"),r.a.createElement("li",null,"Secret gists are still publicly accessible they're just unlisted")),"(",r.a.createElement("a",{href:"https://docs.github.com/en/free-pro-team@latest/github/writing-on-github/creating-gists",target:"_blank",rel:"noopener noreferrer"},"see docs"),")")))}},{key:"render",value:function(){return this.context.userManager.getUserData()?this.renderSave():this.renderLogin()}}]),n}(r.a.Component);function Ht(e){var t=e.data;return r.a.createElement("div",null,r.a.createElement("div",null,"Copy the text below, paste into the load ui or put somewhere on the net and make your own URL with ",r.a.createElement("code",null,window.location.origin,"?src=url-to-json"),"."),r.a.createElement("pre",{className:"layout-scrollbar",style:{userSelect:"all"}},JSON.stringify(t)),r.a.createElement("div",null,r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"".concat(window.location.origin,"?src=").concat(encodeURIComponent("".concat(window.location.origin,"/example.json")))},"Example")))}function qt(e){var t=function(e){var t=JSON.stringify(e),n=Lt.encode(t),a=Object(Nt.a)(n),r=a.length<n.length,i=Object(zt.b)(r?a:n).replace(/\+/g,"-").replace(/\//g,"_");return"".concat(r?"cb64,":"b64,").concat(i)}(e.data),n="".concat(window.location.origin,"?src=").concat(encodeURIComponent(t));return n.length<8e3?r.a.createElement("div",null,r.a.createElement("div",null,"Copy / bookmark the link below"),r.a.createElement("a",{className:"bookmark",href:n,target:"_blank",rel:"noopener noreferrer"},n)):r.a.createElement("div",{class:"error-msg"},"Too large to save as URL")}function Bt(e){var t=e.data,n=e.gistId,a=e.gistOwnerId,i=e.onSave,o=e.onClose;return r.a.createElement(L,{title:"Save",onClose:o},r.a.createElement(Ct,{heading:"Save As Gist"},r.a.createElement(Wt,{gistId:n,gistOwnerId:a,data:t,onClose:o,onSave:i})),r.a.createElement(Ct,{heading:"Save As URL"},r.a.createElement(qt,{data:t})),r.a.createElement(Ct,{heading:"Save As JSON"},r.a.createElement(Ht,{data:t})),r.a.createElement(Ct,{heading:"Embedding"},r.a.createElement(Rt,{gistId:n})),r.a.createElement(Ct,{heading:"Export To"},r.a.createElement(Vt,{data:t})))}Wt.contextType=F;var Yt=n(83),$t=n.n(Yt),Xt=n(84),Zt=n.n(Xt),Qt=n(85),en=n.n(Qt),tn=n(86),nn=n.n(tn);function an(e){var t=e.children,n=e.onChange,a=e.selected;return r.a.createElement("div",{className:K({radioSelected:a}),onClick:n},t)}function rn(e){var t=e.selected,n=e.onChange,a=e.children,i=r.a.Children.map(a,(function(e){if(!r.a.isValidElement(e))return null;var a=e.props.result,i=a===t;return r.a.cloneElement(e,{selected:i,onChange:function(){return n(a)}})}));return r.a.createElement("div",{className:"radio"},i)}function on(e){var t=e.id,n=e.label,a=e.checked,i=e.onChange,o="checkbox-".concat(t);return r.a.createElement("div",null,r.a.createElement("input",{id:o,type:"checkbox",checked:a,onChange:function(e){return i(e.target.checked)}}),r.a.createElement("label",{htmlFor:o},n))}var sn=function(e){Object(b.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleChange=function(){e.forceUpdate()},e.handleLogout=function(){e.context.userManager.logout()},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.context.userManager.subscribe(this.handleChange)}},{key:"componentWillUnmount",value:function(){this.context.userManager.unsubscribe(this.handleChange)}},{key:"render",value:function(){var e=this.context.userManager.getUserData();return!!e&&r.a.createElement(Ct,{heading:"Logout"},r.a.createElement("div",{className:"logout"},"Logged in as:\xa0",!!e.login&&r.a.createElement("div",{className:"username"},r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/".concat(e.login)},e.login)),!!e.avatar_url&&r.a.createElement("a",{className:"user-avatar",target:"_blank",rel:"noopener noreferrer",href:"https://github.com/".concat(e.login)},r.a.createElement("img",{className:"avatar",src:e.avatar_url,alt:"avatar"}))),r.a.createElement("button",{onClick:this.handleLogout},"Logout"))}}]),n}(r.a.Component);sn.contextType=F;var cn=function(e){Object(b.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleChange=function(){e.forceUpdate()},e.handleLayoutChange=function(e){Se("layout",e)},e.handleEditorChange=function(e){Se("editor",e)},e.handleLineNumbersChange=function(e){Se("lineNumbers",e)},e.handleTabsChange=function(e){Se("tabs",e)},e.handleShowWhitespaceChange=function(e){Se("showWhitespace",e)},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){Oe(this.handleChange)}},{key:"componentWillUnmount",value:function(){xe(this.handleChange)}},{key:"render",value:function(){var e=this.props.onClose,t=this.context.userManager.getUserData();return r.a.createElement(L,{title:"Settings",onClose:e},!!t&&r.a.createElement(sn,null),r.a.createElement(Ct,{heading:"Layout"},r.a.createElement("div",{className:"layout"},r.a.createElement(rn,{selected:je().layout,onChange:this.handleLayoutChange},r.a.createElement(an,{result:0},r.a.createElement("img",{src:$t.a,alt:"vertical"})),r.a.createElement(an,{result:1},r.a.createElement("img",{src:Zt.a,alt:"horizontal"})),r.a.createElement(an,{result:2},r.a.createElement("img",{src:en.a,alt:"2x2"})),r.a.createElement(an,{result:3},r.a.createElement("img",{src:nn.a,alt:"tabbed"}))))),r.a.createElement(Ct,{heading:"Editor"},r.a.createElement("div",{className:"settings"},r.a.createElement(rn,{selected:je().editor,onChange:this.handleEditorChange},r.a.createElement(an,{result:"monaco"},r.a.createElement("div",null,"Monaco")),r.a.createElement(an,{result:"codemirror"},r.a.createElement("div",null,"CodeMirror"))),r.a.createElement(on,{id:"lineno",label:"Line Numbers",checked:je().lineNumbers,onChange:this.handleLineNumbersChange}),r.a.createElement(on,{id:"tabs",label:"Indent with tabs",checked:je().tabs,onChange:this.handleTabsChange}),r.a.createElement(on,{id:"whitespace",label:"Show Whitespace",checked:je().showWhitespace,onChange:this.handleShowWhitespaceChange}))))}}]),n}(r.a.Component);function ln(e){var t=e.toolbarFns,n=e.fullscreen,a=t.handleRun,i=t.handleStop,o=t.handleSave,s=t.handleNew,c=t.handleLoad,l=t.handleFullscreen,u=t.handleSettings,d=t.handleHelp;return r.a.createElement("div",{className:"toolbar"},r.a.createElement("button",{tabIndex:"1",onClick:a},"Run"),r.a.createElement("button",{tabIndex:"1",onClick:i},"Stop"),r.a.createElement("button",{tabIndex:"1",onClick:o},"Save"),r.a.createElement("button",{tabIndex:"1",onClick:s},"New"),r.a.createElement("button",{tabIndex:"1",onClick:c},"Load"),r.a.createElement("button",{tabIndex:"1",onClick:u,title:"settings"},r.a.createElement("img",{src:"".concat(window.location.origin,"/resources/images/gear.svg"),alt:"settings"})),r.a.createElement("button",{tabIndex:"1",onClick:l,title:"fullscreen"},r.a.createElement("img",{src:"".concat(window.location.origin,"/resources/images/").concat(n?"un-":"","fullscreen.svg"),alt:"fullscreen"})),r.a.createElement("button",{tabIndex:"1",onClick:d,title:"help"},"?"))}cn.contextType=F;var un=function(){function e(t){var n=this,a=t.oauthManager,r=t.github,i=t.addError;Object(s.a)(this,e),this._handleNewAuth=Object(g.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.userData=void 0,t=n.oauthManager.pat(),n.github.setPat(t),!t){e.next=14;break}return e.prev=4,e.next=7,n.github.getAuthenticatedUser();case 7:a=e.sent,n.userData=a,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),n.addError(e.t0);case 14:n.subscriptionManager.notify("foobar");case 15:case"end":return e.stop()}}),e,null,[[4,11]])}))),this.login=function(){n.oauthManager.login()},this.logout=function(){n.oauthManager.logout(),n.github.setPat()},this.oauthManager=a,this.github=r,this.subscriptionManager=new u,this.addError=i,a.subscribe(this._handleNewAuth),this._handleNewAuth(),this.userData=void 0}return Object(c.a)(e,[{key:"getUserData",value:function(){return this.userData}},{key:"subscribe",value:function(e){this.subscriptionManager.subscribe("foobar",e)}},{key:"unsubscribe",value:function(e){this.subscriptionManager.unsubscribe("foobar",e)}},{key:"cleanup",value:function(){this.oauthManager.unsubscribe(this._handleNewAuth)}}]),e}(),dn=(n(178),function(){return[]}),hn=window.matchMedia("(prefers-color-scheme: dark)"),mn=function(e){Object(b.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this)).handleUIChange=function(){a.forceUpdate()},a.handleNewGist=function(e){var t=!0;try{ve(e),a.backupManager.clearBackup()}catch(n){t=!1,console.warn(n),a.addError("could create new jsGist: ".concat(n))}t&&a.handleRun()},a.addMsg=function(e,t){switch(t){case"error":console.error(e);break;default:console.log(e)}a.setState({messages:[{msg:e.toString(),className:t}].concat(Object(v.a)(a.state.messages))}),setTimeout((function(){a.setState({messages:a.state.messages.slice(0,a.state.messages.length-1)})}),5e3)},a.addInfo=function(e){return a.addMsg(e,"info")},a.addError=function(e){return a.addMsg(e,"error")},a.closeDialog=function(){a.setState({dialog:dn})},a.registerRunnerAPI=function(e){a.runnerAPI=e,a.handleStop()},a.handleNew=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.open("/?newGist=1","_blank");case 1:case"end":return e.stop()}}),e)}))),a.handleRun=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.backupManager.setBackup(JSON.stringify({href:window.location.href,data:de(),gistOwnerId:a.state.gistOwnerId})),a.logManager.clear(),console.clear(),a.runnerAPI.run(de());case 4:case"end":return e.stop()}}),e)}))),a.handleStop=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.runnerAPI.run(ue(),!0);case 1:case"end":return e.stop()}}),e)}))),a.handleSave=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({dialog:a.renderSave});case 1:case"end":return e.stop()}}),e)}))),a.handleSettings=function(){a.setState({dialog:a.renderSettings})},a.handleFullscreen=function(){a.setState({fullscreen:!a.state.fullscreen})},a.handleHelp=function(){a.setState({dialog:a.renderHelp})},a.handleLoad=function(){a.setState({dialog:a.renderLoad})},a.handleOnLoad=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({dialog:dn}),a.handleRun();case 2:case"end":return e.stop()}}),e)}))),a.handleOnSave=function(e){window.history.pushState({},"","".concat(window.location.origin,"?src=").concat(e)),a.setState({gistId:e,gistOwnerId:a.userManager.getUserData().id})},a.handleAbort=function(){a.abort()},a.renderHelp=function(){return r.a.createElement(I,{onClose:a.closeDialog})},a.renderSettings=function(){return r.a.createElement(cn,{onClose:a.closeDialog})},a.renderLoad=function(){return r.a.createElement(Mt,{onLoad:a.handleOnLoad,onClose:a.closeDialog})},a.renderSave=function(){var e=de();return r.a.createElement(Bt,{onSave:a.handleOnSave,onClose:a.closeDialog,gistId:a.state.gistId,gistOwnerId:a.state.gistOwnerId,data:e})},a.state={path:window.location.pathname,dark:hn.matches,fullscreen:!!ye.fullscreen,loading:!1,dialog:dn,gistId:"",messages:[],userData:{},updateVersion:0},a.github=new z,a.oauthManager=e.oauthManager,a.backupManager=e.backupManager,a.logManager=new J,a.userManager=new un({oauthManager:a.oauthManager,github:a.github,addError:a.addError}),a.toolbarFns={handleRun:a.handleRun,handleStop:a.handleStop,handleSave:a.handleSave,handleNew:a.handleNew,handleLoad:a.handleLoad,handleSettings:a.handleSettings,handleFullscreen:a.handleFullscreen,handleHelp:a.handleHelp},a}return Object(c.a)(n,[{key:"componentWillUnmount",value:function(){xe(this.handleUIChange),this.userManager.cleanup()}},{key:"componentDidMount",value:function(){var e=this;if(Oe(this.handleUIChange),B("newGist",null,this.handleNewGist),this.github.addEventListener("userdata",(function(t){e.setState({userData:t.data})})),ae("path",window.location.pathname),oe("path",(function(t){window.history.pushState({},"",t),e.setState({path:t})})),oe("filesVersion",(function(t){e.forceUpdate()})),oe("updateVersion",(function(t){e.setState({updateVersion:e.state.updateVersion+1})})),hn.addEventListener("change",(function(){e.setState({dark:hn.matches})})),ye.newGist)return window.history.pushState({},"","".concat(window.location.origin)),void window.opener.postMessage({type:"gimmeDaCodez"},"*");var t=this.backupManager.getBackup(),n=!1;if(t){try{var a=JSON.parse(t);if(a.href===window.location.href){ve(a.data);var r=new URL(a.href),i=Object.fromEntries(new URLSearchParams(r.search).entries()).src;At(i)&&this.setState({gistId:i,gistOwnerId:a.gistOwnerId}),n=!0,this.addInfo("loaded backup from local storage")}}catch(o){console.log("bad backup")}this.backupManager.clearBackup()}n||ye.src&&this.loadData(ye.src),this.updateTitle()}},{key:"componentDidUpdate",value:function(){this.updateTitle()}},{key:"updateTitle",value:function(){var e=de();document.title=e.name||"jsGist"}},{key:"loadData",value:function(){var e=Object(g.a)(f.a.mark((function e(t){var n,a,r,i,o,s,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({loading:!0}),n=!0,a=!0;case 3:return e.prev=3,e.next=6,Dt(t,this.github);case 6:return r=e.sent,i=r.data,o=r.id,s=r.rawData,ve(i),o&&this.setState({gistId:t,gistOwnerId:null===s||void 0===s||null===(c=s.owner)||void 0===c?void 0:c.id}),e.abrupt("break",28);case 15:if(e.prev=15,e.t0=e.catch(3),!a){e.next=22;break}this.userManager.logout(),a=!1,e.next=26;break;case 22:return n=!1,console.warn(e.t0),this.addError("could not load jsGist: src=".concat(t," ").concat(e.t0)),e.abrupt("break",28);case 26:e.next=3;break;case 28:this.setState({loading:!1}),n&&this.handleRun();case 30:case"end":return e.stop()}}),e,this,[[3,15]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=de(),t=this.state,n=t.loading,a=t.dialog,i=t.updateVersion,o=t.userData,s=t.fullscreen,c=je().editor;return r.a.createElement("div",{className:K("App","editor-".concat(c))},r.a.createElement(F.Provider,{value:{github:this.github,addError:this.addError,addInfo:this.addInfo,storageManager:d,logManager:this.logManager,userManager:this.userManager,backupManager:this.backupManager}},r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"top"},r.a.createElement("div",{className:"left"},r.a.createElement("div",{className:"name"},r.a.createElement(E,{value:e.name,onChange:function(e){return t=e,ce.name=t,me(),void pe();var t}}),!!o.name&&r.a.createElement("div",{className:"username"},r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/".concat(o.name)},o.name)),!!o.avatarURL&&r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/".concat(o.name)},r.a.createElement("img",{className:"avatar",src:o.avatarURL,alt:"avatar"})))),r.a.createElement("div",{className:"right"},r.a.createElement(ln,{toolbarFns:this.toolbarFns,fullscreen:s}),r.a.createElement(N,null))),!n&&r.a.createElement("div",{className:"bottom"},r.a.createElement(ct,{hackKey:i,data:e,registerRunnerAPI:this.registerRunnerAPI,fullscreen:s}))),a(),r.a.createElement("div",{className:"messages"},this.state.messages.map((function(e,t){var n=e.msg,a=e.className;return r.a.createElement("div",{className:a,key:"err".concat(t)},n)})))))}}]),n}(r.a.Component),pn=n(35),fn=n(87),gn=Object(fn.a)("storageManager"),vn=function(){function e(t){Object(s.a)(this,e),Object.defineProperty(this,gn,{writable:!0,value:void 0}),Object(pn.a)(this,gn)[gn]=t}return Object(c.a)(e,[{key:"getBackup",value:function(){return Object(pn.a)(this,gn)[gn].get("backup")}},{key:"setBackup",value:function(e){Object(pn.a)(this,gn)[gn].set("backup",e)}},{key:"clearBackup",value:function(){Object(pn.a)(this,gn)[gn].delete("backup")}}]),e}(),bn="https://auth.jsgist.org/oauth-helper";var yn=function(){function e(t){var n=this;Object(s.a)(this,e),this._popup=void 0,this._state=void 0,this._storageManager=void 0,this.requestToken=function(){var e=Object(g.a)(f.a.mark((function e(t){var a,r,i,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={client:"c055b54872b13c10e4bd",code:t.code},r=W(bn,a),e.next=5,fetch(r);case 5:return i=e.sent,e.next=8,i.json();case 8:if((o=e.sent).access_token){e.next=11;break}throw new Error(JSON.stringify(o));case 11:n._storageManager.set("pat",o.access_token),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),this.logout=function(){n._storageManager.delete("pat")},this.login=function(){n._closePopup(),n._state="".concat(Date.now(),"-").concat(Math.random());var e=W("https://github.com/login/oauth/authorize",{client_id:"c055b54872b13c10e4bd",scope:"gist",state:n._state});n._popup=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.width||500,a=t.height||500,r={width:n,height:a,top:window.screenY+(window.outerHeight-a)/2.5,left:window.screenX+(window.outerWidth-n)/2};return window.open(e,"_blank",Re(r,","))||void 0}(e)},this._popup=void 0,this._state=void 0,this._storageManager=t,B("auth",null,(function(e){n._closePopup(),e.state===n._state&&n.requestToken(e)}))}return Object(c.a)(e,[{key:"pat",value:function(){return this._storageManager.get("pat")}},{key:"subscribe",value:function(e){this._storageManager.subscribe("pat",e)}},{key:"unsubscribe",value:function(e){this._storageManager.unsubscribe("pat",e)}},{key:"_closePopup",value:function(){this._popup&&(this._popup.close(),this._popup=void 0)}}]),e}();Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var En=new yn(d),wn=new vn(d);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(mn,{oauthManager:En,backupManager:wn})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},79:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/schema#","type":"object","properties":{"name":{"type":"string"},"settings":{"type":"object"},"files":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string"},"content":{"type":"string"}},"required":["content","name"]}}},"required":["name","settings","files"]}')},83:function(e,t,n){e.exports=n.p+"static/media/vertical-layout.f248a432.svg"},84:function(e,t,n){e.exports=n.p+"static/media/horizontal-layout.e3f3298b.svg"},85:function(e,t,n){e.exports=n.p+"static/media/two-by-two-layout.23605ce8.svg"},86:function(e,t,n){e.exports=n.p+"static/media/tabbed-layout.8a8b9bc8.svg"},89:function(e,t,n){e.exports=n(179)},94:function(e,t,n){},95:function(e,t,n){}},[[89,1,2]]]);
//# sourceMappingURL=main.4fb88d3d.chunk.js.map