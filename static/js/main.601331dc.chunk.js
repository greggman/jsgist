(this.webpackJsonpjsGist=this.webpackJsonpjsGist||[]).push([[0],{113:function(e,t,n){},114:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(43),o=n.n(i),c=(n(59),n(60),document.createElement("div"));c.setAttribute("style","width:30px;height:30px;"),c.classList.add("scrollbar-test");var s=document.createElement("div");s.setAttribute("style","width:100%;height:40px"),c.appendChild(s),document.body.appendChild(c),30-c.firstChild.clientWidth&&document.body.classList.add("layout-scrollbar-obtrusive"),document.body.removeChild(c);var l=n(2),u=n.n(l),d=n(6),h=n(23),m=n(1),f=n(5),g=n(3),p=n(4);function v(e){return r.a.createElement("input",{type:"text",onChange:function(t){e.onChange(t.target.value)},placeholder:e.placeholder,value:e.value})}var b=n(8);function E(e,t){for(var n=new URL(e),a=new URLSearchParams(n.search),r=0,i=Object.entries(t);r<i.length;r++){var o=Object(b.a)(i[r],2),c=o[0],s=o[1];void 0===s?a.delete(c):a.set(c,s)}return n.search=a.toString(),n.href}var y=n(10),j={};function w(e,t){var n=j[e];n||(n=[],j[e]=n),k(e,t),n.push(t)}function k(e,t){var n=j[e];if(n){var a=n.indexOf(t);a>=0&&n.splice(a,1)}}window.addEventListener("message",(function(e){var t=e.data,n=t.type,a=t.data,r=j[n];if(r){var i,o=Object(y.a)(r);try{for(o.s();!(i=o.n()).done;){(0,i.value)(a)}}catch(c){o.e(c)}finally{o.f()}}}));var O=function(e){Object(g.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(m.a)(this,n),(e=t.call(this)).handleResize=function(t){e.iframeRef.current.style.height="".concat(t.height,"px")},e.iframeRef=r.a.createRef(),e}return Object(f.a)(n,[{key:"componentDidMount",value:function(){w("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){k("resize",this.handleResize)}},{key:"shouldComponentUpdate",value:function(e){return e.disqusId!==this.disqusId}},{key:"render",value:function(){var e=this.props,t=e.disqusId,n=E("https://jsgist.devcomments.org/comments.html",{disqusId:t,title:e.title});return r.a.createElement("div",null,t?r.a.createElement("iframe",{ref:this.iframeRef,title:"comments",src:n}):[])}}]),n}(r.a.Component);function x(e){return r.a.createElement("div",{className:"comments"},r.a.createElement("hr",null),e.disqusId?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"comment-notes"},"Use ",r.a.createElement("b",null,"<pre><code>"),"code goes here",r.a.createElement("b",null,"</code></pre>")," for code blocks"),r.a.createElement(O,{disqusId:e.disqusId,title:e.title})):[])}var S=function(){function e(){Object(m.a)(this,e),this.itemToSubscriptionMap=new Map}return Object(f.a)(e,[{key:"subscribe",value:function(e,t){this.unsubscribe(e,t);var n=this.itemToSubscriptionMap.get(e);n||(n=[],this.itemToSubscriptionMap.set(e,n)),n.push(t)}},{key:"unsubscribe",value:function(e,t){var n=this.itemToSubscriptionMap.get(e);if(n){var a=n.indexOf(t);a>=0&&(n.splice(a,1),0===n.length&&this.itemToSubscriptionMap.delete(e))}}},{key:"notify",value:function(e){var t=this.itemToSubscriptionMap.get(e);if(t){var n,a=Object(y.a)(t.slice());try{for(a.s();!(n=a.n()).done;){(0,n.value)()}}catch(r){a.e(r)}finally{a.f()}}}}]),e}();var C=new(function(){function e(t){var n=this;Object(m.a)(this,e),this._handleNewValue=function(e){var t=e.key;if(t.startsWith(n.prefix)){var a=t.substr(n.prefix.length);n.subscriptionManager.notify(a)}},this.prefix="".concat(t,"-"),this.subscriptionManager=new S,window.addEventListener("storage",this._handleNewValue)}return Object(f.a)(e,[{key:"_addPrefix",value:function(e){return"".concat(this.prefix).concat(e)}},{key:"subscribe",value:function(e,t){this.subscriptionManager.subscribe(e,t)}},{key:"unsubscribe",value:function(e,t){this.subscriptionManager.unsubscribe(e,t)}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this._addPrefix(e);if(t){var a=sessionStorage.getItem(n);if(a)return a}return localStorage.getItem(n)}},{key:"set",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=this._addPrefix(e);n&&sessionStorage.setItem(a,t),localStorage.setItem(a,t),this.subscriptionManager.notify(e)}},{key:"delete",value:function(e,t){var n=this._addPrefix(e);t&&sessionStorage.removeItem(n),localStorage.removeItem(n)}},{key:"cleanup",value:function(){window.removeEventListener("storage",this._handleNewValue)}}]),e}())("jsgist"),N=n(13),L=n(7),M=n(29),I="/*bug-in-github-api-content-can-not-be-empty*/";function R(e){var t=JSON.parse(e.files["jsGist.json"].content);return t.files=Object.entries(e.files).filter((function(e){return"jsGist.json"!==Object(b.a)(e,1)[0]})).map((function(e){var t=Object(b.a)(e,2),n=t[0],a=t[1];return{name:n,content:a.content.startsWith(I)?a.content.substr(I.length):a.content}})).concat(t.files||[]),t}function P(e){return A.apply(this,arguments)}function A(){return(A=Object(d.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.github.com/gists/".concat(t));case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",{data:R(a),rawData:a});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e,t){var n=e.files.reduce((function(e,t){return e[t.name]={content:t.content.trim()?t.content:"".concat(I).concat(t.content)},e}),{}),a=Object(L.a)({},e),r={};if(n["jsGist.json"]=r,Object.keys(n).length===e.files.length+1?delete a.files:n={"jsGist.json":r},r.content=JSON.stringify(a),t)for(var i=0,o=Object.entries(n);i<o.length;i++){var c=Object(b.a)(o[i],2),s=c[0];c[1].filename=s}return Object(L.a)(Object(L.a)({files:n,description:e.name},!t&&{public:!e.settings.private}),t&&{gist_id:t})}var U=function(e){Object(g.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(m.a)(this,n),(e=t.call(this)).pat="",e.user={},e.unAuthorizedOctokit=new M.a({userAgent:"jsGist v0.0.1"}),e}return Object(f.a)(n,[{key:"_updateUserData",value:function(e){var t=function(e){return e&&e.owner?{name:e.owner.login,avatarURL:e.owner.avatar_url}:void 0}(e);if(t){Object.assign(this.user,t);var n=new Event("userdata");n.data=Object(L.a)({},this.user),this.dispatchEvent(n)}}},{key:"setPat",value:function(e){e!==this.pat&&(this.pat=e,this.authorizedOctokit=new M.a({auth:e,userAgent:"jsGist v0.0.1"}))}},{key:"getUserGists",value:function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.authorizedOctokit.paginate(this.authorizedOctokit.gists.list);case 2:return t=e.sent,e.abrupt("return",t.filter((function(e){return!!e.files["jsGist.json"]})));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAnonGist",value:function(){var e=Object(d.a)(u.a.mark((function e(t){var n,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t);case 2:return n=e.sent,a=n.data,r=n.rawData,this._updateUserData(r),e.abrupt("return",{data:a,rawData:r});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getUserGist",value:function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.octokit.gists.get({gist_id:t});case 2:return n=e.sent,this._updateUserData(n.data),e.abrupt("return",R(n.data));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGist",value:function(){var e=Object(d.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=z(t),e.next=3,this.authorizedOctokit.gists.create(n);case 3:return a=e.sent,this._updateUserData(a.data),e.abrupt("return",{id:a.data.id,name:a.data.description,date:a.data.updated_at});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateGist",value:function(){var e=Object(d.a)(u.a.mark((function e(t,n){var a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=z(n,t),e.next=3,this.authorizedOctokit.gists.update(a);case 3:return r=e.sent,e.abrupt("return",{id:r.data.id,name:r.data.description,date:r.data.updated_at});case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"octokit",get:function(){return this.authorizedOctokit||this.unAuthorizedOctokit}}]),n}(Object(N.a)(EventTarget));function _(){return r.a.createElement("div",{className:"head"},r.a.createElement("div",null,r.a.createElement("img",{src:"/resources/images/logo-small.svg",alt:"logo"}),"jsGist.org",r.a.createElement("span",{className:"beta"},"(beta)")),r.a.createElement("div",{className:"fix-help-contribute"},r.a.createElement("div",{className:"three-words"},r.a.createElement("div",null,r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/greggman/jsgist/"},"Fix")),r.a.createElement("div",null,r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/greggman/jsgist/"},"Help")),r.a.createElement("div",null,r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/greggman/jsgist/"},"Contribute"))),r.a.createElement("div",{className:"octocat"},r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/greggman/jsgist/"},r.a.createElement("img",{alt:"github",src:"/resources/images/octocat-icon.svg"})))))}var G=function(e){Object(g.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleKeyDown=function(t){27===t.keyCode&&e.props.onClose()},e}return Object(f.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.children,a=e.onClose;return r.a.createElement("div",{onClick:a,className:"dialog"},r.a.createElement("div",{tabIndex:"-1",onClick:function(e){e.stopPropagation()}},r.a.createElement("div",{className:"dialog-heading"},r.a.createElement("div",{className:"dialog-title"},t),r.a.createElement("div",{className:"dialog-close"},r.a.createElement("button",{onClick:a},"X"))),r.a.createElement("div",{className:"dialog-content"},n)))}}]),n}(r.a.Component);function T(e){var t=e.onClose;return r.a.createElement(G,{title:"jsGist",onClose:t},r.a.createElement("div",{className:"markdown"},r.a.createElement("p",null,"A gist based JavaScript/HTML/CSS Playground"),r.a.createElement("h2",null,"Contribute, Fix, Enhance!"),r.a.createElement("p",null,r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/greggman/jsgist"},"https://github.com/greggman/jsgist")),r.a.createElement("p",null,"Also see ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://jsbenchit.org"},"jsbenchit.org")),r.a.createElement("h2",null,"Saving"),r.a.createElement("p",null,"You can save your tests in multiple ways."),r.a.createElement("ol",null,r.a.createElement("li",null,"Save to a github gist by logging in"),r.a.createElement("li",null,"Save it manually into github",r.a.createElement("p",null,"Copy the JSON. Go to github. Create a new gist. Name the file",r.a.createElement("code",null,"jsGist.json"),' Paste the JSON in. Pick "Create public gist".'),r.a.createElement("p",null,"Note the id in the URL after you create the gist."),r.a.createElement("p",null,"Create a url in the form ",r.a.createElement("code",null,"https://jsgist.org/?src=<gist_id>--"),"."),r.a.createElement("p",null,"Example: ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://jsgist.org/?src=bad0a8491bd6614e729ff01cc14089c9"},"https://jsgist.org/?src=bad0a8491bd6614e729ff01cc14089c9"))),r.a.createElement("li",null,"Save it manually somewhere else.",r.a.createElement("p",null,"If there's some other service that will provide a string via http get then copy and save the JSON there then create a URL in the form of ",r.a.createElement("code",null,"https://jsgist.org/?src=<url>"),". Note: you may have to escape the URL.")),r.a.createElement("li",null,"Save it as a bookmark or link",r.a.createElement("p",null,"In the SaveAs dialog there's a link that contains all the data for your benchmark.")))))}var D=n(9),K=n.n(D),J=n(22),F=n.n(J),V=n(47),W=(new F.a).compile(V),q={};function H(e){var t=q[e]||{subscriptions:new Set};return q[e]=t,t}function Y(e,t){var n=H(e);return void 0!==t&&(n.value=t),n}function B(e){return q[e].value}function $(e,t){var n=q[e];if(!n)throw new Error("no such track value: ".concat(e));n.value=t;var a,r=Object(h.a)(n.subscriptions.keys()),i=Object(y.a)(r);try{for(i.s();!(a=i.n()).done;){(0,a.value)(t,e)}}catch(o){i.e(o)}finally{i.f()}}function X(e,t){H(e).subscriptions.add(t)}function Z(e,t){H(e).subscriptions.delete(t)}var Q,ee={name:"My jsGist",settings:{},files:[{name:"index.html",content:""},{name:"index.css",content:""},{name:"index.js",content:""}]};function te(){var e="".concat(window.location.origin,"/resources/images/logo.svg");return JSON.parse(JSON.stringify({name:"jsGist",settings:{},files:[{name:"index.html",content:""},{name:"index.css",content:"\n          html, body {\n            margin: 0;\n            width: 100%;\n            height: 100%;\n            background-image: url(".concat(e,");\n            background-size: contain contain;\n            background-position: center center;\n            background-repeat: no-repeat no-repeat;\n          }\n          @media (prefers-color-scheme: dark) {\n            html {\n              background: #222;\n            }\n          }\n        ")},{name:"index.js",content:""}]}))}function ne(){return Q}Y("dataVersion",0),Y("updateVersion",0),Y("filesVersion",0);var ae=function(e){return $(e,B(e)+1)},re=function(e){return ae("dataVersion")},ie=function(e){return ae("filesVersion")};function oe(e,t){Q.files[e].name=t,re()}function ce(e,t){Q.files[e].content=t,re()}function se(e){!function(e){if(!W(e))throw new Error("data not valid:\n".concat(W.errors.map((function(e){return"".concat(e.message,": ").concat(e.dataPath)}))))}(e),Q=e,ae("updateVersion"),re(),ie()}se(JSON.parse(JSON.stringify(ee)));var le=n(48),ue=n.n(le),de=n(49),he=(n(106),n(107),n(108),n(41),n(42),n(109),n(111),n(112),window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):{}),me=function(){},fe=function(e){Object(g.a)(n,e);var t=Object(p.a)(n);function n(e){var a;Object(m.a)(this,n),(a=t.call(this,e)).registerEditor=function(e){a.editor=e};var r=e.value,i=e.hackKey;return a.state={value:r,hackKey:i},a}return Object(f.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.registerAPI;t&&t({goToLine:function(t,n){e.editor.focus(),e.editor.doc.setCursor(t-1,n-1)},refresh:function(t){e.editor.refresh()},focus:function(t){e.editor.focus()}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.options,a=void 0===n?{}:n,i=t.onValueChange,o=void 0===i?me:i,c=this.state.value,s=he.matches;return r.a.createElement(de.Controlled,{value:c,options:Object(L.a)(Object(L.a)({mode:"javascript",scrollbarStyle:"overlay",theme:s?"material":"eclipse"},a.editor&&a.editor),{},{lineNumbers:!0}),onBeforeChange:function(t,n,a){e.setState({value:a})},onChange:function(e,t,n){o(n)},editorDidMount:this.registerEditor})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.hackKey!==e.hackKey?{hackKey:e.hackKey,value:e.value}:null}}]),n}(r.a.Component),ge=/([a-z])([A-Z])/g,pe=function(e,t,n){return"".concat(t,"-").concat(n)},ve=function(e){return e.replace(ge,pe).toLowerCase()};function be(){for(var e=[],t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];for(var r=0,i=n;r<i.length;r++){var o=i[r];if("string"===typeof o)e.push(o);else for(var c=0,s=Object.entries(o);c<s.length;c++){var l=Object(b.a)(s[c],2),u=l[0],d=l[1];d&&e.push(ve(u))}}return e.join(" ")}function Ee(e){var t=e.value,n=e.hackKey,a=e.heading,i=e.extra,o=void 0===i?[]:i,c=e.options,s=void 0===c?{}:c,l=e.onValueChange,u=e.registerAPI;return r.a.createElement("div",{className:"code-area",style:e.style},r.a.createElement("div",{className:"expander"},a),r.a.createElement("div",{className:be("hidee")},r.a.createElement(fe,{hackKey:n,value:t,options:s,onValueChange:l,registerAPI:u}),o))}var ye=function(e){Object(g.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleRegisterAPI=function(t){e.codeAPI=t},e}return Object(f.a)(n,[{key:"componentDidMount",value:function(){var e=this;(0,this.props.register)(this,{goToLine:function(t){var n=e.props.title;if(t.section===n)return e.codeAPI.goToLine(t.lineNo,t.colNo),!0},refresh:function(t){return e.codeAPI.refresh()},focus:function(t){return e.codeAPI.focus()}})}},{key:"componentWillUnmount",value:function(){(0,this.props.unregister)(this)}},{key:"render",value:function(){var e,t=this.props,n=t.title,a=t.hackKey,i=r.a.createElement("div",{style:{width:"100%"}},n),o=ue.a.lookup(n)||("javascript"===n.toLowerCase()?"application/javascript":"application/octet-stream"),c=Object(L.a)(Object(L.a)({},t.options),{},{editor:Object(L.a)(Object(L.a)({},(null===(e=t.options)||void 0===e?void 0:e.editor)&&t.options.editor),{},{mode:o})});return r.a.createElement(Ee,Object.assign({key:a},t,{options:c,heading:i,registerAPI:this.handleRegisterAPI}))}}]),n}(r.a.Component),je=function(e){Object(g.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).handleRegister=function(e,t){a.files.set(e,t)},a.handleUnregister=function(e){a.files.delete(e)},a.files=new Map,a.fileToKeyMap=new Map,a}return Object(f.a)(n,[{key:"getFileKey",value:function(e){var t=this.fileToKeyMap.get(e);return t||(t="".concat(Date.now(),"+").concat(Math.random()),this.fileToKeyMap.set(e,t)),t}},{key:"componentDidMount",value:function(){var e=this;(0,this.props.registerAPI)({goToLine:function(t){e.files.forEach((function(e){e.goToLine(t)}))}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.hackKey,a=t.data,i=t.extra,o=t.direction;return r.a.createElement("div",{className:"codes"},r.a.createElement(K.a,{direction:o,minSize:0,computeNewSizesFn:D.moveGuttersComputeNewSizes},a.files.map((function(t,a){return r.a.createElement(ye,{key:"ca".concat(e.getFileKey(t)),hackKey:n,desc:"filename",title:t.name,value:t.content,onTitleChange:function(e){return oe(a,e)},onValueChange:function(e){return ce(a,e)},register:e.handleRegister,unregister:e.handleUnregister,extra:i})}))))}}]),n}(r.a.Component),we=n(11),ke=r.a.createContext();var Oe=function(e){Object(g.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(m.a)(this,n),(e=t.call(this)).clear=function(){e._msgs=[],e._notify()},e.addMsg=function(t){var n=e._msgs[e._msgs.length-1];!function(e,t){if(!!e!==!!t)return!1;var n=Object.keys(e).filter((function(e){return"count"!==e}));if(n.length!==Object.keys(t).length)return!1;var a,r=Object(y.a)(n);try{for(r.s();!(a=r.n()).done;){var i=a.value;if(e[i]!==t[i])return!1}}catch(o){r.e(o)}finally{r.f()}return!0}(n,t)?e._msgs.push(t):n.count=(n.count||0)+1,e._notify()},e._msgs=[],e}return Object(f.a)(n,[{key:"_notify",value:function(){this.dispatchEvent(new Event("change"))}},{key:"getMsgs",value:function(){return this._msgs}}]),n}(Object(N.a)(EventTarget)),xe=function(e){Object(g.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).handleChange=function(){a.forceUpdate()},a.logMessagesRef=r.a.createRef(),a}return Object(f.a)(n,[{key:"componentDidMount",value:function(){this.context.logManager.addEventListener("change",this.handleChange)}},{key:"componentWillUnmount",value:function(){this.context.logManager.removeEventListener("change",this.handleChange)}},{key:"componentDidUpdate",value:function(e,t,n){if(null!==n&&n<1){var a=this.logMessagesRef.current;a.scrollTop=a.scrollHeight-a.parentElement.clientHeight}}},{key:"getSnapshotBeforeUpdate",value:function(e,t){var n=this.logMessagesRef.current;return n.scrollHeight-(n.scrollTop+n.parentElement.clientHeight)}},{key:"render",value:function(){var e=this.props.onGoToLine,t=this.context.logManager;return r.a.createElement("div",{className:"logger"},r.a.createElement("div",{className:"log-messages layout-scrollbar",ref:this.logMessagesRef},t.getMsgs().map((function(t,n){var a=!t.section;return r.a.createElement("div",{className:be("log-line",Object(we.a)({},t.type,!0)),key:"l".concat(n)},r.a.createElement("div",{className:t.count?"count":"no-count"},t.count?t.count:""),r.a.createElement("div",{className:"msg"},t.msg,r.a.createElement("div",{className:be("file",{tooltip:a,fileLink:t.section}),onClick:function(){return e(t)},"data-tooltip":"".concat(t.section||t.url,":").concat(t.lineNo)},t.section||function(e){var t=e.lastIndexOf("/");return t>=0?e.substr(t+1):e}(t.url),":",t.lineNo)))}))))}}]),n}(r.a.Component);xe.contextType=ke;var Se=function(e){Object(g.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).handleJSLog=function(e){a.context.logManager.addMsg(e)},a.handleJSError=function(e){a.context.logManager.addMsg(Object(L.a)(Object(L.a)({},e),{},{type:"error"}))},a.handleJSUnhandledRejection=function(e){a.context.logManager.addMsg(Object(L.a)(Object(L.a)({},e),{},{type:"error"}))},a.handleGimmeDaCodez=function(){a.iframe.contentWindow.postMessage({type:"run",data:a.data},"*")},a.handleMessage=function(e){var t=e.data,n=t.type,r=t.data,i=a.handlers[n];i&&i(r)},a.runnerRef=r.a.createRef(),a}return Object(f.a)(n,[{key:"componentDidMount",value:function(){var e=this;(0,this.props.registerAPI)({run:function(t,n){e.data=t,e.removeIFrame();var a=document.createElement("iframe");e.iframe=a,a.src=E("https://jsgistrunner.devcomments.org/runner-03.html",{url:"https://jsgist.org/jsgist-runner.js"}),n&&(a.style.background="none"),e.runnerRef.current.appendChild(a)}}),w("gimmeDaCodez",this.handleGimmeDaCodez),w("jsLog",this.handleJSLog),w("jsError",this.handleJSError),w("jsUnhandledRejection",this.handleJSUnhandledRejection)}},{key:"removeIFrame",value:function(){this.iframe&&(this.iframe.remove(),this.iframe.src="about:blank",this.iframe=void 0)}},{key:"componentWillUnmount",value:function(){this.removeIFrame(),k("gimmeDaCodez",this.handleGimmeDaCodez),k("jsLog",this.handleJSLog),k("jsError",this.handleJSError),k("jsUnhandledRejection",this.handleJSUnhandledRejection)}},{key:"render",value:function(){return r.a.createElement("div",{className:"runner",ref:this.runnerRef})}}]),n}(r.a.Component);Se.contextType=ke;var Ce=function(e){Object(g.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).registerFilesAPI=function(t){e.filesAPI=t},e.handleGoToLine=function(t){e.filesAPI.goToLine(t)},e}return Object(f.a)(n,[{key:"render",value:function(){var e=this.props,t=e.hackKey,n=e.data,a=e.registerRunnerAPI;return r.a.createElement(K.a,{direction:"horizontal",minSize:0},r.a.createElement("div",{className:"left"},r.a.createElement(je,{direction:"vertical",data:n,hackKey:t,registerAPI:this.registerFilesAPI})),r.a.createElement("div",{className:"right"},r.a.createElement(K.a,{direction:"vertical",sizes:[.9,.1]},r.a.createElement(Se,{registerAPI:a}),r.a.createElement(xe,{onGoToLine:this.handleGoToLine}))))}}]),n}(r.a.Component),Ne=function(e){Object(g.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).registerFilesAPI=function(t){e.filesAPI=t},e.handleGoToLine=function(t){e.filesAPI.goToLine(t)},e}return Object(f.a)(n,[{key:"render",value:function(){var e=this.props,t=e.hackKey,n=e.data,a=e.registerRunnerAPI;return r.a.createElement(K.a,{direction:"vertical",minSize:0},r.a.createElement("div",{className:"layout-3-horizontal-top"},r.a.createElement(je,{direction:"horizontal",data:n,hackKey:t,registerAPI:this.registerFilesAPI})),r.a.createElement("div",{className:"layout-3-horizontal-bottom"},r.a.createElement(K.a,{direction:"vertical",sizes:[.9,.1]},r.a.createElement(Se,{registerAPI:a}),r.a.createElement(xe,{onGoToLine:this.handleGoToLine}))))}}]),n}(r.a.Component);function Le(e,t){var n,a=Object(y.a)(t);try{var r=function(){var t=n.value,a=e.findIndex((function(e){return e.name.toLowerCase().endsWith(t.toLowerCase())}));if(a>=0)return{v:a}};for(a.s();!(n=a.n()).done;){var i=r();if("object"===typeof i)return i.v}}catch(o){a.e(o)}finally{a.f()}return-1}function Me(e,t){var n=e.findIndex((function(e){return e.name.toLowerCase()===t.toLowerCase}));if(n>=0)return n;for(var a=arguments.length,r=new Array(a>2?a-2:0),i=2;i<a;i++)r[i-2]=arguments[i];return Le(e,r)}var Ie=function(e){return Object.entries(e).map((function(e){var t=Object(b.a)(e,2),n=t[0],a=t[1];return"".concat(n,"=").concat(a)})).join(",")};function Re(e){var t=e.data,n=e.ndx,a=e.hackKey,i=e.register,o=e.unregister,c=t.files[n];return r.a.createElement(ye,{hackKey:a,desc:"filename",title:c.name,value:c.content,onTitleChange:function(e){return oe(n,e)},onValueChange:function(e){return ce(n,e)},register:i,unregister:o})}var Pe=function(e){Object(g.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).handleRegister=function(e,t){a.files.set(e,t)},a.handleUnregister=function(e){a.files.delete(e)},a.handleGoToLine=function(e){a.files.forEach((function(t){t.goToLine(e)}))},a.files=new Map,a}return Object(f.a)(n,[{key:"render",value:function(){var e=this.props,t=e.hackKey,n=e.data,a=e.registerRunnerAPI,i=n.files,o=Me(i,"index.html","html"),c=Me(i,"index.js","js","js","javascript"),s=Me(i,"index.css","css");return r.a.createElement(K.a,{direction:"horizontal",minSize:0},r.a.createElement("div",{className:"left"},r.a.createElement(K.a,{direction:"vertical",minSize:0,sizes:[.4,.6]},r.a.createElement(Re,{hackKey:t,register:this.handleRegister,unregister:this.handleUnregister,data:n,ndx:o}),r.a.createElement(Re,{hackKey:t,register:this.handleRegister,unregister:this.handleUnregister,data:n,ndx:c}))),r.a.createElement("div",{className:"right"},r.a.createElement(K.a,{direction:"vertical",sizes:[.4,.5,.1]},r.a.createElement(Re,{hackKey:t,register:this.handleRegister,unregister:this.handleUnregister,data:n,ndx:s}),r.a.createElement(Se,{registerAPI:a}),r.a.createElement(xe,{onGoToLine:this.handleGoToLine}))))}}]),n}(r.a.Component);function Ae(e,t,n,a){if(a){var r=t[n],i=1-r,o=e.filter((function(e,t){return n!==t})),c=o.reduce((function(e,t){return e+t}),0),s=o.map((function(e){return e/c*i}));return s.splice(n,0,r),s}var l=e.map((function(e,t){return n===t?0:e})),u=l.reduce((function(e,t){return e+t}),0);return l.map((function(e){return e/u}))}var ze,Ue=function(e){Object(g.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).handleRegister=function(e,t){a.files.set(e,t)},a.handleUnregister=function(e){a.files.delete(e)},a.setSizes=function(e){a.state.currentNdx>=0&&(a.lastSizes[0]=e[0]),a.state.showResult&&(a.lastSizes[1]=e[1]),a.state.showLow&&(a.lastSizes[2]=e[2]),a.setState({sizes:e})},a.handleGoToLine=function(e){a.files.forEach((function(t,n){if(t.goToLine(e)){var r=a.props.data.files.findIndex((function(t){return t.name===e.section}));r!==a.state.currentNdx&&a.handleOnChange(r)}}))},a.handleOnChange=function(e){var t=a.state.currentNdx===e?-1:e;a.setState({currentNdx:t,sizes:Ae(a.state.sizes,a.lastSizes,0,t>=0)})},a.toggleShowLog=function(){var e=!a.state.showLog;a.setState({showLog:e,sizes:Ae(a.state.sizes,a.lastSizes,2,e)})},a.toggleShowResult=function(){var e=!a.state.showResult;a.setState({showResult:e,sizes:Ae(a.state.sizes,a.lastSizes,1,e)})},a.state={showResult:!0,showLog:!0,sizes:[.45,.45,.1],currentNdx:2},a.lastSizes=a.state.sizes.slice(),a.files=new Map,a.fileToKeyMap=new Map,a}return Object(f.a)(n,[{key:"getFileKey",value:function(e){var t=this.fileToKeyMap.get(e);return t||(t="".concat(Date.now(),"-").concat(Math.random()),this.fileToKeyMap.set(e,t)),t}},{key:"componentDidUpdate",value:function(){this.previousNdx!==this.state.currentNdx&&(this.previousNdx=this.state.currentNdx,this.files.forEach((function(e){e.refresh(),e.focus()})))}},{key:"render",value:function(){var e=this,t=this.props,n=t.hackKey,a=t.data,i=t.registerRunnerAPI,o=this.state,c=o.showResult,s=o.showLog,l=o.sizes,u=o.currentNdx,d=Object(L.a)({},!c&&{display:"none"}),h=Object(L.a)({},!s&&{display:"none"});return r.a.createElement("div",{className:"layout-tabbed"},r.a.createElement("div",{className:"layout-tabbed-top"},r.a.createElement("div",{className:"tab-tabs"},a.files.map((function(t,n){var a="ca".concat(e.getFileKey(t));return r.a.createElement(r.a.Fragment,{key:a},r.a.createElement("input",{type:"radio",name:"tabbed-files",id:a,checked:n===u,onClick:function(t){return e.handleOnChange(n)},onChange:function(e){return e}}),r.a.createElement("label",{htmlFor:a},t.name))})),r.a.createElement("input",{type:"checkbox",checked:c,onChange:this.toggleShowResult,id:"result"}),r.a.createElement("label",{htmlFor:"result"},"result"),r.a.createElement("input",{type:"checkbox",checked:s,onChange:this.toggleShowLog,id:"log"}),r.a.createElement("label",{htmlFor:"log"},"log"))),r.a.createElement(K.a,{direction:"vertical",minSize:0,sizes:l,onSetSizes:this.setSizes},r.a.createElement("div",{className:"tab-content"},a.files.map((function(t,a){var i="ca".concat(e.getFileKey(t));return r.a.createElement("div",{key:i,style:Object(L.a)({},a!==u&&{display:"none"})},r.a.createElement(ye,{hackKey:n,desc:"filename",title:t.name,value:t.content,onTitleChange:function(e){return oe(a,e)},onValueChange:function(e){return ce(a,e)},register:e.handleRegister,unregister:e.handleUnregister}))}))),r.a.createElement("div",{className:"layout-tabbed-result",style:d},r.a.createElement(Se,{registerAPI:i})),r.a.createElement("div",{className:"layout-tabbed-log",style:h},r.a.createElement(xe,{onGoToLine:this.handleGoToLine}))))}}]),n}(r.a.Component),_e=!1;function Ge(e,t){ze[e]=t;var n=JSON.stringify(ze);C.set("ui-settings",n,!0),$("settings",ze)}function Te(){return function(){if(!_e){_e=!0;try{if(!(ze=JSON.parse(C.get("ui-settings",!0))))throw new Error("no settings")}catch(e){ze={layout:window.screen.width<540||window.screen.height<540?3:0}}}}(),ze}function De(e){X("settings",e)}function Ke(e){Z("settings",e)}Y("settings",ze);var Je=[Ce,Ne,Pe,Ue],Fe=function(e){Object(g.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleChange=function(){e.forceUpdate()},e}return Object(f.a)(n,[{key:"componentDidMount",value:function(){De(this.handleChange)}},{key:"componentWillUnmount",value:function(){Ke(this.handleChange)}},{key:"render",value:function(){var e=Te().layout;return r.a.createElement(Je[e],this.props)}}]),n}(r.a.Component),Ve={type:"object",properties:{name:{type:"string"},date:{type:"string"}},required:["name","date"]},We={$schema:"http://json-schema.org/schema#",type:"object",additionalProperties:Ve},qe=new F.a,He=qe.compile(We),Ye=qe.compile(Ve);function Be(){try{var e=JSON.parse(C.get("gists"));if(!He(e))throw C.delete("gists"),new Error;return e}catch(t){return{}}}function $e(e,t,n){var a={name:t,date:n};if(!Ye(a))throw new Error("gist not valid:\n".concat(Ye.errors.map((function(e){return"".concat(e.message,": ").concat(e.dataPath)}))));var r=Object(L.a)({},B("gists"));r[e]=a,$("gists",r),Xe(r)}function Xe(e){C.set("gists",JSON.stringify(e))}function Ze(e){if(!He(e))throw new Error("gists not valid:\n".concat(Ye.errors.map((function(e){return"".concat(e.message,": ").concat(e.dataPath)}))));$("gists",e),Xe(e)}Y("gists",Be()),C.subscribe("gists",(function(){$("gists",Be())}));var Qe=function(e){Object(g.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(m.a)(this,n),(e=t.call(this)).handleNewGists=function(t){e.setState({gists:t})},e.onPatChange=function(){e.forceUpdate(),e.context.oauthManager.pat()&&e.loadGists()},e.loadGists=function(){var t=Object(d.a)(u.a.mark((function t(n){var a,r,i,o,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.context,r=a.addError,i=a.github,o=a.oauthManager,e.setState({loading:!0}),i.setPat(o.pat()),t.prev=3,t.next=6,i.getUserGists();case 6:c=t.sent,Ze(c.reduce((function(e,t){return e[t.id]={name:t.description,date:t.updated_at},e}),{})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),r("could not load gists: ".concat(t.t0));case 14:e.setState({loading:!1});case 15:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(e){return t.apply(this,arguments)}}(),e.state={loading:!1,gists:B("gists")},e}return Object(f.a)(n,[{key:"componentDidMount",value:function(){var e=this.context.oauthManager;X("gists",this.handleNewGists),e.subscribe(this.onPatChange)}},{key:"componentWillUnmount",value:function(){var e=this.context.oauthManager;Z("gists",this.handleNewGists),e.unsubscribe(this.onPatChange)}},{key:"renderLogin",value:function(){var e=this.context.oauthManager;return r.a.createElement("div",null,r.a.createElement("button",{onClick:e.login},"Login with github"))}},{key:"renderLoad",value:function(){var e=this.context.oauthManager,t=this.state,n=t.gists,a=t.loading,i=!!e.pat()&&!a,o=Object.entries(n).map((function(e){var t=Object(b.a)(e,2),n=t[0],a=t[1];return{id:n,name:a.name,date:a.date}})).sort((function(e,t){return t.date<e.date?-1:t.date>e.date?1:0}));return r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement("button",{className:be({disabled:!i}),onClick:this.loadGists},o.length?"Reload":"Load"," Your Gists")),o.length?r.a.createElement("table",{className:"gists"},r.a.createElement("tbody",null,o.map((function(e,t){return r.a.createElement("tr",{key:"g".concat(t)},r.a.createElement("td",null,r.a.createElement("a",{href:"".concat(window.location.origin,"?src=").concat(encodeURIComponent(e.id))},e.name)),r.a.createElement("td",null,e.date.substring(0,10)))})))):[])}},{key:"render",value:function(){return this.context.oauthManager.pat()?this.renderLoad():this.renderLogin()}}]),n}(r.a.Component);function et(e){var t=Object(a.useState)(""),n=Object(b.a)(t,2),i=n[0],o=n[1],c=Object(a.useContext)(ke).addError;return r.a.createElement("div",null,r.a.createElement("div",{style:{height:"100px"}},r.a.createElement(fe,{value:i,onValueChange:o})),r.a.createElement("p",null,r.a.createElement("button",{onClick:function(){var t=e.onLoad;try{se(JSON.parse(i)),t()}catch(n){c("bad json: ".concat(n))}}},"Load JSON")))}function tt(e){var t=Object(a.useState)(""),n=Object(b.a)(t,2),i=n[0],o=n[1],c=Object(a.useContext)(ke).addError;function s(){return(s=Object(d.a)(u.a.mark((function t(){var n,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.onLoad,t.prev=1,t.next=4,fetch(i);case 4:return a=t.sent,t.next=7,a.json();case 7:se(t.sent),n(),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),c("could not load url: ".concat(t.t0));case 15:case"end":return t.stop()}}),t,null,[[1,12]])})))).apply(this,arguments)}return r.a.createElement("div",null,r.a.createElement(v,{value:i,onChange:o,placeholder:"url-to-json"}),r.a.createElement("p",null,r.a.createElement("button",{onClick:function(){return s.apply(this,arguments)}},"Load URL")))}function nt(e){var t=e.heading,n=e.children;return r.a.createElement("div",{className:"section"},r.a.createElement("div",{className:"section-heading"},t),r.a.createElement("div",{className:"section-content"},n))}function at(e){var t=e.data,n=e.onLoad,a=e.onClose;return r.a.createElement(G,{title:"Load",onClose:a},r.a.createElement(nt,{heading:"Load Gist"},r.a.createElement(Qe,{data:t,onLoad:n})),r.a.createElement(nt,{heading:"Load URL"},r.a.createElement(tt,{data:t,onLoad:n})),r.a.createElement(nt,{heading:"Load JSON"},r.a.createElement(et,{data:t,onLoad:n})))}Qe.contextType=ke;var rt=n(28),it=n(30),ot=new TextEncoder,ct=new TextDecoder,st=function(e){return e.startsWith("cb64,")||e.startsWith("b64,")};function lt(e){var t=e.startsWith("cb64,"),n=t?"cb64,":"b64,",a=e.substr(n.length).replace(/-/g,"+").replace(/_/g,"/"),r=new Uint8Array(Object(rt.decode)(a)),i=t?Object(it.b)(r):r,o=ct.decode(i);return JSON.parse(o)}var ut=/^[a-z0-9]+$/i,dt=function(e){return ut.test(e)};function ht(e,t){return mt.apply(this,arguments)}function mt(){return(mt=Object(d.a)(u.a.mark((function e(t,n){var a,r,i,o,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!dt(t)){e.next=9;break}return e.next=3,n.getAnonGist(t);case 3:return a=e.sent,r=a.data,i=a.rawData,e.abrupt("return",{data:r,id:t,rawData:i});case 9:if(!st(t)){e.next=13;break}return e.abrupt("return",{data:lt(t)});case 13:return e.next=15,fetch(t);case 15:return o=e.sent,e.next=18,o.json();case 18:return c=e.sent,e.abrupt("return",{data:c});case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ft=function(){function e(t){var n=this;Object(m.a)(this,e),this.requestToken=function(){var e=Object(d.a)(u.a.mark((function e(t){var a,r,i,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={client:"c055b54872b13c10e4bd",code:t.code},r=E("https://auth.jsgist.org/oauth-helper",a),e.next=5,fetch(r);case 5:return i=e.sent,e.next=8,i.json();case 8:if((o=e.sent).access_token){e.next=11;break}throw new Error(JSON.stringify(o));case 11:n._storageManager.set("pat",o.access_token),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),this.logout=function(){n._storageManager.delete("pat")},this.login=function(){n._closePopup(),n.state="".concat(Date.now(),"-").concat(Math.random());var e=E("https://github.com/login/oauth/authorize",{client_id:"c055b54872b13c10e4bd",scope:"gist",state:n.state});n.popup=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.width||500,a=t.height||500,r={width:n,height:a,top:window.screenY+(window.outerHeight-a)/2.5,left:window.screenX+(window.outerWidth-n)/2};return window.open(e,"_blank",Ie(r))}(e)},this._popup=void 0,this._state=void 0,this._storageManager=t,w("auth",(function(e){n._closePopup(),e.state===n.state&&n.requestToken(e)}))}return Object(f.a)(e,[{key:"pat",value:function(){return this._storageManager.get("pat")}},{key:"subscribe",value:function(e){this._storageManager.subscribe("pat",e)}},{key:"unsubscribe",value:function(e){this._storageManager.unsubscribe("pat",e)}},{key:"_closePopup",value:function(){this.popup&&(this.popup.close(),this.popup=void 0)}}]),e}(),gt=function(e){Object(g.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(m.a)(this,n),(e=t.call(this)).onPatChange=function(){e.forceUpdate()},e.saveNew=Object(d.a)(u.a.mark((function t(){var n,a,r,i,o,c,s,l,d,h,m,f,g;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.context,a=n.oauthManager,r=n.github,i=n.addError,e.setState({saving:!0}),o=e.props,c=o.data,s=o.onSave,l=o.onClose,d=!1,r.setPat(a.pat()),t.prev=5,t.next=8,r.createGist(c);case 8:h=t.sent,m=h.id,f=h.name,g=h.date,$e(m,f,g),s(m),d=!0,t.next=20;break;case 17:t.prev=17,t.t0=t.catch(5),i("could not create gist: ".concat(t.t0));case 20:e.setState({saving:!1}),d&&l();case 22:case"end":return t.stop()}}),t,null,[[5,17]])}))),e.saveOverExisting=Object(d.a)(u.a.mark((function t(){var n,a,r,i,o,c,s,l,d,h,m,f,g;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.context,a=n.oauthManager,r=n.github,i=n.addError,e.setState({saving:!0}),o=e.props,c=o.data,s=o.gistId,l=o.onClose,d=!1,r.setPat(a.pat()),t.prev=5,t.next=8,r.updateGist(s,c);case 8:h=t.sent,m=h.id,f=h.name,g=h.date,$e(m,f,g),d=!0,t.next=19;break;case 16:t.prev=16,t.t0=t.catch(5),i("could not update gist: ".concat(t.t0));case 19:e.setState({saving:!1}),d&&l();case 21:case"end":return t.stop()}}),t,null,[[5,16]])}))),e.state={saving:!1},e}return Object(f.a)(n,[{key:"componentDidMount",value:function(){this.context.oauthManager.subscribe(this.onPatChange)}},{key:"componentWillUnmount",value:function(){this.context.oauthManager.unsubscribe(this.onPatChange)}},{key:"renderLogin",value:function(){var e=this.context.oauthManager;return r.a.createElement("div",null,r.a.createElement("button",{onClick:e.login},"Login with github"))}},{key:"renderSave",value:function(){var e=this.state.saving,t=this.context.oauthManager.pat(),n=this.props.gistId,a=t&&n;return r.a.createElement("div",null,r.a.createElement("button",{className:be({disabled:e}),"data-type":"new",onClick:this.saveNew},"Save to New Gist"),r.a.createElement("button",{className:be({disabled:!a||e}),"data-type":"update",onClick:this.saveOverExisting},"Update Current Gist"))}},{key:"render",value:function(){return this.context.oauthManager.pat()?this.renderSave():this.renderLogin()}}]),n}(r.a.Component);function pt(e){var t=e.data;return r.a.createElement("div",null,r.a.createElement("div",null,"Copy the text below, paste into the load ui or put somewhere on the net and make your own URL with ",r.a.createElement("code",null,window.location.origin,"?src=url-to-json"),"."),r.a.createElement("pre",{style:{userSelect:"all"}},JSON.stringify(t)),r.a.createElement("div",null,r.a.createElement("a",{href:"".concat(window.location.origin,"?src=").concat(encodeURIComponent("".concat(window.location.origin,"/example.json")))},"Example")))}function vt(e){var t=function(e){var t=JSON.stringify(e),n=ot.encode(t),a=Object(it.a)(n),r=a.length<n.length,i=Object(rt.encode)(r?a:n).replace(/\+/g,"-").replace(/\//g,"_");return"".concat(r?"cb64,":"b64,").concat(i)}(e.data),n="".concat(window.location.origin,"?src=").concat(encodeURIComponent(t));return r.a.createElement("div",null,r.a.createElement("div",null,"Copy / bookmark the link below"),r.a.createElement("a",{className:"bookmark",href:n,target:"_blank",rel:"noopener noreferrer"},n))}function bt(e){var t=e.gistId;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("p",null,"You can embed a jsGist by creating an iframe pointing to"," ",r.a.createElement("code",null,"https://jsgist.org/embed.html?src=<src>")," "," where"," ",r.a.createElement("code",null,"<src>")," "," is one of the forms above. Either"," ",r.a.createElement("code",null,"?src=<gist_id>")," ","or"," ",r.a.createElement("code",null,"?src=<base64url>")," ","or"," ",r.a.createElement("code",null,"?src=<url_to_json>")," ",". You can also add "," ",r.a.createElement("code",null,"noheader=true")," "," if you don't want the header to appear. You can also just run them directly rather than put in an iframe. ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://jsgist.org/embed.html?src=bad0a8491bd6614e729ff01cc14089c9"},"[example]")," ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://jsgist.org/embed.html?src=bad0a8491bd6614e729ff01cc14089c9&noheader=true"},"[example no header]")),t?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"For example:"),r.a.createElement("pre",null,r.a.createElement("code",null,'<iframe src="https://jsgist.org/embed.html?src=',t,'" ></iframe>'))):[],r.a.createElement("p",null)))}function Et(e){var t=e.data,n=e.gistId,a=e.onSave,i=e.onClose;return r.a.createElement(G,{title:"Save As",onClose:i},r.a.createElement(nt,{heading:"Save As Gist"},r.a.createElement(gt,{gistId:n,data:t,onClose:i,onSave:a})),r.a.createElement(nt,{heading:"Save As URL"},r.a.createElement(vt,{data:t})),r.a.createElement(nt,{heading:"Save As JSON"},r.a.createElement(pt,{data:t})),r.a.createElement(nt,{heading:"Embedding"},r.a.createElement(bt,{gistId:n})))}gt.contextType=ke;var yt=n(50),jt=n.n(yt),wt=n(51),kt=n.n(wt),Ot=n(52),xt=n.n(Ot),St=n(53),Ct=n.n(St);function Nt(e){var t=e.children,n=e.onChange,a=e.selected;return r.a.createElement("div",{className:be({radioSelected:a}),onClick:n},t)}function Lt(e){var t=e.selectedNdx,n=e.onChange,a=e.children,i=0,o=r.a.Children.map(a,(function(e){if(!r.a.isValidElement(e))return null;var a=i===t,o=i;return i+=1,r.a.cloneElement(e,{selected:a,onChange:function(){return n(o)}})}));return r.a.createElement("div",{className:"radio"},o)}var Mt=function(e){Object(g.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleChange=function(){e.forceUpdate()},e.handleLayoutChange=function(e){Ge("layout",e)},e}return Object(f.a)(n,[{key:"componentDidMount",value:function(){De(this.handleChange)}},{key:"componentWillUnmount",value:function(){Ke(this.handleChange)}},{key:"render",value:function(){var e=this.props.onClose;return r.a.createElement(G,{title:"Settings",onClose:e},r.a.createElement(nt,{heading:"Layout"},r.a.createElement("div",{className:"layout"},r.a.createElement(Lt,{selectedNdx:Te().layout,onChange:this.handleLayoutChange},r.a.createElement(Nt,null,r.a.createElement("img",{src:jt.a,alt:"vertical"})),r.a.createElement(Nt,null,r.a.createElement("img",{src:kt.a,alt:"horizontal"})),r.a.createElement(Nt,null,r.a.createElement("img",{src:xt.a,alt:"2x2"})),r.a.createElement(Nt,null,r.a.createElement("img",{src:Ct.a,alt:"tabbed"}))))))}}]),n}(r.a.Component),It=(n(113),function(){return[]}),Rt=window.matchMedia("(prefers-color-scheme: dark)"),Pt=function(){var e=window.location,t=Object.fromEntries(new URLSearchParams(e.search).entries()).src;return t?"".concat(encodeURIComponent(t)):""},At=function(e){Object(g.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(m.a)(this,n),(e=t.call(this)).addMsg=function(t,n){switch(n){case"error":console.error(t);break;default:console.log(t)}e.setState({messages:[{msg:t,className:n}].concat(Object(h.a)(e.state.messages))}),setTimeout((function(){e.setState({messages:e.state.messages.slice(0,e.state.messages.length-1)})}),5e3)},e.addInfo=function(t){return e.addMsg(t,"info")},e.addError=function(t){return e.addMsg(t,"error")},e.closeDialog=function(){e.setState({dialog:It})},e.registerRunnerAPI=function(t){e.runnerAPI=t,e.handleStop()},e.handleNew=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.location.href=window.location.origin;case 1:case"end":return e.stop()}}),e)}))),e.handleRun=Object(d.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:C.set("backup",JSON.stringify({href:window.location.href,data:ne()})),e.logManager.clear(),console.clear(),e.runnerAPI.run(ne());case 4:case"end":return t.stop()}}),t)}))),e.handleStop=Object(d.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.runnerAPI.run(te(),!0);case 1:case"end":return t.stop()}}),t)}))),e.handleSave=Object(d.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({dialog:e.renderSave});case 1:case"end":return t.stop()}}),t)}))),e.handleSettings=function(){e.setState({dialog:e.renderSettings})},e.handleHelp=function(){e.setState({dialog:e.renderHelp})},e.handleLoad=function(){e.setState({dialog:e.renderLoad})},e.handleOnLoad=Object(d.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({dialog:It}),e.handleRun();case 2:case"end":return t.stop()}}),t)}))),e.handleOnSave=function(t){window.history.pushState({},"","".concat(window.location.origin,"?src=").concat(t)),e.setState({gistId:t})},e.handleAbort=function(){e.abort()},e.renderHelp=function(){return r.a.createElement(T,{onClose:e.closeDialog})},e.renderSettings=function(){return r.a.createElement(Mt,{onClose:e.closeDialog})},e.renderLoad=function(){return r.a.createElement(at,{onLoad:e.handleOnLoad,onClose:e.closeDialog,addError:e.addError,github:e.github})},e.renderSave=function(){var t=ne();return r.a.createElement(Et,{onSave:e.handleOnSave,onClose:e.closeDialog,addError:e.addError,github:e.github,gistId:e.state.gistId,data:t})},e.state={path:window.location.pathname,disqusId:Pt(),dark:Rt.matches,loading:!1,dialog:It,gistId:"",messages:[],userData:{},updateVersion:0},e.github=new U,e.logManager=new Oe,e.oauthManager=new ft(C),e}return Object(f.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.github.addEventListener("userdata",(function(t){e.setState({userData:t.data})})),Y("path",window.location.pathname),X("path",(function(t){window.history.pushState({},"",t),e.setState({path:t,disqusId:Pt()})})),X("filesVersion",(function(t){e.forceUpdate()})),X("updateVersion",(function(t){e.setState({updateVersion:e.state.updateVersion+1})})),Rt.addEventListener("change",(function(){e.setState({dark:Rt.matches})}));var t=Object.fromEntries(new URLSearchParams(window.location.search).entries()),n=C.get("backup"),a=!1;if(n){try{var r=JSON.parse(n);r.href===window.location.href&&(se(r.data),a=!0,this.addInfo("loaded backup from local storage"))}catch(i){console.log("bad backup")}C.delete("backup")}!a&&t.src&&this.loadData(t.src)}},{key:"loadData",value:function(){var e=Object(d.a)(u.a.mark((function e(t){var n,a,r,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),n=!0,e.prev=2,e.next=5,ht(t,this.github);case 5:a=e.sent,r=a.data,i=a.id,se(r),i&&this.setState({gistId:t}),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(2),n=!1,console.warn(e.t0),this.addError("could not load jsGist: src=".concat(t," ").concat(e.t0));case 17:this.setState({loading:!1}),n&&this.handleRun();case 19:case"end":return e.stop()}}),e,this,[[2,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=ne(),t=this.state,n=t.loading,a=t.dialog,i=t.updateVersion,o=t.userData;return r.a.createElement("div",{className:"App"},r.a.createElement(ke.Provider,{value:{github:this.github,oauthManager:this.oauthManager,addError:this.addError,addInfo:this.addInfo,storageManager:C,logManager:this.logManager}},r.a.createElement("div",{className:"content"},r.a.createElement(_,null),r.a.createElement("div",{className:"top"},r.a.createElement("div",{className:"left"},r.a.createElement("div",{className:"name"},r.a.createElement(v,{value:e.name,onChange:function(e){return t=e,Q.name=t,re(),void ie();var t}}),o.name?r.a.createElement("div",{className:"username"},r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/".concat(o.name)},o.name)):[],o.avatarURL?r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/".concat(o.name)},r.a.createElement("img",{className:"avatar",src:o.avatarURL,alt:"avatar"})):[])),r.a.createElement("div",{className:"right"},r.a.createElement("button",{tabIndex:"1",onClick:this.handleRun},"Run"),r.a.createElement("button",{tabIndex:"1",onClick:this.handleStop},"Stop"),r.a.createElement("button",{tabIndex:"1",onClick:this.handleSave},"Save"),r.a.createElement("button",{tabIndex:"1",onClick:this.handleNew},"New"),r.a.createElement("button",{tabIndex:"1",onClick:this.handleLoad},"Load"),r.a.createElement("button",{tabIndex:"1",onClick:this.handleSettings,title:"settings"},r.a.createElement("img",{src:"".concat(window.location.origin,"/resources/images/gear.svg"),alt:"settings"})),r.a.createElement("button",{tabIndex:"1",onClick:this.handleHelp,title:"help"},"?"))),n?[]:r.a.createElement("div",{className:"bottom"},r.a.createElement(Fe,{hackKey:i,data:e,registerRunnerAPI:this.registerRunnerAPI}))),r.a.createElement(x,{disqusId:Pt(),title:e.name}),a(),r.a.createElement("div",{className:"messages"},this.state.messages.map((function(e,t){var n=e.msg,a=e.className;return r.a.createElement("div",{className:a,key:"err".concat(t)},n)})))))}}]),n}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(At,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},47:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/schema#","type":"object","properties":{"name":{"type":"string"},"settings":{"type":"object"},"files":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string"},"content":{"type":"string"}},"required":["content","name"]}}},"required":["name","settings","files"]}')},50:function(e,t,n){e.exports=n.p+"static/media/vertical-layout.f248a432.svg"},51:function(e,t,n){e.exports=n.p+"static/media/horizontal-layout.e3f3298b.svg"},52:function(e,t,n){e.exports=n.p+"static/media/two-by-two-layout.23605ce8.svg"},53:function(e,t,n){e.exports=n.p+"static/media/tabbed-layout.45000d71.svg"},54:function(e,t,n){e.exports=n(114)},59:function(e,t,n){},60:function(e,t,n){}},[[54,1,2]]]);
//# sourceMappingURL=main.601331dc.chunk.js.map