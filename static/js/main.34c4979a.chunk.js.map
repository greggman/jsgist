{"version":3,"sources":["scrollbars.js","EditLine.js","model.js","Split.js","Code.js","css-utils.js","CodeArea.js","File.js","Files.js","url.js","window-message-manager.js","Disqus.js","Footer.js","GitHub.js","Dialog.js","Help.js","gists.js","utils.js","LoadGist.js","LoadJSON.js","LoadURL.js","Section.js","Load.js","compression.js","loader.js","Log.js","SaveAsGist.js","SaveAsJSON.js","SaveAsURL.js","Embed.js","Save.js","Settings.js","Runner.js","App.js","serviceWorker.js","index.js","icons/vertical-layout.svg","icons/horizontal-layout.svg","icons/two-by-two-layout.svg"],"names":["parent","document","createElement","setAttribute","classList","add","child","appendChild","body","firstChild","clientWidth","removeChild","EditLine","props","type","onChange","e","target","value","placeholder","validator","Ajv","compile","schema","trackedValues","getValueOrMakeNew","name","trackedValue","subscriptions","Set","initialValue","undefined","get","set","newValue","Error","fns","keys","fn","subscribe","data","newTestData","content","getBlankData","url","window","location","origin","JSON","parse","stringify","getData","incVersion","key","incDataVersion","_","incFilesVersion","setData","newData","errors","map","message","dataPath","validate","distribute","items","buckets","base","extra","array","Array","fill","leap","halfLeap","v","i","getMouseOrTouchPosition","clientAxis","touches","getDirectionProps","direction","dimension","position","positionEnd","clientSize","style","width","display","computeNewSizes","startSizes","currentSizes","prevPaneNdx","gutterReservedSizesPX","minSizePX","deltaPX","outerSizePX","nextPaneNdx","prevPaneStartSizePX","Math","ceil","spaceUsedByBothElementsPX","prevPaneNewSizePX","min","max","nextPaneNewSizePX","slice","length","stopMobileBrowserFromScrolling","preventDefault","Gutter","handleMouseDownAndTouchStart","onMouseDownAndTouchStart","elementRef","React","createRef","elem","this","current","addEventListener","passive","removeEventListener","dragging","ref","className","Component","GManSplit","_setSizes","sizes","setState","handleMouseUpAndTouchEnd","handleMouseAndTouchMove","gutterSize","minSize","computeNewSizesFn","onSetSizes","propSizes","state","mouseStart","stateSizes","setSizes","numPanes","prototype","indexOf","call","parentElement","children","recomputeSizes","numChildren","Children","count","newSizes","totalSize","reduce","sum","normalizeSizes","totalSizePX","addSpaceForChildren","size","setTimeout","rest","totalGutterSpace","gutterStyle","gutterReservedSizes","childNdx","first","newChildren","forEach","isValidElement","push","cloneElement","userSelect","darkMatcher","matchMedia","noop","Code","registerEditor","editor","hackKey","registerAPI","goToLine","lineNo","colNo","focus","doc","setCursor","options","onValueChange","isDarkMode","matches","mode","scrollbarStyle","theme","lineNumbers","onBeforeChange","editorDidMount","camelCaseRE","toDash","left","right","camelCaseToDash","s","replace","toLowerCase","classNames","names","args","arg","Object","entries","join","CodeArea","heading","File","handleRegisterAPI","api","codeAPI","register","title","section","unregister","mimeType","mime","lookup","Files","handleRegister","file","files","handleUnregister","delete","Map","fileToKeyMap","test","Date","now","random","ndx","getFileKey","desc","onTitleChange","newName","model","createURL","params","URL","searchParams","URLSearchParams","search","toString","href","updateURL","history","replaceState","handlers","on","remove","splice","Disqus","handleResize","iframeRef","height","winMsgMgr","nextProps","disqusId","src","Footer","Fragment","emptyValue","getGistContent","gist","filter","startsWith","substr","concat","getAnonGist","gist_id","a","fetch","req","json","rawData","createGistData","trim","saveData","jsGistData","filename","description","public","settings","private","GitHub","pat","user","unAuthorizedOctokit","Octokit","userAgent","userData","owner","login","avatarURL","avatar_url","getUserData","assign","event","Event","dispatchEvent","authorizedOctokit","auth","paginate","gists","list","_updateUserData","octokit","gistData","create","id","date","updated_at","update","EventTarget","Dialog","handleKeyDown","keyCode","onClose","onClick","tabIndex","stopPropagation","Help","rel","gistSchema","gistsSchema","ajv","gistsValidator","gistValidator","getStoredGists","localStorage","getItem","removeIem","addGist","saveGistsToLocalStorage","setItem","setGists","unsubscribe","wait","ms","Promise","resolve","LoadGist","handlePATChange","handleSubmit","loadGists","handleNewGists","loading","addError","github","setPat","getUserGists","gistArray","loggedIn","canLoad","sort","b","disabled","encodeURIComponent","substring","LoadJSON","useState","setJSON","onLoad","LoadURL","setUrl","Section","Load","utf8Encoder","TextEncoder","utf8Decoder","TextDecoder","isCompressedBase64","compressedBase64ToJSON","isCompressed","prefix","base64","raw","Uint8Array","decode","bin","inflate","idRE","isGistId","loadGistFromSrc","res","LogManager","clear","_msgs","_notify","addMsg","lastData","oldMsg","newMsg","isMsgSame","Log","handleChange","forceUpdate","logManager","logMessagesRef","prevProps","prevState","snapshot","scrollTop","scrollHeight","clientHeight","onGoToLine","getMsgs","msg","fileLink","SaveAsGist","saveFn","markToSaveNewGist","saveNew","markToUpdateGist","saveOverExisting","saving","onSave","success","createGist","gistId","updateGist","canSave","onSubmit","data-type","SaveAsJSON","SaveAsURL","encode","compressed","deflate","useCompressed","jsonToCompressedBase64","Embed","Save","RadioOption","selected","radioSelected","Radio","selectedNdx","class","console","log","verticalIcon","alt","horizontalIcon","twoByTwoIcon","Runner","handleJSLog","handleJSError","handleGimmeDaCodez","iframe","contentWindow","postMessage","handleMessage","runnerRef","registerRunnerAPI","run","blank","removeIFrame","background","noJSX","makeDisqusId","loc","fromEntries","App","error","messages","addInfo","closeDialog","dialog","runnerAPI","handleStop","registerFilesAPI","filesAPI","handleNew","handleRun","handleSave","renderSave","handleSettings","renderSettings","handleHelp","renderHelp","handleLoad","renderLoad","handleOnLoad","handleOnSave","pushState","handleAbort","abort","handleGoToLine","path","pathname","dark","updateVersion","query","backup","loaded","removeItem","loadData","warn","Boolean","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","then","registration","catch","module","exports"],"mappings":"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","file":"static/js/main.34c4979a.chunk.js","sourcesContent":["import './scrollbars.css';\n\n/*\n * Scrollbar Width Test\n * Adds `layout-scrollbar-obtrusive` class to body if scrollbars use up screen real estate\n */\nconst parent = document.createElement(\"div\");\nparent.setAttribute(\"style\", \"width:30px;height:30px;\");\nparent.classList.add('scrollbar-test');\n\nconst child = document.createElement(\"div\");\nchild.setAttribute(\"style\", \"width:100%;height:40px\");\nparent.appendChild(child);\ndocument.body.appendChild(parent);\n\n// Measure the child element, if it is not\n// 30px wide the scrollbars are obtrusive.\nconst scrollbarWidth = 30 - parent.firstChild.clientWidth;\nif(scrollbarWidth) {\n  document.body.classList.add(\"layout-scrollbar-obtrusive\");\n}\n\ndocument.body.removeChild(parent);","import React from 'react';\n\nexport default function EditLine(props) {\n  return (\n    <input\n      type=\"text\"\n      onChange={(e) => {props.onChange(e.target.value)}}\n      placeholder={props.placeholder}\n      value={props.value} />\n  );\n}","import Ajv from 'ajv';\n\nimport {isDevelopment} from './flags.js';\nimport schema from './schema.json';\n\nconst ajv = new Ajv() // options can be passed, e.g. {allErrors: true}\nconst validator = ajv.compile(schema);\n\nconst trackedValues = {};\n\nfunction getValueOrMakeNew(name) {\n  const trackedValue = trackedValues[name] || {\n    subscriptions: new Set(),\n  };\n  trackedValues[name] = trackedValue;\n  return trackedValue;\n}\n\nexport function add(name, initialValue) {\n  const trackedValue = getValueOrMakeNew(name);\n  if (initialValue !== undefined) {\n    trackedValue.value = initialValue;\n  }\n  return trackedValue;\n}\n\nexport function get(name) {\n  return trackedValues[name].value;\n}\n\nexport function set(name, newValue) {\n  const trackedValue = trackedValues[name];\n  if (!trackedValue) {\n    throw new Error(`no such track value: ${name}`);\n  }\n  trackedValue.value = newValue;\n  const fns = [...trackedValue.subscriptions.keys()];\n  for (const fn of fns) {\n    fn(newValue, name);\n  }\n}\n\nexport function subscribe(name, fn) {\n  const trackedValue = getValueOrMakeNew(name);\n  trackedValue.subscriptions.add(fn);\n}\n\nexport function unsubscribe(name, fn) {\n  const trackedValue = getValueOrMakeNew(name);\n  trackedValue.subscriptions.delete(fn);\n}\n\nconst newTestData = {\n  \"name\": \"My jsGist\",\n  \"settings\": {},\n  \"files\": [\n    {\n      name: \"index.html\",\n      content: \"\",\n    },\n    {\n      name: \"index.css\",\n      content: \"\",\n    },\n    {\n      name: \"index.js\",\n      content: \"\",\n    },\n  ],\n};\nexport function getNewData() {\n  return JSON.parse(JSON.stringify(newTestData));\n}\nexport function getBlankData() {\n  const url = `${window.location.origin}/resources/images/logo.svg`;\n  return JSON.parse(JSON.stringify({\n    \"name\": \"jsGist\",\n    \"settings\": {},\n    \"files\": [\n      {\n        \"name\": \"index.html\",\n        \"content\": ``,\n      },\n      {\n        \"name\": \"index.css\",\n        \"content\": `\n          html, body {\n            margin: 0;\n            width: 100%;\n            height: 100%;\n            background-image: url(${url});\n            background-size: contain contain;\n            background-position: center center;\n            background-repeat: no-repeat no-repeat;\n          }\n          @media (prefers-color-scheme: dark) {\n            html {\n              background: #222;\n            }\n          }\n        `,\n      },\n      {\n        \"name\": \"index.js\",\n        \"content\": \"\",\n      }\n    ]\n  }));\n}\n\nlet data;\nexport function getData() {\n  return data;\n}\n\nexport const dataVersionKey = 'dataVersion';\nexport const updateVersionKey = 'updateVersion';\nexport const filesVersionKey = 'filesVersion';\n\nadd(dataVersionKey, 0);   // any data changes (when an item in the data is change)\nadd(updateVersionKey, 0);  // all data changes (when the entire data objects replaced with new data)\nadd(filesVersionKey, 0);  // files added or removed or the main name is changed\n\nconst incVersion = key => set(key, get(key) + 1);\nconst incDataVersion = _ => incVersion(dataVersionKey);\nconst incFilesVersion = _ => incVersion(filesVersionKey);\nconst incUpdateVersion = _ => {\n  incVersion(updateVersionKey);\n  incDataVersion();\n  incFilesVersion();\n};\n\nfunction getUniqueName(basename) {\n  const filenames = new Set(data.files.map(f => f.name));\n  for (let count = data.files.length + 1; ; ++count) {\n    const name = `${basename}${count}`;\n    if (!filenames.has(name)) {\n      return name;\n    }\n  }\n}\n\nexport function addFile(name = \"\", content = \"\") {\n  name = name || getUniqueName('unnamed');\n  data.files.push({\n    name,\n    content,\n  });\n  incDataVersion();\n  incFilesVersion();\n}\n\nexport function setName(name) {\n  data.name = name;\n  incDataVersion();\n  incFilesVersion();\n}\n\nexport function setFileName(ndx, newName) {\n  data.files[ndx].name = newName;\n  incDataVersion();\n}\n\nexport function setFileContent(ndx, content) {\n  data.files[ndx].content = content;\n  incDataVersion();\n}\n\nexport function setFileType(ndx, type) {\n  data.files[ndx].type = type;\n  incDataVersion();\n}\n\nexport function deleteFile(ndx) {\n  data.files.splice(ndx, 1);\n  incDataVersion();\n  incFilesVersion();\n}\n\nexport function validate(data) {\n  if (!validator(data)) {\n    debugger;\n    throw new Error(`data not valid:\\n${validator.errors.map(e => `${e.message}: ${e.dataPath}`)}`);\n  }\n}\n\nexport function setData(newData) {\n  validate(newData);\n  data = newData;\n  if (isDevelopment) {\n    window.d = data;\n  }\n  incUpdateVersion();\n}\n\nsetData(isDevelopment ? {\n  \"name\": \"ThreeJSFundamentals Scenegraph Tank\",\n  \"settings\": {},\n  \"files\": [\n    {\n      \"name\": \"index.html\",\n      \"content\": \"<canvas id=\\\"c\\\"></canvas>\\n<div id=\\\"info\\\"></div>\",\n    },\n    {\n      \"name\": \"index.css\",\n      \"content\": \"body {\\n  margin: 0;\\n}\\n#c {\\n  width: 100vw;\\n  height: 100vh;\\n  display: block;\\n}\\n#info { \\n  position: absolute; \\n  left: 1em; \\n  top: 1em; \\n  background: rgba(0,0,0,.8); \\n  padding: .5em;\\n  color: white;\\n  font-family: monospace;\\n}\",\n    },\n    {\n      \"name\": \"index.js\",\n      \"content\": \"import * as THREE from 'https://threejsfundamentals.org/threejs/resources/threejs/r119/build/three.module.js';\\n\\nfunction main() {\\n  const canvas = document.querySelector('#c');\\n  const renderer = new THREE.WebGLRenderer({canvas: canvas});\\n  renderer.setClearColor(0xAAAAAA);\\n  renderer.shadowMap.enabled = true;\\n\\n  function makeCamera(fov = 40) {\\n    const aspect = 2;  // the canvas default\\n    const zNear = 0.1;\\n    const zFar = 1000;\\n    return new THREE.PerspectiveCamera(fov, aspect, zNear, zFar);\\n  }\\n  const camera = makeCamera();\\n  camera.position.set(8, 4, 10).multiplyScalar(3);\\n  camera.lookAt(0, 0, 0);\\n\\n  const scene = new THREE.Scene();\\n\\n  {\\n    const light = new THREE.DirectionalLight(0xffffff, 1);\\n    light.position.set(0, 20, 0);\\n    scene.add(light);\\n    light.castShadow = true;\\n    light.shadow.mapSize.width = 2048;\\n    light.shadow.mapSize.height = 2048;\\n\\n    const d = 50;\\n    light.shadow.camera.left = -d;\\n    light.shadow.camera.right = d;\\n    light.shadow.camera.top = d;\\n    light.shadow.camera.bottom = -d;\\n    light.shadow.camera.near = 1;\\n    light.shadow.camera.far = 50;\\n    light.shadow.bias = 0.001;\\n  }\\n\\n  {\\n    const light = new THREE.DirectionalLight(0xffffff, 1);\\n    light.position.set(1, 2, 4);\\n    scene.add(light);\\n  }\\n\\n  const groundGeometry = new THREE.PlaneBufferGeometry(50, 50);\\n  const groundMaterial = new THREE.MeshPhongMaterial({color: 0xCC8866});\\n  const groundMesh = new THREE.Mesh(groundGeometry, groundMaterial);\\n  groundMesh.rotation.x = Math.PI * -.5;\\n  groundMesh.receiveShadow = true;\\n  scene.add(groundMesh);\\n\\n  const carWidth = 4;\\n  const carHeight = 1;\\n  const carLength = 8;\\n\\n  const tank = new THREE.Object3D();\\n  scene.add(tank);\\n\\n  const bodyGeometry = new THREE.BoxBufferGeometry(carWidth, carHeight, carLength);\\n  const bodyMaterial = new THREE.MeshPhongMaterial({color: 0x6688AA});\\n  const bodyMesh = new THREE.Mesh(bodyGeometry, bodyMaterial);\\n  bodyMesh.position.y = 1.4;\\n  bodyMesh.castShadow = true;\\n  tank.add(bodyMesh);\\n\\n  const tankCameraFov = 75;\\n  const tankCamera = makeCamera(tankCameraFov);\\n  tankCamera.position.y = 3;\\n  tankCamera.position.z = -6;\\n  tankCamera.rotation.y = Math.PI;\\n  bodyMesh.add(tankCamera);\\n\\n  const wheelRadius = 1;\\n  const wheelThickness = .5;\\n  const wheelSegments = 6;\\n  const wheelGeometry = new THREE.CylinderBufferGeometry(\\n      wheelRadius,     // top radius\\n      wheelRadius,     // bottom radius\\n      wheelThickness,  // height of cylinder\\n      wheelSegments);\\n  const wheelMaterial = new THREE.MeshPhongMaterial({color: 0x888888});\\n  const wheelPositions = [\\n    [-carWidth / 2 - wheelThickness / 2, -carHeight / 2,  carLength / 3],\\n    [ carWidth / 2 + wheelThickness / 2, -carHeight / 2,  carLength / 3],\\n    [-carWidth / 2 - wheelThickness / 2, -carHeight / 2, 0],\\n    [ carWidth / 2 + wheelThickness / 2, -carHeight / 2, 0],\\n    [-carWidth / 2 - wheelThickness / 2, -carHeight / 2, -carLength / 3],\\n    [ carWidth / 2 + wheelThickness / 2, -carHeight / 2, -carLength / 3],\\n  ];\\n  const wheelMeshes = wheelPositions.map((position) => {\\n    const mesh = new THREE.Mesh(wheelGeometry, wheelMaterial);\\n    mesh.position.set(...position);\\n    mesh.rotation.z = Math.PI * .5;\\n    mesh.castShadow = true;\\n    bodyMesh.add(mesh);\\n    return mesh;\\n  });\\n\\n  const domeRadius = 2;\\n  const domeWidthSubdivisions = 12;\\n  const domeHeightSubdivisions = 12;\\n  const domePhiStart = 0;\\n  const domePhiEnd = Math.PI * 2;\\n  const domeThetaStart = 0;\\n  const domeThetaEnd = Math.PI * .5;\\n  const domeGeometry = new THREE.SphereBufferGeometry(\\n    domeRadius, domeWidthSubdivisions, domeHeightSubdivisions,\\n    domePhiStart, domePhiEnd, domeThetaStart, domeThetaEnd);\\n  const domeMesh = new THREE.Mesh(domeGeometry, bodyMaterial);\\n  domeMesh.castShadow = true;\\n  bodyMesh.add(domeMesh);\\n  domeMesh.position.y = .5;\\n\\n  const turretWidth = .1;\\n  const turretHeight = .1;\\n  const turretLength = carLength * .75 * .2;\\n  const turretGeometry = new THREE.BoxBufferGeometry(\\n      turretWidth, turretHeight, turretLength);\\n  const turretMesh = new THREE.Mesh(turretGeometry, bodyMaterial);\\n  const turretPivot = new THREE.Object3D();\\n  turretMesh.castShadow = true;\\n  turretPivot.scale.set(5, 5, 5);\\n  turretPivot.position.y = .5;\\n  turretMesh.position.z = turretLength * .5;\\n  turretPivot.add(turretMesh);\\n  bodyMesh.add(turretPivot);\\n\\n  const turretCamera = makeCamera();\\n  turretCamera.position.y = .75 * .2;\\n  turretMesh.add(turretCamera);\\n\\n  const targetGeometry = new THREE.SphereBufferGeometry(.5, 6, 3);\\n  const targetMaterial = new THREE.MeshPhongMaterial({color: 0x00FF00, flatShading: true});\\n  const targetMesh = new THREE.Mesh(targetGeometry, targetMaterial);\\n  const targetOrbit = new THREE.Object3D();\\n  const targetElevation = new THREE.Object3D();\\n  const targetBob = new THREE.Object3D();\\n  targetMesh.castShadow = true;\\n  scene.add(targetOrbit);\\n  targetOrbit.add(targetElevation);\\n  targetElevation.position.z = carLength * 2;\\n  targetElevation.position.y = 8;\\n  targetElevation.add(targetBob);\\n  targetBob.add(targetMesh);\\n\\n  const targetCamera = makeCamera();\\n  const targetCameraPivot = new THREE.Object3D();\\n  targetCamera.position.y = 1;\\n  targetCamera.position.z = -2;\\n  targetCamera.rotation.y = Math.PI;\\n  targetBob.add(targetCameraPivot);\\n  targetCameraPivot.add(targetCamera);\\n\\n  // Create a sine-like wave\\n  const curve = new THREE.SplineCurve( [\\n    new THREE.Vector2( -10, 0 ),\\n    new THREE.Vector2( -5, 5 ),\\n    new THREE.Vector2( 0, 0 ),\\n    new THREE.Vector2( 5, -5 ),\\n    new THREE.Vector2( 10, 0 ),\\n    new THREE.Vector2( 5, 10 ),\\n    new THREE.Vector2( -5, 10 ),\\n    new THREE.Vector2( -10, -10 ),\\n    new THREE.Vector2( -15, -8 ),\\n    new THREE.Vector2( -10, 0 ),\\n  ] );\\n\\n  const points = curve.getPoints( 50 );\\n  const geometry = new THREE.BufferGeometry().setFromPoints( points );\\n  const material = new THREE.LineBasicMaterial( { color : 0xff0000 } );\\n  const splineObject = new THREE.Line( geometry, material );\\n  splineObject.rotation.x = Math.PI * .5;\\n  splineObject.position.y = 0.05;\\n  scene.add(splineObject);\\n\\n  function resizeRendererToDisplaySize(renderer) {\\n    const canvas = renderer.domElement;\\n    const width = canvas.clientWidth;\\n    const height = canvas.clientHeight;\\n    const needResize = canvas.width !== width || canvas.height !== height;\\n    if (needResize) {\\n      renderer.setSize(width, height, false);\\n    }\\n    return needResize;\\n  }\\n\\n  const targetPosition = new THREE.Vector3();\\n  const tankPosition = new THREE.Vector2();\\n  const tankTarget = new THREE.Vector2();\\n\\n  const cameras = [\\n    { cam: camera, desc: 'detached camera', },\\n    { cam: turretCamera, desc: 'on turret looking at target', },\\n    { cam: targetCamera, desc: 'near target looking at tank', },\\n    { cam: tankCamera, desc: 'above back of tank', },\\n  ];\\n\\n  const infoElem = document.querySelector('#info');\\n\\n  function render(time) {\\n    time *= 0.001;\\n\\n    if (resizeRendererToDisplaySize(renderer)) {\\n      const canvas = renderer.domElement;\\n      cameras.forEach((cameraInfo) => {\\n        const camera = cameraInfo.cam;\\n        camera.aspect = canvas.clientWidth / canvas.clientHeight;\\n        camera.updateProjectionMatrix();\\n      });\\n    }\\n\\n    // move target\\n    targetOrbit.rotation.y = time * .27;\\n    targetBob.position.y = Math.sin(time * 2) * 4;\\n    targetMesh.rotation.x = time * 7;\\n    targetMesh.rotation.y = time * 13;\\n    targetMaterial.emissive.setHSL(time * 10 % 1, 1, .25);\\n    targetMaterial.color.setHSL(time * 10 % 1, 1, .25);\\n\\n    // move tank\\n    const tankTime = time * .05;\\n    curve.getPointAt(tankTime % 1, tankPosition);\\n    curve.getPointAt((tankTime + 0.01) % 1, tankTarget);\\n    tank.position.set(tankPosition.x, 0, tankPosition.y);\\n    tank.lookAt(tankTarget.x, 0, tankTarget.y);\\n\\n    // face turret at target\\n    targetMesh.getWorldPosition(targetPosition);\\n    turretPivot.lookAt(targetPosition);\\n\\n    // make the turretCamera look at target\\n    turretCamera.lookAt(targetPosition);\\n\\n    // make the targetCameraPivot look at the at the tank\\n    tank.getWorldPosition(targetPosition);\\n    targetCameraPivot.lookAt(targetPosition);\\n\\n    wheelMeshes.forEach((obj) => {\\n      obj.rotation.x = time * 3;\\n    });\\n\\n    const camera = cameras[time * .25 % cameras.length | 0];\\n    infoElem.textContent = camera.desc;\\n\\n    renderer.render(scene, camera.cam);\\n\\n    requestAnimationFrame(render);\\n  }\\n\\n  requestAnimationFrame(render);\\n}\\n\\nmain();\\n\",\n    }\n  ]\n} : getNewData());\n","import React from 'react';\n\nconst defaultGutterSize = 10;\nconst defaultDirection = 'horizontal';\nconst defaultMinSize = 10;\n\nfunction distribute(items, buckets) {\n  const base = items / buckets | 0;\n  const extra = items % buckets;\n  const array = new Array(buckets).fill(base);\n  if (extra === 0) {\n    return array;\n  } else if (extra <= buckets / 2 | 0) {\n    const leap = buckets / extra | 0;\n    const halfLeap = leap / 2 | 0; \n    return array.map((v, i) => v + ((i % leap === halfLeap) ? 1 : 0));\n  } else {\n    const leap = buckets / (buckets - extra) | 0;\n    const halfLeap = leap / 2 | 0;\n    return array.map((v, i) => v + (1 - (i % leap === halfLeap ? 1 : 0)));\n  }\n}\n\nfunction normalizeSizes(sizes) {\n  const totalSize = sizes.reduce((sum, v) => sum + v, 0);\n  return sizes.map(v => v / totalSize);\n}\n\nconst getMouseOrTouchPosition = (e, clientAxis) => e.touches ? e.touches[0][clientAxis] : e[clientAxis];\n\nfunction addSpaceForChildren(sizes, numChildren, gutterSize, minSizePX, totalSizePX) {\n  // const numGutters = numChildren - 1;\n  // const totalGutterSpacePX = numGutters * gutterSize;\n  // const availableSpacePX = totalSizePX - totalGutterSpacePX;\n  //\n  // this is not so trivial\n  // let's say we have 3 items and we add 2 more.\n  // each of those 2 has a minSize. So need to take 2 * minSize\n  // from the 3 items or (2 * minSize / 3). But any of those items\n  // themselves might already be at or near minSize\n  //\n  // This seems like it's then iterative.\n  //\n  // go through and try to remove (minSize * numNewElements / numOldElements)\n  // from each old element but only remove such that that element\n  // is still >= minSize. When done there's possibly some amount\n  // you haven't distributed yet so repeat the process over and over\n  // until it's all distributed.\n  //\n  // given that we don't know which elements are new, for now\n  // lets just reset all the sizes\n  return new Array(numChildren).fill(1 / numChildren);\n}\n\nconst getDirectionProps = direction => (direction === 'horizontal')\n  ? {\n      dimension: 'width',\n      clientAxis: 'clientX',\n      position: 'left',\n      positionEnd: 'right',\n      clientSize: 'clientWidth',\n      style: {\n        width: '100%',\n        display: 'flex',\n      },\n    }\n  : {\n      dimension: 'height',\n      clientAxis: 'clientY',\n      position: 'top',\n      positionEnd: 'bottom',\n      clientSize: 'clientHeight',\n      style: { /*height: '100%'*/ },\n    };\n\nfunction computeNewSizes({\n  startSizes,\n  currentSizes,\n  prevPaneNdx,\n  gutterReservedSizesPX,\n  minSizePX,\n  deltaPX,\n  outerSizePX,\n}) {\n  const nextPaneNdx = prevPaneNdx + 1;\n  const prevPaneStartSizePX = Math.ceil(startSizes[prevPaneNdx] * outerSizePX) - gutterReservedSizesPX[prevPaneNdx];\n  const nextPaneStartSizePX = Math.ceil(startSizes[nextPaneNdx] * outerSizePX) - gutterReservedSizesPX[nextPaneNdx];\n  const spaceUsedByBothElementsPX = prevPaneStartSizePX + nextPaneStartSizePX;\n  const prevPaneNewSizePX = Math.min(\n    Math.max(minSizePX, prevPaneStartSizePX + deltaPX),\n    spaceUsedByBothElementsPX - minSizePX);\n  const nextPaneNewSizePX = spaceUsedByBothElementsPX - prevPaneNewSizePX;\n  const newSizes = [\n    ...currentSizes.slice(0, prevPaneNdx),\n    (prevPaneNewSizePX + gutterReservedSizesPX[prevPaneNdx]) / outerSizePX,\n    (nextPaneNewSizePX + gutterReservedSizesPX[nextPaneNdx]) / outerSizePX,\n    ...currentSizes.slice(prevPaneNdx + 2, currentSizes.length),\n  ];\n\n  /*\n  const availableSpacePX = outerSizePX - totalGutterSizePX;\n  const info = `\n  gutterReservedSizes: ${gutterReservedSizesPX}\n  availableSpacePX: ${availableSpacePX}\n  prevStartSizePX: ${prevPaneStartSizePX}\n  nextStartSizePX: ${nextPaneStartSizePX}\n  spaceUsedByBothElementsPX: ${spaceUsedByBothElementsPX}\n  prevNewSizePX: ${prevPaneNewSizePX}\n  nextNewSizePX: ${nextPaneNewSizePX}\n  sizes: ${currentSizes}\n  newSizes: ${newSizes}\n  `;\n  const infoElem = document.querySelector('#info');\n  infoElem.textContent = info;\n  */\n\n  return newSizes;\n}\n\nconst stopMobileBrowserFromScrolling = e => e.preventDefault();\n\nclass Gutter extends React.Component {\n  constructor(props) {\n    super(props);\n    this.elementRef = React.createRef();\n  }\n  handleMouseDownAndTouchStart = (e) => {\n    const {onMouseDownAndTouchStart} = this.props;\n    onMouseDownAndTouchStart(e);\n  }\n  componentDidMount() {\n    // There's no way in React 16 to add passive false event listeners\n    // which means there is no way to drag a splitter and prevent mobile browsers\n    // from scrolling\n    const elem = this.elementRef.current;\n    elem.addEventListener('mousedown', this.handleMouseDownAndTouchStart, {passive: false});\n    elem.addEventListener('touchstart', this.handleMouseDownAndTouchStart, {passive: false});\n  }\n  componentWillUnmount() {\n    const elem = this.elementRef.current;\n    elem.removeEventListener('mousedown', this.handleMouseDownAndTouchStart);\n    elem.removeEventListener('touchstart', this.handleMouseDownAndTouchStart);\n  }\n  render() {\n    const {direction, dragging, current, style} = this.props;\n    return (\n      <div\n        ref={this.elementRef}\n        className={`gutter gutter-${direction} ${dragging && current ? 'gutter-dragging' : ''}`}\n        style={style}\n      />\n    );\n  }\n}\n\nexport default class GManSplit extends React.Component {\n  constructor(props) {\n    super(props);\n    const numPanes = React.Children.count(props.children);\n    const size = 1 / numPanes;\n    this.state = {\n      sizes: props.sizes || new Array(numPanes).fill(size),\n    };\n    this.elementRef = React.createRef();\n  }\n  _setSizes = (sizes) => {\n    this.setState({sizes});\n  }\n  handleMouseUpAndTouchEnd = () => {\n    document.removeEventListener(\"mousemove\", this.handleMouseAndTouchMove);\n    document.removeEventListener(\"mouseup\", this.handleMouseUpAndTouchEnd);\n    document.removeEventListener(\"touchmove\", this.handleMouseAndTouchMove);\n    document.removeEventListener(\"touchend\", this.handleMouseUpAndTouchEnd);\n    this.setState({dragging: false});\n  };\n  handleMouseAndTouchMove = (e) => {\n    stopMobileBrowserFromScrolling(e);\n    const {\n      gutterSize = defaultGutterSize,\n      direction = defaultDirection,\n      minSize = defaultMinSize,\n      computeNewSizesFn = computeNewSizes,\n      onSetSizes,\n      sizes: propSizes,\n    } = this.props;\n    const {\n      prevPaneNdx,\n      mouseStart,\n      startSizes,\n      sizes: stateSizes,\n    } = this.state;\n    const setSizes = onSetSizes || this._setSizes;\n    const sizes = onSetSizes ? propSizes : stateSizes;\n\n    const {\n      clientAxis,\n      clientSize,\n    } = getDirectionProps(direction);\n\n    const deltaPX = getMouseOrTouchPosition(e, clientAxis) - mouseStart;\n    const outerSizePX = this.elementRef.current[clientSize];\n\n    const numPanes = sizes.length;\n    const numGutters = numPanes - 1;\n    const totalGutterSizePX = numGutters * gutterSize;\n\n    const gutterReservedSizesPX = distribute(totalGutterSizePX, numPanes);\n\n    const newSizes = computeNewSizesFn({\n      startSizes,\n      currentSizes: sizes,\n      prevPaneNdx,\n      gutterReservedSizesPX,\n      minSizePX: minSize,\n      deltaPX,\n      outerSizePX,\n    });\n\n    setSizes(newSizes);\n  };\n  handleMouseDownAndTouchStart = (e) => {\n    stopMobileBrowserFromScrolling(e);\n    const {\n      direction = defaultDirection,\n    } = this.props;\n    const {\n      clientAxis,\n    } = getDirectionProps(direction);\n\n    document.addEventListener(\"mousemove\", this.handleMouseAndTouchMove, {passive: false});\n    document.addEventListener(\"mouseup\", this.handleMouseUpAndTouchEnd);\n    document.addEventListener(\"touchmove\", this.handleMouseAndTouchMove, {passive: false});\n    document.addEventListener(\"touchend\", this.handleMouseUpAndTouchEnd);\n    const gutterNdx = Array.prototype.indexOf.call(e.target.parentElement.children, e.target);\n    const prevPaneNdx = (gutterNdx - 1) / 2;    \n    this.setState({\n      startSizes: this.state.sizes.slice(),\n      mouseStart: getMouseOrTouchPosition(e, clientAxis),\n      prevPaneNdx,\n      dragging: true,\n    });\n  };\n  recomputeSizes = () => {\n    // here it's not entirely clear what to do. Maybe we need options\n    // If they user removes a child which sizes do they want? I guess\n    // since they removed a child they passed in new sizes so we should\n    // pass sizes back? Ugh!\n    //\n    // Example:\n    //\n    //   * start: 3 panes, sizes a(33%), b(33%), c(33%)\n    //   * user adjusts to sizes a(10%), b(80%), c(10%)\n    //   * user deletes pane (a)\n    //\n    // If we just continue to use the current sizes the we'd get\n    //\n    //   b(10%), c(90%)\n    //\n    // We have no way of knowing that b should get the 90%\n    //\n    // One way would be to pass responsibility for saving the sizes\n    // up to the parent. Basically if you want to add/remove children\n    // then you need need to keep their state. In that case\n    // passing an `onSetSize` prop. It's a function that will be called\n    // with an array of sizes.  Update your sizes and pass them in as\n    // props\n    //\n    // But, just so we don't completely fail if the user has not opted\n    // into managing the size state then at least do something.\n    const {sizes} = this.state;\n    const {minSize, direction, gutterSize} = this.props;\n    const {\n      clientSize,\n    } = getDirectionProps(direction);\n\n    const numChildren = React.Children.count(this.props.children);\n    const newSizes = numChildren < sizes.length\n      // a child was removed, normalizes the sizes\n      ? normalizeSizes(sizes.slice(0, numChildren))\n      // children were added, make space for them\n      : addSpaceForChildren(sizes, numChildren, gutterSize, minSize, this.elementRef.current.parentElement[clientSize]);\n    this._setSizes(newSizes);\n  }\n  componentDidUpdate() {\n    const {children, onSetSizes} = this.props;\n    const {sizes} = this.state;\n    // we need to check if new elements were added.\n    if (onSetSizes) {\n      return; // not our responsibility\n    }\n\n    const numChildren = React.Children.count(children);\n    if (sizes.length !== numChildren) {\n      setTimeout(this.recomputeSizes);\n    }\n  }\n  render() {\n    const {\n      children, \n      direction = defaultDirection, \n      gutterSize = defaultGutterSize, \n      sizes: propSizes,\n      onSetSizes,\n      minSize,\n      ...rest\n    } = this.props;\n    const {\n      dragging,\n      prevPaneNdx,\n      sizes: stateSizes,\n    } = this.state;\n    const {\n      dimension,\n      style,\n    } = getDirectionProps(direction);\n\n    const sizes = onSetSizes ? propSizes : stateSizes;\n    const numPanes = React.Children.count(children);\n    const numGutters = numPanes - 1;\n    const totalGutterSpace = gutterSize * numGutters;\n    const gutterStyle = {[dimension]: `${gutterSize}px`};\n    const gutterReservedSizes = distribute(totalGutterSpace, numPanes);\n\n    let childNdx = 0;\n    let first = true;\n    const newChildren = [];\n    React.Children.forEach(children, (child, props) => {\n      if (!React.isValidElement(child)) {\n        return null;\n      }\n      if (!first) {\n        newChildren.push(\n          <Gutter\n            key={`gutter${newChildren.length}`}\n            direction={direction}\n            dragging={dragging}\n            current={dragging && childNdx === prevPaneNdx + 1}\n            style={gutterStyle}\n            onMouseDownAndTouchStart={this.handleMouseDownAndTouchStart}\n          />\n        );\n      }\n\n      const style = {\n        [dimension]: `calc(${sizes[childNdx] * 100}% - ${gutterReservedSizes[childNdx]}px)`,\n      };\n\n      newChildren.push(\n        <div key={`pane${newChildren.length}`} style={style}>\n          {React.cloneElement(child)}\n        </div>\n      );\n      first = false;\n      ++childNdx;\n    });\n    return (\n      <div\n        className=\"split\"\n        ref={this.elementRef}\n        style={{\n          ...this.props.style,\n          ...style,\n          ...(dragging && {userSelect: 'none'})\n        }}\n        {...rest}\n      >\n        {newChildren}\n        {dragging ? \n          <style>\n            iframe {'{'}\n              pointer-events: none !important;\n            {'}'}\n          </style> : []\n        }\n      </div>\n    );\n  }\n}\n\n/*\ndirection\nsizes\nonSetSizes\ncompute\n\n*/\n\n","import React from 'react';\nimport {Controlled as CodeMirror} from 'react-codemirror2';\nimport 'codemirror/lib/codemirror.css';\nimport 'codemirror/theme/material.css';\nimport 'codemirror/theme/eclipse.css';\nimport 'codemirror/mode/css/css.js';\nimport 'codemirror/mode/javascript/javascript.js';\nimport 'codemirror/mode/htmlmixed/htmlmixed.js';\nimport 'codemirror/addon/scroll/simplescrollbars.js';\nimport 'codemirror/addon/scroll/simplescrollbars.css';\n\nconst darkMatcher = window.matchMedia\n    ? window.matchMedia('(prefers-color-scheme: dark)')\n    : {};\n// darkMatcher.addListener(render);\n\nconst noop = () => {};\n\nexport default class Code extends React.Component {\n  constructor(props) {\n    super(props);\n    const {value, hackKey} = props;\n    this.state = {value, hackKey}\n  }\n  static getDerivedStateFromProps(props, state) {\n    const needNewData = state.hackKey !== props.hackKey;\n    return (needNewData)\n       ? {hackKey: props.hackKey, value: props.value}\n       : null;\n  }\n  componentDidMount() {\n    const {registerAPI} = this.props;\n    if (registerAPI) {\n      registerAPI({\n        goToLine: (lineNo, colNo) => {\n          this.editor.focus();\n          this.editor.doc.setCursor(lineNo - 1, colNo - 1);\n        },\n      });\n    }\n  }\n  registerEditor = (editor) => {\n    this.editor = editor;\n  }\n  render() {\n    const {options = {}, onValueChange = noop} = this.props;\n    const {value} =  this.state;\n    const isDarkMode = darkMatcher.matches;\n    return (\n      <CodeMirror\n        value={value}\n        options={{\n          mode: 'javascript',\n          scrollbarStyle: 'overlay',\n          theme: isDarkMode ? 'material' : 'eclipse',\n          ...(options.editor && options.editor),\n          lineNumbers: true,\n        }}\n        onBeforeChange={(editor, data, value) => {\n          this.setState({value});\n        }}\n        onChange={(editor, data, value) => {\n          onValueChange(value);\n        }}\n        editorDidMount={this.registerEditor}\n      />\n    );\n  }\n};\n","const camelCaseRE = /([a-z])([A-Z])/g;\nconst toDash = (_, left, right) => `${left}-${right}`;\nconst camelCaseToDash = s => s.replace(camelCaseRE, toDash).toLowerCase();\n\nexport function classNames(...args) {\n  const names = [];\n  for (const arg of args) {\n    if (typeof arg === 'string') {\n      names.push(arg);\n    } else {\n      for (const [key, value] of Object.entries(arg)) {\n        if (value) {\n          names.push(camelCaseToDash(key));\n        }\n      }\n    }\n  }\n  return names.join(' ');\n}","import React from 'react';\n//import {Resizable} from 're-resizable';\nimport Code from './Code.js';\nimport {classNames} from './css-utils.js';\n\nexport default function CodeArea(props) {\n  const {\n    value,\n    hackKey,\n    heading,\n    extra = [],\n    options = {},\n    onValueChange,\n    registerAPI,\n  } = props;\n  return (\n    <div className=\"code-area\" style={props.style}>\n        <div className=\"expander\">\n          {heading}\n        </div>\n        <div className={classNames(\"hidee\")}>\n            <Code\n              hackKey={hackKey}\n              value={value}\n              options={options}\n              onValueChange={onValueChange}\n              registerAPI={registerAPI}\n            />\n          {extra}\n        </div>\n    </div>\n  );\n};\n","import mime from 'mime-types';\nimport React from 'react';\n// import EditLine from './EditLine.js';\nimport CodeArea from './CodeArea.js';\n\nexport default class File extends React.Component {\n  componentDidMount() {\n    const {register} = this.props;\n    register(this, {\n      goToLine: (data) => {\n        const {title} =  this.props;\n        if (data.section === title) {\n          this.codeAPI.goToLine(data.lineNo, data.colNo);\n        }\n      },\n    });\n  }\n  componentWillUnmount() {\n    const {unregister} = this.props;\n    unregister(this);\n  }\n  handleRegisterAPI = (api) => {\n    this.codeAPI = api;\n  }\n  render() {\n    const props = this.props;\n    const {title, hackKey} = props;\n    const heading = (\n      <div style={{width: '100%'}}>{title}</div>\n    );\n    const mimeType = mime.lookup(title) || (title.toLowerCase() === 'javascript' ? 'application/javascript' : 'application/octet-stream');\n    const options = {\n      ...props.options,\n      editor: {\n        ...(props.options?.editor && props.options.editor),\n        mode: mimeType,\n      },\n    };\n    return (\n      <CodeArea\n        key={hackKey}\n        {...props}\n        options={options}\n        heading={heading}\n        registerAPI={this.handleRegisterAPI}\n      />\n    );\n  }\n}\n\n/*\nexport default function TestArea(props) {\n  const {desc, title, onTitleChange, hackKey} = props;\n  const heading = (\n    <div>{title}</div>\n    <EditLine\n      placeholder={desc}\n      value={title}\n      onChange={onTitleChange}\n    />\n  );\n\n  return (\n    <CodeArea key={hackKey} {...props} heading={heading} />\n  );\n}\n*/\n","import React from 'react';\n\nimport * as model from './model.js';\nimport Split from './Split.js';\nimport File from './File.js';\n\nconst makeId = _ => `${Date.now()}+${Math.random()}`;\n\nexport default class Files extends React.Component {\n  constructor(props) {\n    super(props);\n    this.files = new Map();\n    this.fileToKeyMap = new Map();\n  }\n  handleRegister = (file, api) => {\n    this.files.set(file, api);\n  }\n  handleUnregister = (file) => {\n    this.files.delete(file);\n  }\n  getFileKey(test) {\n    let key = this.fileToKeyMap.get(test);\n    if (!key) {\n      key = makeId();\n      this.fileToKeyMap.set(test, key);\n    }\n    return key;\n  }\n  componentDidMount() {\n    const {registerAPI} = this.props;\n    registerAPI({\n      goToLine: (data) => {\n        this.files.forEach(api => {\n          api.goToLine(data);\n        });\n      },\n    });\n  }\n  render() {\n    const {hackKey, data, extra} = this.props;\n    return (\n      <div className=\"codes\">\n        <Split\n          direction=\"vertical\"\n          minSize={0}\n        >\n        {\n          data.files.map((file, ndx) => {\n            return (\n              <File\n                key={`ca${this.getFileKey(file)}`}\n                hackKey={hackKey}\n                desc=\"filename\"\n                title={file.name}\n                value={file.content}\n                onTitleChange={name => model.setFileName(ndx, name)}\n                onValueChange={value => model.setFileContent(ndx, value)}\n                register={this.handleRegister}\n                unregister={this.handleUnregister}\n                extra={extra}\n              />\n            );\n          })\n        }\n        </Split>\n      </div>\n    );\n  }\n}\n\n//         {/*<button onClick={() => model.addFile()}>+</button>*/}\n","export function createURL(base, params) {\n  const url = new URL(base);\n  const searchParams = new URLSearchParams(url.search);\n  for (const [key, value] of Object.entries(params)) {\n    if (value === undefined) {\n      searchParams.delete(key);\n    } else {\n      searchParams.set(key, value);\n    }\n  }\n  url.search = searchParams.toString();\n  return url.href;\n}\n\nexport function updateURL(params) {\n  const url = createURL(window.location.href, params);\n  window.history.replaceState({}, '', url.href);\n}\n\n","const handlers = {};\n\nexport function on(type, fn) {\n  let fns = handlers[type];\n  if (!fns) {\n    fns = [];\n    handlers[type] = fns;\n  }\n  remove(type, fn);\n  fns.push(fn);\n}\n\nexport function remove(type, fn) {\n  const fns = handlers[type];\n  if (fns) {\n    const ndx = fns.indexOf(fn);\n    if (ndx >= 0) {\n      fns.splice(ndx, 1);\n    }\n  }\n}\n\nwindow.addEventListener('message', (e) => {\n  const {type, data} = e.data;\n  const fns = handlers[type];\n  if (fns) {\n    for (const fn of fns) {\n      fn(data);\n    }\n  }\n});\n\n","import React from 'react';\nimport {createURL} from './url.js';\nimport * as winMsgMgr from './window-message-manager.js';\n\n// Disqus is served from a separate domain in an iframe. In other words\n//\n// +--[jsgist.org]-----------------------------+\n// |                                           |\n// | +--[iframe src=jsgist.devcomments.org]--+ |\n// | |                                       | |\n// | | +--[iframe src=disqus.com]---+        | |\n// | | |                            |        | |\n// | | +----------------------------+        | |\n// | |                                       | |\n// | +---------------------------------------+ |\n// |                                           |\n// +-------------------------------------------+\n//\n// This is because disqus works by embedded script\n// so we can't let it be on our page directly\n// otherwise it could read our secrets\n//\nexport default class Disqus extends React.Component {\n  constructor() {\n    super();\n    this.iframeRef = React.createRef();\n  }\n  // Disqus's script creates an iframe and the content in the iframe\n  // communicates back to the main page to tell it the size of the iframe\n  // so the main page can adjust the iframe size. We do that same thing\n  // so our top page can just the size of the middle iframe in the\n  // diagram above.\n  handleResize = (data) => {\n    this.iframeRef.current.style.height = `${data.height}px`;\n  }\n  componentDidMount() {\n    winMsgMgr.on('resize', this.handleResize);\n  }\n  componentWillUnmount() {\n    winMsgMgr.remove('resize', this.handleResize);\n  }\n  shouldComponentUpdate(nextProps) {\n    return nextProps.disqusId !== this.disqusId;\n  }\n  render() {\n    const {disqusId, title} = this.props;\n    const url = createURL('https://jsgist.devcomments.org/comments.html', {disqusId, title});\n    return (\n      <div>\n        { disqusId ?\n          <iframe\n            ref={this.iframeRef}\n            title=\"comments\"\n            src={url}\n          /> : []\n        }\n      </div>\n    );\n  }\n}","\nimport React from 'react';\nimport Disqus from './Disqus.js';\n\nexport default function Footer(props) {\n  return (\n    <div className=\"comments\">\n      <hr/>\n      {/*\n      <div className=\"links\">\n         <a target=\"_blank\" href=\"https://github.com/greggman/jsgist/issues/new?assignees=&labels=suggested+topic&template=suggest-topic.md&title=%5BSUGGESTION%5D\">Suggestion</a>?<span> </span>\n         <a target=\"_blank\" href=\"https://github.com/greggman/jsgist/issues/new?assignees=&labels=&template=request.md&title=\">Request</a>?<span> </span>\n         <a target=\"_blank\" href=\"https://github.com/greggman/jsgist/issues/new?assignees=&labels=bug+%2F+issue&template=bug-issue-report.md&title=\">Issue</a>?<span> </span>\n         <a target=\"_blank\" href=\"https://github.com/greggman/jsgist/issues/new?assignees=&labels=bug+%2F+issue&template=bug-issue-report.md&title=\">Bug</a>?\n      </div>\n      */}\n      {\n        props.disqusId ? (\n          <React.Fragment>\n            <div className=\"comment-notes\">\n               Use <b>&lt;pre&gt;&lt;code&gt;</b>code goes here<b>&lt;/code&gt;&lt;/pre&gt;</b> for code blocks\n            </div>\n            <Disqus disqusId={props.disqusId} title={props.title} />\n          </React.Fragment>\n        ) : []\n      }\n    </div>\n  );\n}","import { Octokit } from '@octokit/rest';\n\nconst userAgent = 'jsGist v0.0.1';\nconst emptyValue = '/*bug-in-github-api-content-can-not-be-empty*/';\n\nexport function getGistContent(gist) {\n  const data = JSON.parse(gist.files['jsGist.json'].content);\n  data.files = Object.entries(gist.files)\n    .filter(([name]) => name !== 'jsGist.json')\n    .map(([name, file]) => {\n      return {\n        name,\n        content: file.content.startsWith(emptyValue)\n            ? file.content.substr(emptyValue.length)\n            : file.content,\n      }\n    }).concat(data.files || []);\n  return data;\n} \n\nexport async function getAnonGist(gist_id) {\n  const req = await fetch(`https://api.github.com/gists/${gist_id}`);\n  const gist = await req.json();\n  return {\n    data: getGistContent(gist),\n    rawData: gist,\n  };\n}\n\nexport function getUserData(data) {\n  return (data && data.owner)\n      ? {\n          name: data.owner.login,\n          avatarURL: data.owner.avatar_url,\n      }\n      : undefined;\n}\n\nfunction createGistData(data, gist_id) {\n  let files = data.files.reduce((files, file) => {\n    files[file.name] = {\n      content: file.content.trim() ? file.content : `${emptyValue}${file.content}`,\n    };\n    return files;\n  }, {});\n  const saveData = {\n    ...data,\n  };\n  /*\n  // we can't add a readme because we don't know the gist_id. I guess we would double\n  // save? create then update?\n\n  const lowerCaseFiles = Object.keys(files).map(n => n.toLowerCase());\n  const hadReadme = \n      lowerCaseFiles.includes('readme.md') ||\n      lowerCaseFiles.includes('readme.txt') ||\n      lowerCaseFiles.includes('readme');\n  if (!hadReadme) {\n    files['README.md'] = `# ${data.name}\\n\\n[jsGist Link](${window.location.origin}?src=${})`\n  }\n  */\n  const jsGistData = {}\n  files['jsGist.json'] = jsGistData;\n  const noDuplicateNames = Object.keys(files).length === data.files.length + 1;\n  if (noDuplicateNames) {\n    delete saveData.files;\n  } else {\n    // save the files in the json\n    files = {\n      'jsGist.json': jsGistData,\n    };\n  }\n  jsGistData.content = JSON.stringify(saveData);\n  if (gist_id) {\n    // if we have a gist_id this is an update\n    // updates need filenames (which allows renaming)\n    for (const [filename, file] of Object.entries(files)) {\n      file.filename = filename;\n    }\n  }\n  return {\n    files,\n    description: data.name,\n    ...(!gist_id && {public: !data.settings.private}),\n    ...(gist_id && {gist_id}),\n  };\n}\n\nexport default class GitHub extends EventTarget {\n  constructor() {\n    super();\n    this.pat = '';\n    this.user = {};\n    this.unAuthorizedOctokit = new Octokit({\n      userAgent,\n    });\n  }\n  get octokit() {\n    return this.authorizedOctokit || this.unAuthorizedOctokit;\n  }\n  _updateUserData(data) {\n    const userData = getUserData(data);\n    if (userData) {\n      Object.assign(this.user, userData);\n      const event = new Event('userdata');\n      event.data = {...this.user};\n      this.dispatchEvent(event);\n    }\n  }\n  setPat(pat) {\n    if (pat !== this.pat) {\n      this.pat = pat;\n      this.authorizedOctokit = new Octokit({\n        auth: pat,\n        userAgent,\n      });\n    }\n  }\n  async getUserGists() {\n    const gists = await this.authorizedOctokit.paginate(this.authorizedOctokit.gists.list);\n    return gists.filter(gist => !!gist.files['jsGist.json']);\n    // return await this.authorizedOctokit.gists.list();\n  }\n\n  async getAnonGist(gist_id) {\n    const {data, rawData} = await getAnonGist(gist_id);\n    this._updateUserData(rawData);\n    return {data, rawData};\n  }\n\n  async getUserGist(gist_id) {\n    const gist = await this.octokit.gists.get({gist_id});\n    this._updateUserData(gist.data);\n    return getGistContent(gist.data);\n  }\n\n  async createGist(data) {\n    const gistData = createGistData(data);\n    const gist = await this.authorizedOctokit.gists.create(gistData);\n    this._updateUserData(gist.data);\n    return {\n      id: gist.data.id,\n      name: gist.data.description,\n      date: gist.data.updated_at,\n    };\n  }\n  async updateGist(gist_id, data) {\n    const gistData = createGistData(data, gist_id);\n    const gist = await this.authorizedOctokit.gists.update(gistData);\n    return {\n      id: gist.data.id,\n      name: gist.data.description,\n      date: gist.data.updated_at,\n    };\n  }\n\n}\n\n","import React from 'react';\n\nexport default class Dialog extends React.Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n  handleKeyDown = (e) => {\n    if (e.keyCode === 27) {\n      this.props.onClose();\n    }\n  }\n  render() {\n    const {title, children, onClose} = this.props;\n    return (\n      <div onClick={onClose} className=\"dialog\">\n        <div\n          tabIndex=\"-1\"\n          onClick={(e) =>{e.stopPropagation()}}\n        >\n          <div className=\"dialog-heading\">\n            <div className=\"dialog-title\">{title}</div>\n            <div className=\"dialog-close\">\n              <button onClick={onClose}>X</button>\n            </div>\n          </div>\n          <div className=\"dialog-content\">\n            {children}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport Dialog from './Dialog.js';\n\nexport default function Help(props) {\n  const {onClose} = props;\n  return (\n    <Dialog title=\"jsGist\" onClose={onClose}>\n      <div className=\"markdown\">\n      <p>Add your test cases, click <code>Run</code>.</p>\n      <h2>Contribute, Fix, Enhance!</h2>\n      <p>\n        <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/greggman/jsgist\">https://github.com/greggman/jsgist</a>\n      </p>\n      <p>Also see <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://jsbenchit.org\">jsbenchit.org</a></p>\n      <h2>Saving</h2>\n      <p>You can save your tests in multiple ways.</p>\n      <ol>\n        <li>To a github gist using a <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://docs.github.com/en/github/authenticating-to-github/creating-a-personal-access-token\">Personal Access Token</a>\n          <p>\n           Be sure to give the token <b>ONLY GIST</b> permissions. Paste it into the\n           save as UI click <code>Save to new gist</code>. Be sure to keep a copy of it\n           somewhere so you can use if you clear your browser's storage or switch\n           machines or browser. This site is a static site. The token is saved\n           in the browser only.\n          </p>\n        </li>\n        <li>Save it manually into github\n          <p>\n           Copy the JSON. Go to github. Create a new gist. Name the file\n           <code>jsGist.json</code> Paste the JSON in. Pick \"Create public gist\".\n          </p>\n          <p>\n           Note the id in the URL after you create the gist.\n          </p>\n          <p>\n           Create a url in the form <code>https://jsgist.org/?src=&lt;gist_id&gt;--</code>.\n          </p>\n          <p>\n           Example: <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://jsgist.org/?src=bad0a8491bd6614e729ff01cc14089c9\">https://jsgist.org/?src=bad0a8491bd6614e729ff01cc14089c9</a>\n          </p>\n        </li>\n        <li>Save it manually somewhere else.\n          <p>\n           If there's some other service that will provide a string via\n           http get then copy and save the JSON there then create a URL\n           in the form of <code>https://jsgist.org/?src=&lt;url&gt;</code>. Note: you\n           will have to escape the URL although if just paste it into your\n           browser it will likely do the conversion for you.\n          </p>\n        </li>\n        <li>Save it as a bookmark or link\n          <p>\n           In the SaveAs dialog there's a link that contains all the data\n           for your benchmark.\n          </p>\n        </li>\n      </ol>\n      </div>\n    </Dialog>\n  );\n}","import Ajv from 'ajv';\nimport * as model from './model';\n\nconst gistsKey = 'jsGist-gists';\n\nconst gistSchema = {\n  \"type\": \"object\",\n  \"properties\": {\n    \"name\": { \"type\": \"string\" },\n    \"date\": { \"type\": \"string\" },\n  },\n  \"required\": [\"name\", \"date\"],\n};\n\nconst gistsSchema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"type\": \"object\",\n  \"additionalProperties\": gistSchema,\n};\nconst ajv = new Ajv() // options can be passed, e.g. {allErrors: true}\nconst gistsValidator = ajv.compile(gistsSchema);\nconst gistValidator = ajv.compile(gistSchema);\n\nfunction getStoredGists() {\n  try {\n    const gists = JSON.parse(localStorage.getItem(gistsKey));\n    if (!gistsValidator(gists)) {\n      localStorage.removeIem(gistsKey);\n      throw new Error();\n    }\n    return gists;\n  } catch(e) {\n    return {};\n  }\n}\n\nmodel.add('gists', getStoredGists());\n\n// does this need to be centralized?\nwindow.addEventListener('storage', (e) => {\n  if (e.key === 'gists') {\n    model.set('gists', getStoredGists());\n  }\n});\n\nexport function addGist(id, name, date) {\n  const gist = {name, date};\n  if (!gistValidator(gist)) {\n    throw new Error(`gist not valid:\\n${gistValidator.errors.map(e => `${e.message}: ${e.dataPath}`)}`)\n  }\n  const gists = {...model.get('gists')};\n  gists[id] = gist;\n  model.set('gists', gists);\n  saveGistsToLocalStorage(gists);\n}\n\nfunction saveGistsToLocalStorage(gists) {\n  // send to other windows\n  localStorage.setItem(gistsKey, JSON.stringify(gists));\n}\n\nexport function getGists() {\n  return model.get('gists');\n}\n\nexport function setGists(gists) {\n  if (!gistsValidator(gists)) {\n    throw new Error(`gists not valid:\\n${gistValidator.errors.map(e => `${e.message}: ${e.dataPath}`)}`)\n  }\n  model.set('gists', gists);\n  saveGistsToLocalStorage(gists);\n}\n\nexport function subscribe(fn) {\n  model.subscribe('gists', fn);\n}\n\nexport function unsubscribe(fn) {\n  model.unsubscribe('gists', fn);\n}\n","export const noop = () => {};\nexport const wait = ms => new Promise(resolve => setTimeout(resolve, ms));\n\nfunction find(files, endings) {\n  // calling toLowerCase a bunch is bad but there will never be more than a few files\n  for (const ending of endings) {\n    const file = files.find(file => file.name.toLowerCase().endsWith(ending.toLowerCase()));\n    if (file) {\n      return file;\n    }\n  }\n  return '';\n}\n\nexport function getOrFind(files, name, ...endings) {\n  return files.find(f => f.name.toLowerCase() === name.toLowerCase) || find(files, endings);\n}\n","import React from 'react';\nimport {classNames} from './css-utils.js';\nimport * as gists from './gists.js';\nimport {updateURL} from './url.js';\nimport {noop, wait} from './utils.js';\n\nexport default class LoadGist extends React.Component {\n  constructor () {\n    super();\n    this.state = {\n      loading: false,\n      pat: localStorage.getItem('pat') || '',\n      gists: gists.getGists(),\n    };\n  }\n  handlePATChange = (e) => {\n    const pat = e.target.value;\n    this.setState({pat});\n    localStorage.setItem('pat', pat);\n  }\n  handleSubmit = (e) => {\n    e.preventDefault();\n    this.loadGists();\n  }\n  handleNewGists = (gists) => {\n    this.setState({gists});\n  }\n  componentDidMount() {\n    document.body.addEventListener('submit', this.handleSubmit);\n    gists.subscribe(this.handleNewGists);\n  }\n  componentWillUnmount() {\n    document.body.removeEventListener('submit', this.handleSubmit);\n    gists.unsubscribe(this.handleNewGists);\n  }\n  loadGists = async(e) => {\n    this.setState({loading: true});\n    const {addError, github} = this.props;\n    const {pat} = this.state;\n    github.setPat(pat);\n    try {\n      const gistArray = await github.getUserGists();\n      const gistsById = gistArray.reduce((gists, gist) => {\n        gists[gist.id] = {\n          name: gist.description,\n          date: gist.updated_at,\n        };\n        return gists;\n      }, {});\n      gists.setGists(gistsById);\n      // apparently we need to update the URL in order for the browser\n      // to save the password.\n      updateURL({loggedIn: true});\n      await wait();\n      updateURL({loggedIn: undefined});\n    } catch (e) {\n      addError(`could not load gists: ${e}`);\n    }\n    this.setState({loading: false});\n  }\n  render() {\n    const {pat, gists, loading} = this.state;\n    const canLoad = !!pat && !loading;\n    const gistArray = Object.entries(gists).map(([id, {name, date}]) => {\n      return {id, name, date};\n    }).sort((b, a) => a.date < b.date ? -1 : ((a.date > b.date) ? 1 : 0));\n    return (\n      <div>\n        <form>\n          <div className=\"save-as-gist-pat\">\n            <div>Personal Access Token:&nbsp;</div>\n            <div>\n              <input type=\"text\" name=\"username\" value=\"unused\" style={{display: 'none'}} onChange={noop} />\n              <input\n                type=\"password\"\n                name=\"password\"\n                value={pat}\n                placeholder=\"personal access token\"\n                onChange={this.handlePATChange}\n              />\n            </div>\n          </div>\n          <p>\n            <button\n              type=\"submit\"\n              className={classNames({disabled: !canLoad})}\n            >{gistArray.length ? 'Reload' : 'Load'} Your Gists</button>\n          </p>\n        </form>\n        <p>\n          <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/settings/tokens\">Create a Personal Access Token</a> with only <b>gist</b> permissions.\n          Paste it above. Note: This is a static website. Your personal access token\n          is stored only locally in your browser and only accessible by this domain.\n        </p>\n        {\n          gistArray.length ?\n            <table className=\"gists\">\n              <tbody>\n              {\n                gistArray.map((gist, ndx) => {\n                  return (\n                    <tr key={`g${ndx}`}>\n                      <td><a href={`${window.location.origin}?src=${encodeURIComponent(gist.id)}`}>{gist.name}</a></td>\n                      <td>{gist.date.substring(0, 10)}</td>\n                    </tr>\n                  );\n                })\n              }\n              </tbody>\n            </table> : []\n        }\n      </div>\n    );\n  }\n}","import React, {useState} from 'react';\nimport Code from './Code.js';\nimport * as model from './model.js';\n\nexport default function LoadJSON(props) {\n  const [json, setJSON] = useState('');\n  function load() {\n    const {onLoad, addError} = props;\n    try {\n      const data = JSON.parse(json);\n      model.setData(data);\n      onLoad();\n    } catch (e) {\n      addError(`bad json: ${e}`);\n    }\n  }\n  return (\n    <div>\n      <div style={{height: '100px'}}>\n        <Code\n          value={json}\n          onValueChange={setJSON}\n\n        />\n      </div>\n      <p>\n        <button onClick={load}>Load JSON</button>\n      </p>\n    </div>\n  )\n}","import React, {useState} from 'react';\nimport EditLine from './EditLine';\nimport * as model from './model.js';\n\nexport default function LoadURL(props) {\n  const [url, setUrl] = useState('');\n  async function loadUrl() {\n    const {addError, onLoad} = props;\n    try {\n      const req = await fetch(url);\n      const data = await req.json();\n      model.setData(data);\n      onLoad()\n    } catch(e) {\n      addError(`could not load url: ${e}`);\n    }\n  } \n  return (\n    <div>\n      <EditLine value={url} onChange={setUrl} placeholder=\"url-to-json\" />\n      <p>\n        <button onClick={loadUrl}>Load URL</button>\n      </p>\n    </div>\n  )\n}","import React from 'react';\n\nexport default function Section(props) {\n  const {heading, children} = props;\n  return (\n    <div className=\"section\">\n      <div className=\"section-heading\">{heading}</div>\n      <div className=\"section-content\">\n        {children}\n      </div>\n    </div>\n  );\n}","import React from 'react';\nimport Dialog from './Dialog.js';\nimport LoadGist from './LoadGist.js';\nimport LoadJSON from './LoadJSON.js';\nimport LoadURL from './LoadURL.js';\nimport Section from './Section.js';\n\nexport default function Load(props) {\n  const {data, github, onLoad, onClose, addError} = props;\n  return (\n    <Dialog title=\"Load\" onClose={onClose}>\n      <Section heading=\"Load Gist\">\n        <LoadGist github={github} data={data} onLoad={onLoad} addError={addError} />\n      </Section>\n      <Section heading=\"Load URL\">\n        <LoadURL data={data} onLoad={onLoad} addError={addError} />\n      </Section>\n      <Section heading=\"Load JSON\">\n        <LoadJSON data={data} onLoad={onLoad} addError={addError} />\n      </Section>\n    </Dialog>\n  )\n}\n","import {decode, encode} from 'base64-arraybuffer';\nimport {inflate, deflate} from 'uzip-module';\n\nconst utf8Encoder = new TextEncoder();\nconst utf8Decoder = new TextDecoder();\nconst compressedPrefix = 'cb64,';\nconst uncompressedPrefix = 'b64,';\n\nexport const isCompressedBase64 = s => s.startsWith(compressedPrefix) || s.startsWith(uncompressedPrefix);\nexport function compressedBase64ToJSON(src) {\n  const isCompressed = src.startsWith(compressedPrefix);\n  const prefix = isCompressed ? compressedPrefix : uncompressedPrefix;\n  const base64 = src.substr(prefix.length)\n     .replace(/-/g, '+')\n     .replace(/_/g, '/');\n  const raw = new Uint8Array(decode(base64));\n  const bin = isCompressed \n     ? inflate(raw)\n     : raw;\n  const json = utf8Decoder.decode(bin);\n  return JSON.parse(json);\n}\n\nexport function jsonToCompressedBase64(data) {\n  const json = JSON.stringify(data);\n  const bin = utf8Encoder.encode(json);\n  const compressed = deflate(bin);\n  const useCompressed = compressed.length < bin.length;\n  const base64 = encode(useCompressed ? compressed : bin)\n      .replace(/\\+/g, '-')    // better for URLs because + and / have to be escaped\n      .replace(/\\//g, '_');\n  const prefix = useCompressed ? compressedPrefix : uncompressedPrefix;\n  return `${prefix}${base64}`;\n}\n","\nimport {isCompressedBase64, compressedBase64ToJSON} from './compression.js';\n\nconst idRE = /^[a-z0-9]+$/i;\nexport const isGistId = s => idRE.test(s);\n\nexport async function loadGistFromSrc(src, github) {\n  if (isGistId(src)) {\n    const {data, rawData} = await github.getAnonGist(src);\n    return {data, id: src, rawData};\n  } else if (isCompressedBase64(src)) {\n    return {data: compressedBase64ToJSON(src)};\n  } else {\n    const res = await fetch(src);\n    const data = await res.json();\n    return {data};\n  }\n}\n","import React from 'react';\nimport {classNames} from './css-utils';\n\nfunction isMsgSame(oldMsg, newMsg) {\n  if (!!oldMsg !== !!newMsg) {\n    return false;\n  }\n  const keys = Object.keys(oldMsg).filter(key => key !== 'count');\n  if (keys.length !== Object.keys(newMsg).length) {\n    return false;\n  }\n  for (const key of keys) {\n    if (oldMsg[key] !== newMsg[key]) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport class LogManager extends EventTarget {\n  constructor() {\n    super();\n    this._msgs = [];\n  }\n  _notify() {\n    this.dispatchEvent(new Event('change'));\n  }\n  clear = () => {\n    this._msgs = [];\n    this._notify();\n  }\n  addMsg = (data) => {\n    const lastData = this._msgs[this._msgs.length - 1];\n    if (isMsgSame(lastData, data)) {\n      lastData.count = (lastData.count || 0) + 1;\n    } else {\n      this._msgs.push(data);\n    }\n    this._notify();\n  }\n  getMsgs() {\n    return this._msgs\n  }\n}\n\nexport default class Log extends React.Component {\n  constructor(props) {\n    super(props);\n    const {logManager} = props;\n    this.logManager = logManager;\n    this.logMessagesRef = React.createRef();\n  }\n  handleChange = () => {\n    this.forceUpdate();\n  }\n  componentDidMount() {\n    this.logManager.addEventListener('change', this.handleChange);\n  }\n  componentWillUnmount() {\n    this.logManager.removeEventListener('change', this.handleChange);\n  }\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    if (snapshot !== null) {\n      // if we were at the bottom of the log then\n      // stay at the bottom of the log\n      if (snapshot < 1) {\n        const elem = this.logMessagesRef.current;\n        elem.scrollTop = elem.scrollHeight - elem.parentElement.clientHeight;\n      }\n    }\n  }\n  getSnapshotBeforeUpdate(prevProps, prevState) {\n    const elem = this.logMessagesRef.current;\n    return elem.scrollHeight - (elem.scrollTop + elem.parentElement.clientHeight);\n  }\n  render() {\n    const {onGoToLine} = this.props;\n    return (\n      <div className=\"logger\">\n        <div className=\"log-messages layout-scrollbar\" ref={this.logMessagesRef}>\n          { this.logManager.getMsgs().map((msg, ndx) => (\n            <div className={classNames('log-line',{[msg.type]: true})} key={`l${ndx}`}>\n              <div className={msg.count ? \"count\" : \"no-count\"}>{msg.count ? msg.count : ''}</div>\n              <div className=\"msg\">\n                {msg.msg}\n                <div\n                  className={classNames('file', {fileLink: msg.section})}\n                  onClick={() => onGoToLine(msg)}\n                >\n                  {msg.section || msg.url}:{msg.lineNo}\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n    );\n  }\n}","import React from 'react';\nimport {classNames} from './css-utils.js';\nimport * as gists from './gists.js';\nimport {updateURL} from './url.js';\nimport {noop, wait} from './utils.js';\n\nexport default class SaveAsGist extends React.Component {\n  constructor () {\n    super();\n    this.state = {\n      saving: false,\n      pat: localStorage.getItem('pat') || '',\n    };\n  }\n  handlePATChange = (e) => {\n    const pat = e.target.value;\n    this.setState({pat});\n    localStorage.setItem('pat', pat);\n  }\n  handleSubmit = (e) => {\n    e.preventDefault();\n    this.saveFn();\n  }\n  // this nonsense about markToSaveAsNewGist and markToUpdateNewGist\n  // is because in order to get the browser to save the token as a password\n  // we need to use a form. The reason to save it is to that if you \n  // switch machines you don't have to go look up the password, the browser\n  // will hopefully offer it.\n  markToSaveNewGist = () => {\n    this.saveFn = this.saveNew;\n  }\n  markToUpdateGist =  () => {\n    this.saveFn = this.saveOverExisting;\n  }\n  saveNew = async() => {\n    this.setState({saving: true});\n    const {data, github, addError, onSave, onClose} = this.props;\n    const {pat} = this.state;\n    let success = false;\n    github.setPat(pat);\n    try {\n      const {id, name, date} = await github.createGist(data);\n      gists.addGist(id, name, date);\n      onSave(id);\n      success = true;\n    } catch (e) {\n      addError(`could not create gist: ${e}`)\n    }\n    this.setState({saving: false});\n    if (success) {\n      // we apparently need to update the URL in order for the browser\n      // to save the password.\n      updateURL({loggedIn: true});\n      await wait();\n      updateURL({loggedIn: undefined})\n      onClose();\n    }\n  }\n  saveOverExisting = async() => {\n    this.setState({saving: true});\n    const {data, gistId, github, addError, onClose} = this.props;\n    const {pat} = this.state;\n    let success = false;\n    github.setPat(pat);\n    try {\n      const {id, name, date} = await github.updateGist(gistId, data);\n      gists.addGist(id, name, date);\n      success = true;\n    } catch (e) {\n      addError(`could not update gist: ${e}`)\n    }\n    this.setState({saving: false});\n    if (success) {\n      onClose();\n    }\n  }\n  render() {\n    const {pat, saving} = this.state;\n    const {gistId} = this.props;\n    const canSave = pat && gistId;\n    return (\n      <div>\n        <form onSubmit={this.handleSubmit}>\n          <div className=\"save-as-gist-pat\">\n            <div>Personal Access Token:&nbsp;</div>\n            <div>\n              <input type=\"text\" name=\"username\" value=\"unused\" style={{display: 'none'}} onChange={noop} />\n              <input\n                type=\"password\"\n                name=\"password\"\n                value={pat}\n                placeholder=\"personal access token\"\n                onChange={this.handlePATChange}\n              />\n            </div>\n          </div>\n          <p>\n            <button\n              type=\"submit\"\n              className={classNames({disabled: !pat || saving})}\n              data-type=\"new\"\n              onClick={this.markToSaveNewGist}\n            >Save to new Gist</button>\n            <button\n              className={classNames({disabled: !canSave || saving})}\n              type=\"submit\"\n              data-type=\"update\"\n              onClick={this.markToUpdateGist}\n            >Update Existing Gist</button>\n          </p>\n          <p>\n            <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/settings/tokens\">Create a Personal Access Token</a> with only <b>gist</b> permissions.\n            Paste it above. Note: This is a static website. Your personal access token\n            is stored only locally in your browser and only accessible by this domain.\n          </p>\n        </form>\n      </div>\n    );\n  }\n}","import React from 'react';\n\nexport default function SaveAsJSON(props) {\n  const {data} = props;\n  return (\n    <div>\n      <div>\n        Copy the text below, paste into the load ui or put somewhere on the net\n        and make your own URL with <code>{window.location.origin}?src=url-to-json</code>.\n      </div>\n      <pre style={{userSelect: 'all'}}>{JSON.stringify(data)}</pre>\n      <div><a href={`${window.location.origin}?src=${encodeURIComponent(`${window.location.origin}/example.json`)}`}>Example</a></div>\n    </div>\n  );\n}","import React from 'react';\n\nimport {jsonToCompressedBase64} from './compression.js';\n\nexport default function SaveAsURL(props) {\n  const {data} = props;\n  const src = jsonToCompressedBase64(data);\n  const url = `${window.location.origin}?src=${encodeURIComponent(src)}`;\n  return (\n    <div>\n      <div>Copy / bookmark the link below</div>\n      <a className=\"bookmark\" href={url} target=\"_blank\" rel=\"noopener noreferrer\">{url}</a>\n    </div>\n  );\n}\n","import React from 'react';\n\nexport default function Embed(props) {\n  const {gistId} = props;\n  return (\n    <div>\n      <div>\n        <p>\n        You can embed a jsGist by creating an iframe pointing to\n        {' '}<code>https://jsgist.org/embed.html?src=&lt;src&gt;</code>{' '} where\n        {' '}<code>&lt;src&gt;</code>{' '} is one of the forms above. Either\n        {' '}<code>?src=&lt;gist_id&gt;</code>{' '}or\n        {' '}<code>?src=&lt;base64url&gt;</code>{' '}or\n        {' '}<code>?src=&lt;url_to_json&gt;</code>{' '}.\n        You can also add {' '}<code>noheader=true</code>{' '} if you don't want the header\n        to appear. You can also just run them directly rather\n        than put in an iframe. <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://jsgist.org/embed.html?src=bad0a8491bd6614e729ff01cc14089c9\">[example]</a>{' '}\n        <a target=\"_blank\" rel=\"noopener noreferrer\" href={'https://jsgist.org/embed.html?src=bad0a8491bd6614e729ff01cc14089c9&noheader=true'}>[example no header]</a>\n        </p>\n        { gistId\n          ? (\n            <React.Fragment>\n              <p>\n              For example:\n              </p>\n              <pre><code>\n      &lt;iframe src=\"https://jsgist.org/embed.html?src={gistId}\" &gt;&lt;/iframe&gt;\n              </code></pre>\n            </React.Fragment>\n          )\n          : []\n        }\n        <p>\n        </p>\n      </div>\n    </div>\n  );\n}","import React from 'react';\nimport Dialog from './Dialog.js';\nimport SaveAsGist from './SaveAsGist.js';\nimport SaveAsJSON from './SaveAsJSON.js';\nimport SaveAsURL from './SaveAsURL.js';\nimport Section from './Section.js';\nimport Embed from './Embed.js';\n\nexport default function Save(props) {\n  const {data, github, gistId, onSave, onClose, addError} = props;\n  return (\n    <Dialog title=\"Save As\" onClose={onClose}>\n      <Section heading=\"Save As Gist\">\n        <SaveAsGist gistId={gistId} github={github} data={data} onClose={onClose} onSave={onSave} addError={addError} />\n      </Section>\n      <Section heading=\"Save As URL\">\n        <SaveAsURL data={data} />\n      </Section>\n      <Section heading=\"Save As JSON\">\n        <SaveAsJSON data={data} />\n      </Section>\n      <Section heading=\"Embedding\">\n        <Embed gistId={gistId} />\n      </Section>\n    </Dialog>\n  )\n}\n","import React from 'react';\nimport Dialog from './Dialog.js';\n\nimport verticalIcon from './icons/vertical-layout.svg';\nimport horizontalIcon from './icons/horizontal-layout.svg';\nimport twoByTwoIcon from './icons/two-by-two-layout.svg';\nimport {classNames} from './css-utils.js';\n\nfunction RadioOption(props) {\n  const {children, onChange, selected} = props;\n  return (\n    <div className={classNames({radioSelected: selected})} onClick={onChange}>\n      {children}\n    </div>\n  );\n}\n\nfunction Radio(props) {\n  const {selectedNdx, onChange, children} = props;\n\n  let childNdx = 0;\n  const newChildren = React.Children.map(children, (child) => {\n    if (!React.isValidElement(child)) {\n      return null;\n    }\n\n    const selected = childNdx === selectedNdx;\n\n    const id = childNdx;\n    childNdx += 1;\n    return React.cloneElement(child, {\n      //...child.props,\n      selected,\n      onChange: () => onChange(id),\n    });\n  });\n\n\n  return (\n    <div class=\"radio\">\n      {newChildren}\n    </div>\n  );\n}\n\nexport default function Save(props) {\n  const {onClose} = props;\n\n  return (\n    <Dialog title=\"Settings\" onClose={onClose}>\n      <Radio selectedNdx={0} onChange={(v) => {console.log(v)}}>\n        <RadioOption><img style={{height: '2em'}} src={verticalIcon} alt=\"vertical\"/></RadioOption>\n        <RadioOption><img style={{height: '2em'}} src={horizontalIcon} alt=\"horizontal\"/></RadioOption>\n        <RadioOption><img style={{height: '2em'}} src={twoByTwoIcon} alt=\"2x2\" /></RadioOption>\n      </Radio>\n    </Dialog>\n  )\n}\n","import React from 'react';\n\nimport {isDevelopment} from './flags.js';\nimport * as winMsgMgr from './window-message-manager.js';\nimport {createURL} from './url.js';\nexport default class Runner extends React.Component {\n  constructor(props) {\n    super(props);\n    this.runnerRef = React.createRef();\n  }\n  handleJSLog = (data) => {\n    this.props.logManager.addMsg(data);\n  }\n  handleJSError = (data) => {\n    this.props.logManager.addMsg({...data, type: 'error'});\n  }\n  handleGimmeDaCodez = () => {\n    this.iframe.contentWindow.postMessage({\n      type: 'run',\n      data: this.data,\n    }, \"*\");\n  }\n  componentDidMount() {\n    const {registerRunnerAPI} = this.props;\n    registerRunnerAPI({\n      run: (data, blank) => {\n        this.data = data;\n        this.removeIFrame();\n        const iframe = document.createElement('iframe');\n        this.iframe = iframe;\n        iframe.src = isDevelopment\n            ? createURL('http://localhost:8081/runner-03.html', {url: 'http://localhost:8080/jsgist-runner.js'})\n            : createURL('https://jsgistrunner.devcomments.org/runner-03.html', {url: 'https://jsgist.org/jsgist-runner.js'});\n        if (blank) {\n          iframe.style.background = 'none';\n        }\n        this.runnerRef.current.appendChild(iframe);\n      },\n    })\n    winMsgMgr.on('gimmeDaCodez', this.handleGimmeDaCodez);\n    winMsgMgr.on('jsLog', this.handleJSLog);\n    winMsgMgr.on('jsError', this.handleJSError);\n  }\n  removeIFrame() {\n    if (this.iframe) {\n      this.iframe.remove();\n      this.iframe = undefined;\n    }\n  }\n  componentWillUnmount() {\n    this.removeIFrame();\n    winMsgMgr.remove('gimmeDaCodez', this.handleGimmeDaCodez);\n    winMsgMgr.remove('jsLog', this.handleJSLog);\n    winMsgMgr.remove('jsError', this.handleJSError);\n  }\n  handleMessage = (e) => {\n    const {type, data} =  e.data;\n    const fn = this.handlers[type];\n    if (fn) {\n      fn(data);\n    }\n  }\n  render() {\n    return (\n      <div className=\"runner\" ref={this.runnerRef}></div>\n    )\n  }\n}\n\n","import React from 'react';\n\nimport EditLine from './EditLine.js';\nimport Files from './Files.js';\nimport Footer from './Footer.js';\nimport GitHub from './GitHub.js';\nimport Help from './Help.js';\nimport Load from './Load.js';\nimport {loadGistFromSrc} from './loader.js';\nimport Log, {LogManager} from './Log.js';\nimport * as model from './model.js';\nimport Save from './Save.js';\nimport Settings from './Settings.js';\nimport Split from './Split.js';\nimport Runner from './Runner.js';\n\nimport './App.css';\n\nconst backupKey = 'jsGist-backup';\nconst noJSX = () => [];\nconst darkMatcher = window.matchMedia('(prefers-color-scheme: dark)');\nconst makeDisqusId = () => {\n  const loc = window.location;\n  const query = Object.fromEntries(new URLSearchParams(loc.search).entries());\n  const src = query.src;\n  return src\n      ? `${encodeURIComponent(src)}`\n      : '';\n}\n\nclass App extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      path: window.location.pathname,\n      disqusId: makeDisqusId(),\n      dark: darkMatcher.matches,\n      loading: false,\n      dialog: noJSX,\n      gistId: '',\n      pat: localStorage.getItem('pat'),\n      messages: [],\n      userData: {},\n      updateVersion: 0,\n    };\n    this.github = new GitHub();\n    this.logManager = new LogManager();\n  }\n  componentDidMount() {\n    this.github.addEventListener('userdata', (e) => {\n      this.setState({\n        userData: e.data,\n      });\n    });\n    model.add('path', window.location.pathname);\n    model.subscribe('path', (newValue) => {\n      window.history.pushState({}, '', newValue);\n      this.setState({\n        path: newValue,\n        disqusId: makeDisqusId(),\n      });\n    });\n    // I still am not sure how I'm supposed to handle this.\n    // Putting my model in the state itself seems wrong\n    // and doesn't actually help since I'd have to \n    // generate an entirely new state object to change any\n    // nested property.\n    //\n    // Storing the data outside I see no way to tell\n    // components to re-render except to call forceUpdate\n    // which all the documentation says \"if you call this\n    // you're doing it wrong\".\n    //\n    // Redux is a joke. 50 lines code needed to set\n    // a single field. Repeat those 50 lines for every field.\n    // Things like redux-tools make it less to type those\n    // 50 lines but they still execute 50 to 500 lines of code\n    // just to set a single value.\n    model.subscribe(model.filesVersionKey, _ => {\n      this.forceUpdate();\n    });\n    // this is a hack because I can't figure out how to\n    // update the CodeMirror areas\n    model.subscribe('updateVersion', _ => {\n      this.setState({updateVersion: this.state.updateVersion + 1});\n    });\n\n    darkMatcher.addEventListener('change', () => {\n      this.setState({dark: darkMatcher.matches});\n    });\n\n    const query = Object.fromEntries(new URLSearchParams(window.location.search).entries());\n    const backup = localStorage.getItem(backupKey);\n    let loaded = false;\n    if (backup) {\n      try {\n        const data = JSON.parse(backup);\n        if (data.href === window.location.href) {\n          model.setData(data.data);\n          loaded = true;\n          this.addInfo('loaded backup from local storage')\n        }\n      } catch (e) {\n        console.log('bad backup')\n      }\n      localStorage.removeItem(backupKey);\n    }\n    if (!loaded && query.src) {\n      this.loadData(query.src);\n    }\n  }\n  async loadData(src) {\n    this.setState({loading: true});\n    let success = true;\n    try {\n      const {data, id} = await loadGistFromSrc(src, this.github);\n      model.setData(data);\n      if (id) {\n        this.setState({gistId: src})\n      }\n    } catch (e) {\n      success = false;\n      console.warn(e);\n      this.addError(`could not load jsGist: src=${src} ${e}`);\n    }\n    this.setState({loading: false});\n    if (success) {\n      this.handleRun();\n    }\n  }\n  addMsg = (msg, className) => {\n    switch (className) {\n      case 'error':\n        console.error(msg);\n        break;\n      default:\n        console.log(msg);\n        break;\n    }\n    this.setState({messages: [{msg, className}, ...this.state.messages]});\n    setTimeout(() => {\n      this.setState({messages: this.state.messages.slice(0, this.state.messages.length - 1)});\n    }, 5000);\n  }\n  addInfo = (msg) => this.addMsg(msg, 'info');\n  addError = (msg) => this.addMsg(msg, 'error');\n  closeDialog = () => {\n    this.setState({dialog: noJSX});\n  }\n  registerRunnerAPI = (api) => {\n    this.runnerAPI = api;\n    this.handleStop();\n  }\n  registerFilesAPI = (api) => {\n    this.filesAPI = api;\n  }\n  handleNew = async() => {\n    window.location.href = window.location.origin;\n    //window.history.pushState({}, '', `${window.location.origin}`);\n    //model.setData(model.getNewData());\n  }\n  handleRun = async () => {\n    localStorage.setItem(backupKey, JSON.stringify({\n      href: window.location.href,\n      data: model.getData(),\n    }));\n    this.logManager.clear();\n    console.clear();\n    this.runnerAPI.run(model.getData());\n  }\n  handleStop = async () => {\n    this.runnerAPI.run(model.getBlankData(), true);\n  }\n  handleSave = async () => {\n    this.setState({dialog: this.renderSave});\n  }\n  handleSettings = () => {\n    this.setState({dialog: this.renderSettings});\n  }\n  handleHelp = () => {\n    this.setState({dialog: this.renderHelp});\n  }\n  handleLoad = () => {\n    this.setState({dialog: this.renderLoad});\n  }\n  handleOnLoad = async() => {\n    this.setState({dialog: noJSX});\n    this.handleRun();\n  }\n  handleOnSave = (gistId) => {\n    window.history.pushState({}, '', `${window.location.origin}?src=${gistId}`);\n    this.setState({gistId});\n  }\n  handleAbort = () => {\n    this.abort();\n  };\n  handleGoToLine = (data) => {\n    this.filesAPI.goToLine(data);\n  }\n  renderHelp = () => {\n    return (<Help onClose={this.closeDialog} />);\n  }\n  renderSettings = () => {\n    return (\n      <Settings onClose={this.closeDialog} />\n    );\n  }\n  renderLoad = () => {\n    return (\n      <Load\n        onLoad={this.handleOnLoad}\n        onClose={this.closeDialog}\n        addError={this.addError}\n        github={this.github}\n      />\n    );\n  }\n  renderSave = () => {\n    const data = model.getData();\n    return (\n      <Save\n        onSave={this.handleOnSave}\n        onClose={this.closeDialog}\n        addError={this.addError}\n        github={this.github}\n        gistId={this.state.gistId}\n        data={data} />\n    );\n  }\n  render() {\n    const data = model.getData();\n    const {\n      loading,\n      dialog,\n      // disqusId,\n      updateVersion: hackKey,\n      userData,\n    } = this.state;\n    const extra = [];\n    return (\n      <div className=\"App\">\n        <div className=\"content\">\n          <div className=\"head\">\n            <div>\n              <img src=\"/resources/images/logo-small.svg\" alt=\"logo\"/>\n            jsGist.org<span className=\"beta\">(alpha)</span>\n            </div>\n            <div className=\"fix-help-contribute\">\n              <div className=\"three-words\">\n                <div><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/greggman/jsgist/\">Fix</a></div>\n                <div><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/greggman/jsgist/\">Help</a></div>\n                <div><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/greggman/jsgist/\">Contribute</a></div>\n              </div>\n              <div className=\"octocat\">\n                <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/greggman/jsgist/\">\n                  <img alt=\"github\" src=\"/resources/images/octocat-icon.svg\"/>\n                </a>\n              </div>\n            </div>\n          </div>\n          <div className=\"top\">\n            <div className=\"left\">\n              <div className=\"name\">\n                <EditLine value={data.name} onChange={v => model.setName(v)} />\n                {userData.name ? <div className=\"username\"><a target=\"_blank\" rel=\"noopener noreferrer\" href={`https://github.com/${userData.name}`}>{userData.name}</a></div> : [] }\n                {userData.avatarURL ? <a target=\"_blank\" rel=\"noopener noreferrer\" href={`https://github.com/${userData.name}`}><img className=\"avatar\" src={userData.avatarURL} alt=\"avatar\"/></a> : []}\n              </div>\n            </div>\n            <div className=\"right\">\n              <button tabIndex=\"1\" onClick={this.handleRun}>Run</button>\n              <button tabIndex=\"1\" onClick={this.handleStop}>Stop</button>\n              <button tabIndex=\"1\" onClick={this.handleSave}>Save</button>\n              <button tabIndex=\"1\" onClick={this.handleNew}>New</button>\n              <button tabIndex=\"1\" onClick={this.handleLoad}>Load</button>\n              {/*<button tabIndex=\"1\" onClick={this.handleSettings} title=\"settings\"><img src={`${window.location.origin}/resources/images/gear.svg`} alt=\"settings\"></img></button>*/}\n              <button tabIndex=\"1\" onClick={this.handleHelp} title=\"help\">?</button>\n            </div>\n          </div>\n          {\n            loading ? [] : (\n              <div className=\"bottom\">\n                <Split direction=\"horizontal\" minSize={0}>\n                  <div className=\"left\">\n                    <Files data={data} hackKey={hackKey} extra={extra} registerAPI={this.registerFilesAPI} />\n                  </div>\n                  <div className=\"right\">\n                    <Split direction=\"vertical\" sizes={[0.9, 0.1]}>\n                      <Runner logManager={this.logManager} registerRunnerAPI={this.registerRunnerAPI} />\n                      <Log logManager={this.logManager} onGoToLine={this.handleGoToLine} />\n                    </Split>\n                  </div>\n                </Split>\n              </div>\n            )\n          }\n        </div>\n        <Footer\n          disqusId={makeDisqusId()}\n          title={data.name}\n        />\n        {dialog()}\n        <div className=\"messages\">\n          {\n            this.state.messages.map(({msg, className}, i) => (<div className={className} key={`err${i}`}>{msg}</div>))\n          }\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport './scrollbars.js';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/vertical-layout.f248a432.svg\";","module.exports = __webpack_public_path__ + \"static/media/horizontal-layout.e3f3298b.svg\";","module.exports = __webpack_public_path__ + \"static/media/two-by-two-layout.23605ce8.svg\";"],"sourceRoot":""}