{"version":3,"sources":["scrollbars.js","EditLine.js","url.js","window-message-manager.js","Disqus.js","Footer.js","subscription-manager.js","globals.js","StorageManager.js","GitHub.js","Head.js","Dialog.js","Help.js","model.js","Code.js","css-utils.js","CodeArea.js","File.js","Files.js","ServiceContext.js","Log.js","Runner.js","Layout3Vertical.js","Layout3Horizontal.js","utils.js","Layout2x2.js","LayoutTabbed.js","ui-model.js","IDE.js","gists.js","LoadGist.js","LoadJSON.js","LoadURL.js","Section.js","Load.js","compression.js","loader.js","OAuthManager.js","SaveAsGist.js","SaveAsJSON.js","SaveAsURL.js","Embed.js","Save.js","Settings.js","App.js","serviceWorker.js","index.js","icons/vertical-layout.svg","icons/horizontal-layout.svg","icons/two-by-two-layout.svg","icons/tabbed-layout.svg"],"names":["parent","document","createElement","setAttribute","classList","add","child","appendChild","body","firstChild","clientWidth","removeChild","EditLine","props","type","onChange","e","target","value","placeholder","createURL","base","params","url","URL","searchParams","URLSearchParams","search","Object","entries","key","undefined","delete","set","toString","href","handlers","on","fn","fns","remove","push","ndx","indexOf","splice","window","addEventListener","data","Disqus","handleResize","iframeRef","current","style","height","React","createRef","winMsgMgr","this","nextProps","disqusId","title","ref","src","Component","Footer","className","Fragment","SubscriptionManager","itemToSubscriptionMap","Map","item","unsubscribe","get","length","slice","storageManager","prefix","_handleNewValue","startsWith","unPrefixedKey","substr","subscriptionManager","notify","subscribe","session","k","_addPrefix","v","sessionStorage","getItem","localStorage","setItem","removeItem","removeEventListener","emptyValue","getGistContent","gist","JSON","parse","files","content","filter","map","name","file","concat","getAnonGist","gist_id","a","fetch","req","json","rawData","createGistData","reduce","trim","saveData","jsGistData","keys","stringify","filename","description","public","settings","private","GitHub","pat","user","unAuthorizedOctokit","Octokit","userAgent","userData","owner","login","avatarURL","avatar_url","getUserData","assign","event","Event","dispatchEvent","authorizedOctokit","auth","paginate","gists","list","_updateUserData","octokit","gistData","create","id","date","updated_at","update","EventTarget","Head","alt","rel","Dialog","handleKeyDown","keyCode","onClose","children","onClick","tabIndex","stopPropagation","Help","validator","Ajv","compile","schema","trackedValues","getValueOrMakeNew","trackedValue","subscriptions","Set","initialValue","newValue","Error","newTestData","getBlankData","location","origin","getData","incVersion","incDataVersion","_","incFilesVersion","setFileName","newName","setFileContent","setData","newData","errors","message","dataPath","validate","darkMatcher","matchMedia","noop","Code","registerEditor","editor","hackKey","state","registerAPI","goToLine","lineNo","colNo","focus","doc","setCursor","refresh","options","onValueChange","isDarkMode","matches","mode","scrollbarStyle","theme","lineNumbers","onBeforeChange","setState","editorDidMount","camelCaseRE","toDash","left","right","camelCaseToDash","s","replace","toLowerCase","classNames","names","args","arg","join","CodeArea","heading","extra","File","handleRegisterAPI","api","codeAPI","register","section","unregister","width","mimeType","mime","lookup","Files","handleRegister","handleUnregister","fileToKeyMap","test","Date","now","Math","random","forEach","direction","minSize","computeNewSizesFn","moveGuttersComputeNewSizes","getFileKey","desc","onTitleChange","model","ServiceContext","createContext","LogManager","clear","_msgs","_notify","addMsg","lastData","oldMsg","newMsg","isMsgSame","count","Log","handleChange","forceUpdate","logMessagesRef","context","logManager","prevProps","prevState","snapshot","elem","scrollTop","scrollHeight","parentElement","clientHeight","onGoToLine","getMsgs","msg","tooltip","fileLink","data-tooltip","lastIndexOf","basename","contextType","Runner","handleJSLog","handleJSError","handleGimmeDaCodez","iframe","contentWindow","postMessage","handleMessage","runnerRef","run","blank","removeIFrame","background","Layout3Vertical","registerFilesAPI","filesAPI","handleGoToLine","registerRunnerAPI","sizes","Layout3Horizontal","findNdx","endings","ending","findIndex","endsWith","getOrFindNdx","f","NamedFile","Layout2x2","mainHTMLNdx","mainJSNdx","mainCSSNdx","fixSizes","lastSizes","show","oldSize","availableSpace","i","len","sum","size","newSizes","setSizes","currentNdx","showResult","showLow","handleOnChange","toggleShowLog","showLog","toggleShowResult","previousNdx","resultStyle","display","logStyle","checked","htmlFor","onSetSizes","initialized","layout","screen","init","layoutModes","LayoutTabbed","IDE","uiModel","gistSchema","gistsSchema","ajv","gistsValidator","gistValidator","getStoredGists","addGist","saveGistsToLocalStorage","setGists","LoadGist","handleNewGists","onPatChange","oauthManager","loadGists","addError","github","loading","setPat","getUserGists","gistArray","canLoad","sort","b","disabled","encodeURIComponent","substring","renderLoad","renderLogin","LoadJSON","useState","setJSON","useContext","onLoad","LoadURL","setUrl","Section","Load","utf8Encoder","TextEncoder","utf8Decoder","TextDecoder","isCompressedBase64","compressedBase64ToJSON","isCompressed","base64","raw","Uint8Array","decode","bin","inflate","idRE","isGistId","loadGistFromSrc","res","OAuthManager","requestToken","client","code","access_token","_storageManager","console","error","logout","_closePopup","client_id","scope","popup","config","top","screenY","outerHeight","screenX","outerWidth","open","createPopup","_popup","_state","windowMessageManager","close","SaveAsGist","saveNew","saving","onSave","success","createGist","saveOverExisting","gistId","updateGist","canUpdate","data-type","renderSave","SaveAsJSON","userSelect","SaveAsURL","encode","compressed","deflate","useCompressed","jsonToCompressedBase64","Embed","Save","RadioOption","selected","radioSelected","Radio","selectedNdx","childNdx","newChildren","Children","isValidElement","cloneElement","Settings","handleLayoutChange","verticalIcon","horizontalIcon","twoByTwoIcon","tabbedIcon","noJSX","makeDisqusId","loc","fromEntries","App","log","messages","setTimeout","addInfo","closeDialog","dialog","runnerAPI","handleStop","handleNew","handleRun","handleSave","handleSettings","renderSettings","handleHelp","renderHelp","handleLoad","handleOnLoad","handleOnSave","history","pushState","handleAbort","abort","path","pathname","dark","updateVersion","query","backup","loaded","loadData","warn","Provider","Boolean","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","then","registration","catch","module","exports"],"mappings":"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","file":"static/js/main.e5305ea0.chunk.js","sourcesContent":["import './scrollbars.css';\n\n/*\n * Scrollbar Width Test\n * Adds `layout-scrollbar-obtrusive` class to body if scrollbars use up screen real estate\n */\nconst parent = document.createElement(\"div\");\nparent.setAttribute(\"style\", \"width:30px;height:30px;\");\nparent.classList.add('scrollbar-test');\n\nconst child = document.createElement(\"div\");\nchild.setAttribute(\"style\", \"width:100%;height:40px\");\nparent.appendChild(child);\ndocument.body.appendChild(parent);\n\n// Measure the child element, if it is not\n// 30px wide the scrollbars are obtrusive.\nconst scrollbarWidth = 30 - parent.firstChild.clientWidth;\nif(scrollbarWidth) {\n  document.body.classList.add(\"layout-scrollbar-obtrusive\");\n}\n\ndocument.body.removeChild(parent);","import React from 'react';\n\nexport default function EditLine(props) {\n  return (\n    <input\n      type=\"text\"\n      onChange={(e) => {props.onChange(e.target.value)}}\n      placeholder={props.placeholder}\n      value={props.value} />\n  );\n}","export function createURL(base, params) {\n  const url = new URL(base);\n  const searchParams = new URLSearchParams(url.search);\n  for (const [key, value] of Object.entries(params)) {\n    if (value === undefined) {\n      searchParams.delete(key);\n    } else {\n      searchParams.set(key, value);\n    }\n  }\n  url.search = searchParams.toString();\n  return url.href;\n}\n\nexport function updateURL(params) {\n  const url = createURL(window.location.href, params);\n  window.history.replaceState({}, '', url.href);\n}\n\n","const handlers = {};\n\nexport function on(type, fn) {\n  let fns = handlers[type];\n  if (!fns) {\n    fns = [];\n    handlers[type] = fns;\n  }\n  remove(type, fn);\n  fns.push(fn);\n}\n\nexport function remove(type, fn) {\n  const fns = handlers[type];\n  if (fns) {\n    const ndx = fns.indexOf(fn);\n    if (ndx >= 0) {\n      fns.splice(ndx, 1);\n    }\n  }\n}\n\nwindow.addEventListener('message', (e) => {\n  const {type, data} = e.data;\n  const fns = handlers[type];\n  if (fns) {\n    for (const fn of fns) {\n      fn(data);\n    }\n  }\n});\n\n","import React from 'react';\nimport {createURL} from './url.js';\nimport * as winMsgMgr from './window-message-manager.js';\n\n// Disqus is served from a separate domain in an iframe. In other words\n//\n// +--[jsgist.org]-----------------------------+\n// |                                           |\n// | +--[iframe src=jsgist.devcomments.org]--+ |\n// | |                                       | |\n// | | +--[iframe src=disqus.com]---+        | |\n// | | |                            |        | |\n// | | +----------------------------+        | |\n// | |                                       | |\n// | +---------------------------------------+ |\n// |                                           |\n// +-------------------------------------------+\n//\n// This is because disqus works by embedded script\n// so we can't let it be on our page directly\n// otherwise it could read our secrets\n//\nexport default class Disqus extends React.Component {\n  constructor() {\n    super();\n    this.iframeRef = React.createRef();\n  }\n  // Disqus's script creates an iframe and the content in the iframe\n  // communicates back to the main page to tell it the size of the iframe\n  // so the main page can adjust the iframe size. We do that same thing\n  // so our top page can just the size of the middle iframe in the\n  // diagram above.\n  handleResize = (data) => {\n    this.iframeRef.current.style.height = `${data.height}px`;\n  }\n  componentDidMount() {\n    winMsgMgr.on('resize', this.handleResize);\n  }\n  componentWillUnmount() {\n    winMsgMgr.remove('resize', this.handleResize);\n  }\n  shouldComponentUpdate(nextProps) {\n    return nextProps.disqusId !== this.disqusId;\n  }\n  render() {\n    const {disqusId, title} = this.props;\n    const url = createURL('https://jsgist.devcomments.org/comments.html', {disqusId, title});\n    return (\n      <div>\n        { disqusId ?\n          <iframe\n            ref={this.iframeRef}\n            title=\"comments\"\n            src={url}\n          /> : []\n        }\n      </div>\n    );\n  }\n}","\nimport React from 'react';\nimport Disqus from './Disqus.js';\n\nexport default function Footer(props) {\n  return (\n    <div className=\"comments\">\n      <hr/>\n      {/*\n      <div className=\"links\">\n         <a target=\"_blank\" href=\"https://github.com/greggman/jsgist/issues/new?assignees=&labels=suggested+topic&template=suggest-topic.md&title=%5BSUGGESTION%5D\">Suggestion</a>?<span> </span>\n         <a target=\"_blank\" href=\"https://github.com/greggman/jsgist/issues/new?assignees=&labels=&template=request.md&title=\">Request</a>?<span> </span>\n         <a target=\"_blank\" href=\"https://github.com/greggman/jsgist/issues/new?assignees=&labels=bug+%2F+issue&template=bug-issue-report.md&title=\">Issue</a>?<span> </span>\n         <a target=\"_blank\" href=\"https://github.com/greggman/jsgist/issues/new?assignees=&labels=bug+%2F+issue&template=bug-issue-report.md&title=\">Bug</a>?\n      </div>\n      */}\n      {\n        props.disqusId ? (\n          <React.Fragment>\n            <div className=\"comment-notes\">\n               Use <b>&lt;pre&gt;&lt;code&gt;</b>code goes here<b>&lt;/code&gt;&lt;/pre&gt;</b> for code blocks\n            </div>\n            <Disqus disqusId={props.disqusId} title={props.title} />\n          </React.Fragment>\n        ) : []\n      }\n    </div>\n  );\n}","\nexport default class SubscriptionManager {\n  constructor() {\n    this.itemToSubscriptionMap = new Map();\n  }\n  subscribe(item, fn) {\n    this.unsubscribe(item, fn);\n    let fns = this.itemToSubscriptionMap.get(item);\n    if (!fns) {\n      fns = [];\n      this.itemToSubscriptionMap.set(item, fns);\n    }\n    fns.push(fn);\n  }\n  unsubscribe(item, fn) {\n    const fns = this.itemToSubscriptionMap.get(item);\n    if (fns) {\n      const ndx = fns.indexOf(fn);\n      if (ndx >= 0) {\n        fns.splice(ndx, 1);\n        if (fns.length === 0) {\n          this.itemToSubscriptionMap.delete(item);\n        }\n      }\n    }\n  }\n  notify(item) {\n    const fns = this.itemToSubscriptionMap.get(item);\n    if (fns) {\n      for (const fn of fns.slice()) {\n        fn();\n      }\n    }\n  }\n}","import StorageManager from './StorageManager.js';\nimport {isDevelopment} from './flags.js';\n\nexport const storageManager = new StorageManager('jsgist');\nexport const clientId = isDevelopment\n    ? 'b7822ff167d2bbe9a361'\n    : 'c055b54872b13c10e4bd';\n\n","import SubscriptionManager from './subscription-manager.js';\n\nexport default class StorageManager {\n  constructor(prefix) {\n    this.prefix = `${prefix}-`;\n    this.subscriptionManager = new SubscriptionManager();\n    window.addEventListener('storage', this._handleNewValue);\n  }\n  _handleNewValue = (e) => {\n    const key = e.key;\n    if (key.startsWith(this.prefix)) {\n      const unPrefixedKey = key.substr(this.prefix.length);\n      this.subscriptionManager.notify(unPrefixedKey);\n    }\n  }\n  _addPrefix(key) {\n    return `${this.prefix}${key}`;\n  }\n  subscribe(key, fn) {\n    this.subscriptionManager.subscribe(key, fn);\n  }\n  unsubscribe(key, fn) {\n    this.subscriptionManager.unsubscribe(key, fn);\n  }\n  get(key, session = false) {\n    const k = this._addPrefix(key);\n    if (session) {\n      const v = sessionStorage.getItem(k);\n      if (v) {\n        return v;\n      }\n    }\n    return localStorage.getItem(k);\n  }\n  set(key, value, session = false) {\n    const k = this._addPrefix(key);\n    if (session) {\n      sessionStorage.setItem(k, value);\n    }\n    localStorage.setItem(k, value);\n    this.subscriptionManager.notify(key);\n  }\n  delete(key, session) {\n    const k = this._addPrefix(key);\n    if (session) {\n      sessionStorage.removeItem(k);\n    }\n    localStorage.removeItem(k);\n  }\n  cleanup() {\n    window.removeEventListener('storage', this._handleNewValue);\n  }\n}\n\n","import { Octokit } from '@octokit/rest';\n\nconst userAgent = 'jsGist v0.0.1';\nconst emptyValue = '/*bug-in-github-api-content-can-not-be-empty*/';\n\nexport function getGistContent(gist) {\n  const data = JSON.parse(gist.files['jsGist.json'].content);\n  data.files = Object.entries(gist.files)\n    .filter(([name]) => name !== 'jsGist.json')\n    .map(([name, file]) => {\n      return {\n        name,\n        content: file.content.startsWith(emptyValue)\n            ? file.content.substr(emptyValue.length)\n            : file.content,\n      }\n    }).concat(data.files || []);\n  return data;\n} \n\nexport async function getAnonGist(gist_id) {\n  const req = await fetch(`https://api.github.com/gists/${gist_id}`);\n  const gist = await req.json();\n  return {\n    data: getGistContent(gist),\n    rawData: gist,\n  };\n}\n\nexport function getUserData(data) {\n  return (data && data.owner)\n      ? {\n          name: data.owner.login,\n          avatarURL: data.owner.avatar_url,\n      }\n      : undefined;\n}\n\nfunction createGistData(data, gist_id) {\n  let files = data.files.reduce((files, file) => {\n    files[file.name] = {\n      content: file.content.trim() ? file.content : `${emptyValue}${file.content}`,\n    };\n    return files;\n  }, {});\n  const saveData = {\n    ...data,\n  };\n  /*\n  // we can't add a readme because we don't know the gist_id. I guess we would double\n  // save? create then update?\n\n  const lowerCaseFiles = Object.keys(files).map(n => n.toLowerCase());\n  const hadReadme = \n      lowerCaseFiles.includes('readme.md') ||\n      lowerCaseFiles.includes('readme.txt') ||\n      lowerCaseFiles.includes('readme');\n  if (!hadReadme) {\n    files['README.md'] = `# ${data.name}\\n\\n[jsGist Link](${window.location.origin}?src=${})`\n  }\n  */\n  const jsGistData = {}\n  files['jsGist.json'] = jsGistData;\n  const noDuplicateNames = Object.keys(files).length === data.files.length + 1;\n  if (noDuplicateNames) {\n    delete saveData.files;\n  } else {\n    // save the files in the json\n    files = {\n      'jsGist.json': jsGistData,\n    };\n  }\n  jsGistData.content = JSON.stringify(saveData);\n  if (gist_id) {\n    // if we have a gist_id this is an update\n    // updates need filenames (which allows renaming)\n    for (const [filename, file] of Object.entries(files)) {\n      file.filename = filename;\n    }\n  }\n  return {\n    files,\n    description: data.name,\n    ...(!gist_id && {public: !data.settings.private}),\n    ...(gist_id && {gist_id}),\n  };\n}\n\nexport default class GitHub extends EventTarget {\n  constructor() {\n    super();\n    this.pat = '';\n    this.user = {};\n    this.unAuthorizedOctokit = new Octokit({\n      userAgent,\n    });\n  }\n  get octokit() {\n    return this.authorizedOctokit || this.unAuthorizedOctokit;\n  }\n  _updateUserData(data) {\n    const userData = getUserData(data);\n    if (userData) {\n      Object.assign(this.user, userData);\n      const event = new Event('userdata');\n      event.data = {...this.user};\n      this.dispatchEvent(event);\n    }\n  }\n  setPat(pat) {\n    if (pat !== this.pat) {\n      this.pat = pat;\n      this.authorizedOctokit = new Octokit({\n        auth: pat,\n        userAgent,\n      });\n    }\n  }\n  async getUserGists() {\n    const gists = await this.authorizedOctokit.paginate(this.authorizedOctokit.gists.list);\n    return gists.filter(gist => !!gist.files['jsGist.json']);\n    // return await this.authorizedOctokit.gists.list();\n  }\n\n  async getAnonGist(gist_id) {\n    const {data, rawData} = await getAnonGist(gist_id);\n    this._updateUserData(rawData);\n    return {data, rawData};\n  }\n\n  async getUserGist(gist_id) {\n    const gist = await this.octokit.gists.get({gist_id});\n    this._updateUserData(gist.data);\n    return getGistContent(gist.data);\n  }\n\n  async createGist(data) {\n    const gistData = createGistData(data);\n    const gist = await this.authorizedOctokit.gists.create(gistData);\n    this._updateUserData(gist.data);\n    return {\n      id: gist.data.id,\n      name: gist.data.description,\n      date: gist.data.updated_at,\n    };\n  }\n  async updateGist(gist_id, data) {\n    const gistData = createGistData(data, gist_id);\n    const gist = await this.authorizedOctokit.gists.update(gistData);\n    return {\n      id: gist.data.id,\n      name: gist.data.description,\n      date: gist.data.updated_at,\n    };\n  }\n\n}\n\n","import React from 'react';\n\nexport default function Head() {\n  return (\n    <div className=\"head\">\n      <div>\n        <img src=\"/resources/images/logo-small.svg\" alt=\"logo\"/>\n      jsGist.org<span className=\"beta\">(alpha)</span>\n      </div>\n      <div className=\"fix-help-contribute\">\n        <div className=\"three-words\">\n          <div><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/greggman/jsgist/\">Fix</a></div>\n          <div><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/greggman/jsgist/\">Help</a></div>\n          <div><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/greggman/jsgist/\">Contribute</a></div>\n        </div>\n        <div className=\"octocat\">\n          <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/greggman/jsgist/\">\n            <img alt=\"github\" src=\"/resources/images/octocat-icon.svg\"/>\n          </a>\n        </div>\n      </div>\n    </div>\n  );\n}","import React from 'react';\n\nexport default class Dialog extends React.Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n  handleKeyDown = (e) => {\n    if (e.keyCode === 27) {\n      this.props.onClose();\n    }\n  }\n  render() {\n    const {title, children, onClose} = this.props;\n    return (\n      <div onClick={onClose} className=\"dialog\">\n        <div\n          tabIndex=\"-1\"\n          onClick={(e) =>{e.stopPropagation()}}\n        >\n          <div className=\"dialog-heading\">\n            <div className=\"dialog-title\">{title}</div>\n            <div className=\"dialog-close\">\n              <button onClick={onClose}>X</button>\n            </div>\n          </div>\n          <div className=\"dialog-content\">\n            {children}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport Dialog from './Dialog.js';\n\nexport default function Help(props) {\n  const {onClose} = props;\n  return (\n    <Dialog title=\"jsGist\" onClose={onClose}>\n      <div className=\"markdown\">\n      <p>A gist based JavaScript/HTML/CSS Playground</p>\n      <h2>Contribute, Fix, Enhance!</h2>\n      <p>\n        <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/greggman/jsgist\">https://github.com/greggman/jsgist</a>\n      </p>\n      <p>Also see <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://jsbenchit.org\">jsbenchit.org</a></p>\n      <h2>Saving</h2>\n      <p>You can save your tests in multiple ways.</p>\n      <ol>\n        <li>Save to a github gist by logging in</li>\n        <li>Save it manually into github\n          <p>\n           Copy the JSON. Go to github. Create a new gist. Name the file\n           <code>jsGist.json</code> Paste the JSON in. Pick \"Create public gist\".\n          </p>\n          <p>\n           Note the id in the URL after you create the gist.\n          </p>\n          <p>\n           Create a url in the form <code>https://jsgist.org/?src=&lt;gist_id&gt;--</code>.\n          </p>\n          <p>\n           Example: <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://jsgist.org/?src=bad0a8491bd6614e729ff01cc14089c9\">https://jsgist.org/?src=bad0a8491bd6614e729ff01cc14089c9</a>\n          </p>\n        </li>\n        <li>Save it manually somewhere else.\n          <p>\n           If there's some other service that will provide a string via\n           http get then copy and save the JSON there then create a URL\n           in the form of <code>https://jsgist.org/?src=&lt;url&gt;</code>. Note: you\n           may have to escape the URL.\n          </p>\n        </li>\n        <li>Save it as a bookmark or link\n          <p>\n           In the SaveAs dialog there's a link that contains all the data\n           for your benchmark.\n          </p>\n        </li>\n      </ol>\n      </div>\n    </Dialog>\n  );\n}","import Ajv from 'ajv';\n\nimport {isDevelopment} from './flags.js';\nimport schema from './schema.json';\n\nconst ajv = new Ajv() // options can be passed, e.g. {allErrors: true}\nconst validator = ajv.compile(schema);\n\nconst trackedValues = {};\n\nfunction getValueOrMakeNew(name) {\n  const trackedValue = trackedValues[name] || {\n    subscriptions: new Set(),\n  };\n  trackedValues[name] = trackedValue;\n  return trackedValue;\n}\n\nexport function add(name, initialValue) {\n  const trackedValue = getValueOrMakeNew(name);\n  if (initialValue !== undefined) {\n    trackedValue.value = initialValue;\n  }\n  return trackedValue;\n}\n\nexport function get(name) {\n  return trackedValues[name].value;\n}\n\nexport function set(name, newValue) {\n  const trackedValue = trackedValues[name];\n  if (!trackedValue) {\n    throw new Error(`no such track value: ${name}`);\n  }\n  trackedValue.value = newValue;\n  const fns = [...trackedValue.subscriptions.keys()];\n  for (const fn of fns) {\n    fn(newValue, name);\n  }\n}\n\nexport function subscribe(name, fn) {\n  const trackedValue = getValueOrMakeNew(name);\n  trackedValue.subscriptions.add(fn);\n}\n\nexport function unsubscribe(name, fn) {\n  const trackedValue = getValueOrMakeNew(name);\n  trackedValue.subscriptions.delete(fn);\n}\n\nconst newTestData = {\n  \"name\": \"My jsGist\",\n  \"settings\": {},\n  \"files\": [\n    {\n      name: \"index.html\",\n      content: \"\",\n    },\n    {\n      name: \"index.css\",\n      content: \"\",\n    },\n    {\n      name: \"index.js\",\n      content: \"\",\n    },\n  ],\n};\nexport function getNewData() {\n  return JSON.parse(JSON.stringify(newTestData));\n}\nexport function getBlankData() {\n  const url = `${window.location.origin}/resources/images/logo.svg`;\n  return JSON.parse(JSON.stringify({\n    \"name\": \"jsGist\",\n    \"settings\": {},\n    \"files\": [\n      {\n        \"name\": \"index.html\",\n        \"content\": ``,\n      },\n      {\n        \"name\": \"index.css\",\n        \"content\": `\n          html, body {\n            margin: 0;\n            width: 100%;\n            height: 100%;\n            background-image: url(${url});\n            background-size: contain contain;\n            background-position: center center;\n            background-repeat: no-repeat no-repeat;\n          }\n          @media (prefers-color-scheme: dark) {\n            html {\n              background: #222;\n            }\n          }\n        `,\n      },\n      {\n        \"name\": \"index.js\",\n        \"content\": \"\",\n      }\n    ]\n  }));\n}\n\nlet data;\nexport function getData() {\n  return data;\n}\n\nexport const dataVersionKey = 'dataVersion';\nexport const updateVersionKey = 'updateVersion';\nexport const filesVersionKey = 'filesVersion';\n\nadd(dataVersionKey, 0);   // any data changes (when an item in the data is change)\nadd(updateVersionKey, 0);  // all data changes (when the entire data objects replaced with new data)\nadd(filesVersionKey, 0);  // files added or removed or the main name is changed\n\nconst incVersion = key => set(key, get(key) + 1);\nconst incDataVersion = _ => incVersion(dataVersionKey);\nconst incFilesVersion = _ => incVersion(filesVersionKey);\nconst incUpdateVersion = _ => {\n  incVersion(updateVersionKey);\n  incDataVersion();\n  incFilesVersion();\n};\n\nfunction getUniqueName(basename) {\n  const filenames = new Set(data.files.map(f => f.name));\n  for (let count = data.files.length + 1; ; ++count) {\n    const name = `${basename}${count}`;\n    if (!filenames.has(name)) {\n      return name;\n    }\n  }\n}\n\nexport function addFile(name = \"\", content = \"\") {\n  name = name || getUniqueName('unnamed');\n  data.files.push({\n    name,\n    content,\n  });\n  incDataVersion();\n  incFilesVersion();\n}\n\nexport function setName(name) {\n  data.name = name;\n  incDataVersion();\n  incFilesVersion();\n}\n\nexport function setFileName(ndx, newName) {\n  data.files[ndx].name = newName;\n  incDataVersion();\n}\n\nexport function setFileContent(ndx, content) {\n  data.files[ndx].content = content;\n  incDataVersion();\n}\n\nexport function setFileType(ndx, type) {\n  data.files[ndx].type = type;\n  incDataVersion();\n}\n\nexport function deleteFile(ndx) {\n  data.files.splice(ndx, 1);\n  incDataVersion();\n  incFilesVersion();\n}\n\nexport function validate(data) {\n  if (!validator(data)) {\n    debugger;\n    throw new Error(`data not valid:\\n${validator.errors.map(e => `${e.message}: ${e.dataPath}`)}`);\n  }\n}\n\nexport function setData(newData) {\n  validate(newData);\n  data = newData;\n  if (isDevelopment) {\n    window.d = data;\n  }\n  incUpdateVersion();\n}\n\nsetData(isDevelopment ? {\n  \"name\": \"ThreeJSFundamentals Scenegraph Tank\",\n  \"settings\": {},\n  \"files\": [\n    {\n      \"name\": \"index.html\",\n      \"content\": \"<canvas id=\\\"c\\\"></canvas>\\n<div id=\\\"info\\\"></div>\",\n    },\n    {\n      \"name\": \"index.css\",\n      \"content\": \"body {\\n  margin: 0;\\n}\\n#c {\\n  width: 100vw;\\n  height: 100vh;\\n  display: block;\\n}\\n#info { \\n  position: absolute; \\n  left: 1em; \\n  top: 1em; \\n  background: rgba(0,0,0,.8); \\n  padding: .5em;\\n  color: white;\\n  font-family: monospace;\\n}\",\n    },\n    {\n      \"name\": \"index.js\",\n      \"content\": \"import * as THREE from 'https://threejsfundamentals.org/threejs/resources/threejs/r119/build/three.module.js';\\n\\nfunction main() {\\n  const canvas = document.querySelector('#c');\\n  const renderer = new THREE.WebGLRenderer({canvas: canvas});\\n  renderer.setClearColor(0xAAAAAA);\\n  renderer.shadowMap.enabled = true;\\n\\n  function makeCamera(fov = 40) {\\n    const aspect = 2;  // the canvas default\\n    const zNear = 0.1;\\n    const zFar = 1000;\\n    return new THREE.PerspectiveCamera(fov, aspect, zNear, zFar);\\n  }\\n  const camera = makeCamera();\\n  camera.position.set(8, 4, 10).multiplyScalar(3);\\n  camera.lookAt(0, 0, 0);\\n\\n  const scene = new THREE.Scene();\\n\\n  {\\n    const light = new THREE.DirectionalLight(0xffffff, 1);\\n    light.position.set(0, 20, 0);\\n    scene.add(light);\\n    light.castShadow = true;\\n    light.shadow.mapSize.width = 2048;\\n    light.shadow.mapSize.height = 2048;\\n\\n    const d = 50;\\n    light.shadow.camera.left = -d;\\n    light.shadow.camera.right = d;\\n    light.shadow.camera.top = d;\\n    light.shadow.camera.bottom = -d;\\n    light.shadow.camera.near = 1;\\n    light.shadow.camera.far = 50;\\n    light.shadow.bias = 0.001;\\n  }\\n\\n  {\\n    const light = new THREE.DirectionalLight(0xffffff, 1);\\n    light.position.set(1, 2, 4);\\n    scene.add(light);\\n  }\\n\\n  const groundGeometry = new THREE.PlaneBufferGeometry(50, 50);\\n  const groundMaterial = new THREE.MeshPhongMaterial({color: 0xCC8866});\\n  const groundMesh = new THREE.Mesh(groundGeometry, groundMaterial);\\n  groundMesh.rotation.x = Math.PI * -.5;\\n  groundMesh.receiveShadow = true;\\n  scene.add(groundMesh);\\n\\n  const carWidth = 4;\\n  const carHeight = 1;\\n  const carLength = 8;\\n\\n  const tank = new THREE.Object3D();\\n  scene.add(tank);\\n\\n  const bodyGeometry = new THREE.BoxBufferGeometry(carWidth, carHeight, carLength);\\n  const bodyMaterial = new THREE.MeshPhongMaterial({color: 0x6688AA});\\n  const bodyMesh = new THREE.Mesh(bodyGeometry, bodyMaterial);\\n  bodyMesh.position.y = 1.4;\\n  bodyMesh.castShadow = true;\\n  tank.add(bodyMesh);\\n\\n  const tankCameraFov = 75;\\n  const tankCamera = makeCamera(tankCameraFov);\\n  tankCamera.position.y = 3;\\n  tankCamera.position.z = -6;\\n  tankCamera.rotation.y = Math.PI;\\n  bodyMesh.add(tankCamera);\\n\\n  const wheelRadius = 1;\\n  const wheelThickness = .5;\\n  const wheelSegments = 6;\\n  const wheelGeometry = new THREE.CylinderBufferGeometry(\\n      wheelRadius,     // top radius\\n      wheelRadius,     // bottom radius\\n      wheelThickness,  // height of cylinder\\n      wheelSegments);\\n  const wheelMaterial = new THREE.MeshPhongMaterial({color: 0x888888});\\n  const wheelPositions = [\\n    [-carWidth / 2 - wheelThickness / 2, -carHeight / 2,  carLength / 3],\\n    [ carWidth / 2 + wheelThickness / 2, -carHeight / 2,  carLength / 3],\\n    [-carWidth / 2 - wheelThickness / 2, -carHeight / 2, 0],\\n    [ carWidth / 2 + wheelThickness / 2, -carHeight / 2, 0],\\n    [-carWidth / 2 - wheelThickness / 2, -carHeight / 2, -carLength / 3],\\n    [ carWidth / 2 + wheelThickness / 2, -carHeight / 2, -carLength / 3],\\n  ];\\n  const wheelMeshes = wheelPositions.map((position) => {\\n    const mesh = new THREE.Mesh(wheelGeometry, wheelMaterial);\\n    mesh.position.set(...position);\\n    mesh.rotation.z = Math.PI * .5;\\n    mesh.castShadow = true;\\n    bodyMesh.add(mesh);\\n    return mesh;\\n  });\\n\\n  const domeRadius = 2;\\n  const domeWidthSubdivisions = 12;\\n  const domeHeightSubdivisions = 12;\\n  const domePhiStart = 0;\\n  const domePhiEnd = Math.PI * 2;\\n  const domeThetaStart = 0;\\n  const domeThetaEnd = Math.PI * .5;\\n  const domeGeometry = new THREE.SphereBufferGeometry(\\n    domeRadius, domeWidthSubdivisions, domeHeightSubdivisions,\\n    domePhiStart, domePhiEnd, domeThetaStart, domeThetaEnd);\\n  const domeMesh = new THREE.Mesh(domeGeometry, bodyMaterial);\\n  domeMesh.castShadow = true;\\n  bodyMesh.add(domeMesh);\\n  domeMesh.position.y = .5;\\n\\n  const turretWidth = .1;\\n  const turretHeight = .1;\\n  const turretLength = carLength * .75 * .2;\\n  const turretGeometry = new THREE.BoxBufferGeometry(\\n      turretWidth, turretHeight, turretLength);\\n  const turretMesh = new THREE.Mesh(turretGeometry, bodyMaterial);\\n  const turretPivot = new THREE.Object3D();\\n  turretMesh.castShadow = true;\\n  turretPivot.scale.set(5, 5, 5);\\n  turretPivot.position.y = .5;\\n  turretMesh.position.z = turretLength * .5;\\n  turretPivot.add(turretMesh);\\n  bodyMesh.add(turretPivot);\\n\\n  const turretCamera = makeCamera();\\n  turretCamera.position.y = .75 * .2;\\n  turretMesh.add(turretCamera);\\n\\n  const targetGeometry = new THREE.SphereBufferGeometry(.5, 6, 3);\\n  const targetMaterial = new THREE.MeshPhongMaterial({color: 0x00FF00, flatShading: true});\\n  const targetMesh = new THREE.Mesh(targetGeometry, targetMaterial);\\n  const targetOrbit = new THREE.Object3D();\\n  const targetElevation = new THREE.Object3D();\\n  const targetBob = new THREE.Object3D();\\n  targetMesh.castShadow = true;\\n  scene.add(targetOrbit);\\n  targetOrbit.add(targetElevation);\\n  targetElevation.position.z = carLength * 2;\\n  targetElevation.position.y = 8;\\n  targetElevation.add(targetBob);\\n  targetBob.add(targetMesh);\\n\\n  const targetCamera = makeCamera();\\n  const targetCameraPivot = new THREE.Object3D();\\n  targetCamera.position.y = 1;\\n  targetCamera.position.z = -2;\\n  targetCamera.rotation.y = Math.PI;\\n  targetBob.add(targetCameraPivot);\\n  targetCameraPivot.add(targetCamera);\\n\\n  // Create a sine-like wave\\n  const curve = new THREE.SplineCurve( [\\n    new THREE.Vector2( -10, 0 ),\\n    new THREE.Vector2( -5, 5 ),\\n    new THREE.Vector2( 0, 0 ),\\n    new THREE.Vector2( 5, -5 ),\\n    new THREE.Vector2( 10, 0 ),\\n    new THREE.Vector2( 5, 10 ),\\n    new THREE.Vector2( -5, 10 ),\\n    new THREE.Vector2( -10, -10 ),\\n    new THREE.Vector2( -15, -8 ),\\n    new THREE.Vector2( -10, 0 ),\\n  ] );\\n\\n  const points = curve.getPoints( 50 );\\n  const geometry = new THREE.BufferGeometry().setFromPoints( points );\\n  const material = new THREE.LineBasicMaterial( { color : 0xff0000 } );\\n  const splineObject = new THREE.Line( geometry, material );\\n  splineObject.rotation.x = Math.PI * .5;\\n  splineObject.position.y = 0.05;\\n  scene.add(splineObject);\\n\\n  function resizeRendererToDisplaySize(renderer) {\\n    const canvas = renderer.domElement;\\n    const width = canvas.clientWidth;\\n    const height = canvas.clientHeight;\\n    const needResize = canvas.width !== width || canvas.height !== height;\\n    if (needResize) {\\n      renderer.setSize(width, height, false);\\n    }\\n    return needResize;\\n  }\\n\\n  const targetPosition = new THREE.Vector3();\\n  const tankPosition = new THREE.Vector2();\\n  const tankTarget = new THREE.Vector2();\\n\\n  const cameras = [\\n    { cam: camera, desc: 'detached camera', },\\n    { cam: turretCamera, desc: 'on turret looking at target', },\\n    { cam: targetCamera, desc: 'near target looking at tank', },\\n    { cam: tankCamera, desc: 'above back of tank', },\\n  ];\\n\\n  const infoElem = document.querySelector('#info');\\n\\n  function render(time) {\\n    time *= 0.001;\\n\\n    if (resizeRendererToDisplaySize(renderer)) {\\n      const canvas = renderer.domElement;\\n      cameras.forEach((cameraInfo) => {\\n        const camera = cameraInfo.cam;\\n        camera.aspect = canvas.clientWidth / canvas.clientHeight;\\n        camera.updateProjectionMatrix();\\n      });\\n    }\\n\\n    // move target\\n    targetOrbit.rotation.y = time * .27;\\n    targetBob.position.y = Math.sin(time * 2) * 4;\\n    targetMesh.rotation.x = time * 7;\\n    targetMesh.rotation.y = time * 13;\\n    targetMaterial.emissive.setHSL(time * 10 % 1, 1, .25);\\n    targetMaterial.color.setHSL(time * 10 % 1, 1, .25);\\n\\n    // move tank\\n    const tankTime = time * .05;\\n    curve.getPointAt(tankTime % 1, tankPosition);\\n    curve.getPointAt((tankTime + 0.01) % 1, tankTarget);\\n    tank.position.set(tankPosition.x, 0, tankPosition.y);\\n    tank.lookAt(tankTarget.x, 0, tankTarget.y);\\n\\n    // face turret at target\\n    targetMesh.getWorldPosition(targetPosition);\\n    turretPivot.lookAt(targetPosition);\\n\\n    // make the turretCamera look at target\\n    turretCamera.lookAt(targetPosition);\\n\\n    // make the targetCameraPivot look at the at the tank\\n    tank.getWorldPosition(targetPosition);\\n    targetCameraPivot.lookAt(targetPosition);\\n\\n    wheelMeshes.forEach((obj) => {\\n      obj.rotation.x = time * 3;\\n    });\\n\\n    const camera = cameras[time * .25 % cameras.length | 0];\\n    infoElem.textContent = camera.desc;\\n\\n    renderer.render(scene, camera.cam);\\n\\n    requestAnimationFrame(render);\\n  }\\n\\n  requestAnimationFrame(render);\\n}\\n\\nmain();\\n\",\n    }\n  ]\n} : getNewData());\n","import React from 'react';\nimport {Controlled as CodeMirror} from 'react-codemirror2';\nimport 'codemirror/lib/codemirror.css';\nimport 'codemirror/theme/material.css';\nimport 'codemirror/theme/eclipse.css';\nimport 'codemirror/mode/css/css.js';\nimport 'codemirror/mode/javascript/javascript.js';\nimport 'codemirror/mode/htmlmixed/htmlmixed.js';\nimport 'codemirror/addon/scroll/simplescrollbars.js';\nimport 'codemirror/addon/scroll/simplescrollbars.css';\n\nconst darkMatcher = window.matchMedia\n    ? window.matchMedia('(prefers-color-scheme: dark)')\n    : {};\n// darkMatcher.addListener(render);\n\nconst noop = () => {};\n\nexport default class Code extends React.Component {\n  constructor(props) {\n    super(props);\n    const {value, hackKey} = props;\n    this.state = {value, hackKey}\n  }\n  static getDerivedStateFromProps(props, state) {\n    const needNewData = state.hackKey !== props.hackKey;\n    return (needNewData)\n       ? {hackKey: props.hackKey, value: props.value}\n       : null;\n  }\n  componentDidMount() {\n    const {registerAPI} = this.props;\n    if (registerAPI) {\n      registerAPI({\n        goToLine: (lineNo, colNo) => {\n          this.editor.focus();\n          this.editor.doc.setCursor(lineNo - 1, colNo - 1);\n        },\n        refresh: _ => {\n          this.editor.refresh();\n        },\n        focus: _ => {\n          this.editor.focus();\n        },\n      });\n    }\n  }\n  registerEditor = (editor) => {\n    this.editor = editor;\n  }\n  render() {\n    const {options = {}, onValueChange = noop} = this.props;\n    const {value} =  this.state;\n    const isDarkMode = darkMatcher.matches;\n    return (\n      <CodeMirror\n        value={value}\n        options={{\n          mode: 'javascript',\n          scrollbarStyle: 'overlay',\n          theme: isDarkMode ? 'material' : 'eclipse',\n          ...(options.editor && options.editor),\n          lineNumbers: true,\n        }}\n        onBeforeChange={(editor, data, value) => {\n          this.setState({value});\n        }}\n        onChange={(editor, data, value) => {\n          onValueChange(value);\n        }}\n        editorDidMount={this.registerEditor}\n      />\n    );\n  }\n};\n","const camelCaseRE = /([a-z])([A-Z])/g;\nconst toDash = (_, left, right) => `${left}-${right}`;\nconst camelCaseToDash = s => s.replace(camelCaseRE, toDash).toLowerCase();\n\nexport function classNames(...args) {\n  const names = [];\n  for (const arg of args) {\n    if (typeof arg === 'string') {\n      names.push(arg);\n    } else {\n      for (const [key, value] of Object.entries(arg)) {\n        if (value) {\n          names.push(camelCaseToDash(key));\n        }\n      }\n    }\n  }\n  return names.join(' ');\n}","import React from 'react';\n//import {Resizable} from 're-resizable';\nimport Code from './Code.js';\nimport {classNames} from './css-utils.js';\n\nexport default function CodeArea(props) {\n  const {\n    value,\n    hackKey,\n    heading,\n    extra = [],\n    options = {},\n    onValueChange,\n    registerAPI,\n  } = props;\n  return (\n    <div className=\"code-area\" style={props.style}>\n        <div className=\"expander\">\n          {heading}\n        </div>\n        <div className={classNames(\"hidee\")}>\n            <Code\n              hackKey={hackKey}\n              value={value}\n              options={options}\n              onValueChange={onValueChange}\n              registerAPI={registerAPI}\n            />\n          {extra}\n        </div>\n    </div>\n  );\n};\n","import mime from 'mime-types';\nimport React from 'react';\n// import EditLine from './EditLine.js';\nimport CodeArea from './CodeArea.js';\n\nexport default class File extends React.Component {\n  componentDidMount() {\n    const {register} = this.props;\n    register(this, {\n      goToLine: (data) => {\n        const {title} =  this.props;\n        if (data.section === title) {\n          this.codeAPI.goToLine(data.lineNo, data.colNo);\n          return true;\n        }\n      },\n      refresh: _ => this.codeAPI.refresh(),\n      focus: _ => this.codeAPI.focus(),\n    });\n  }\n  componentWillUnmount() {\n    const {unregister} = this.props;\n    unregister(this);\n  }\n  handleRegisterAPI = (api) => {\n    this.codeAPI = api;\n  }\n  render() {\n    const props = this.props;\n    const {title, hackKey} = props;\n    const heading = (\n      <div style={{width: '100%'}}>{title}</div>\n    );\n    const mimeType = mime.lookup(title) || (title.toLowerCase() === 'javascript' ? 'application/javascript' : 'application/octet-stream');\n    const options = {\n      ...props.options,\n      editor: {\n        ...(props.options?.editor && props.options.editor),\n        mode: mimeType,\n      },\n    };\n    return (\n      <CodeArea\n        key={hackKey}\n        {...props}\n        options={options}\n        heading={heading}\n        registerAPI={this.handleRegisterAPI}\n      />\n    );\n  }\n}\n\n/*\nexport default function TestArea(props) {\n  const {desc, title, onTitleChange, hackKey} = props;\n  const heading = (\n    <div>{title}</div>\n    <EditLine\n      placeholder={desc}\n      value={title}\n      onChange={onTitleChange}\n    />\n  );\n\n  return (\n    <CodeArea key={hackKey} {...props} heading={heading} />\n  );\n}\n*/\n","import React from 'react';\nimport Split, {moveGuttersComputeNewSizes} from 'react-split-it';\n\nimport * as model from './model.js';\nimport File from './File.js';\n\nconst makeId = _ => `${Date.now()}+${Math.random()}`;\n\nexport default class Files extends React.Component {\n  constructor(props) {\n    super(props);\n    this.files = new Map();\n    this.fileToKeyMap = new Map();\n  }\n  handleRegister = (file, api) => {\n    this.files.set(file, api);\n  }\n  handleUnregister = (file) => {\n    this.files.delete(file);\n  }\n  getFileKey(test) {\n    let key = this.fileToKeyMap.get(test);\n    if (!key) {\n      key = makeId();\n      this.fileToKeyMap.set(test, key);\n    }\n    return key;\n  }\n  componentDidMount() {\n    const {registerAPI} = this.props;\n    registerAPI({\n      goToLine: (data) => {\n        this.files.forEach(api => {\n          api.goToLine(data);\n        });\n      },\n    });\n  }\n  render() {\n    const {hackKey, data, extra, direction} = this.props;\n    return (\n      <div className=\"codes\">\n        <Split\n          direction={direction}\n          minSize={0}\n          computeNewSizesFn={moveGuttersComputeNewSizes}\n        >\n        {\n          data.files.map((file, ndx) => {\n            return (\n              <File\n                key={`ca${this.getFileKey(file)}`}\n                hackKey={hackKey}\n                desc=\"filename\"\n                title={file.name}\n                value={file.content}\n                onTitleChange={name => model.setFileName(ndx, name)}\n                onValueChange={value => model.setFileContent(ndx, value)}\n                register={this.handleRegister}\n                unregister={this.handleUnregister}\n                extra={extra}\n              />\n            );\n          })\n        }\n        </Split>\n      </div>\n    );\n  }\n}\n\n//         {/*<button onClick={() => model.addFile()}>+</button>*/}\n","import React from 'react';\n\nconst ServiceContext = React.createContext();\nexport default ServiceContext;\n","import React from 'react';\n\nimport {classNames} from './css-utils';\nimport ServiceContext from './ServiceContext.js';\n\nfunction basename(url) {\n  const ndx = url.lastIndexOf('/');\n  return ndx >= 0 ? url.substr(ndx + 1) : url;\n}\n\nfunction isMsgSame(oldMsg, newMsg) {\n  if (!!oldMsg !== !!newMsg) {\n    return false;\n  }\n  const keys = Object.keys(oldMsg).filter(key => key !== 'count');\n  if (keys.length !== Object.keys(newMsg).length) {\n    return false;\n  }\n  for (const key of keys) {\n    if (oldMsg[key] !== newMsg[key]) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport class LogManager extends EventTarget {\n  constructor() {\n    super();\n    this._msgs = [];\n  }\n  _notify() {\n    this.dispatchEvent(new Event('change'));\n  }\n  clear = () => {\n    this._msgs = [];\n    this._notify();\n  }\n  addMsg = (data) => {\n    const lastData = this._msgs[this._msgs.length - 1];\n    if (isMsgSame(lastData, data)) {\n      lastData.count = (lastData.count || 0) + 1;\n    } else {\n      this._msgs.push(data);\n    }\n    this._notify();\n  }\n  getMsgs() {\n    return this._msgs\n  }\n}\n\nexport default class Log extends React.Component {\n  constructor(props) {\n    super(props);\n    this.logMessagesRef = React.createRef();\n  }\n  handleChange = () => {\n    this.forceUpdate();\n  }\n  componentDidMount() {\n    const {logManager} = this.context;\n    logManager.addEventListener('change', this.handleChange);\n  }\n  componentWillUnmount() {\n    const {logManager} = this.context;\n    logManager.removeEventListener('change', this.handleChange);\n  }\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    if (snapshot !== null) {\n      // if we were at the bottom of the log then\n      // stay at the bottom of the log\n      if (snapshot < 1) {\n        const elem = this.logMessagesRef.current;\n        elem.scrollTop = elem.scrollHeight - elem.parentElement.clientHeight;\n      }\n    }\n  }\n  getSnapshotBeforeUpdate(prevProps, prevState) {\n    const elem = this.logMessagesRef.current;\n    return elem.scrollHeight - (elem.scrollTop + elem.parentElement.clientHeight);\n  }\n  render() {\n    const {onGoToLine} = this.props;\n    const {logManager} = this.context;\n    return (\n      <div className=\"logger\">\n        <div className=\"log-messages layout-scrollbar\" ref={this.logMessagesRef}>\n          { logManager.getMsgs().map((msg, ndx) => {\n              const tooltip = !msg.section;\n              return (\n                <div className={classNames('log-line',{[msg.type]: true})} key={`l${ndx}`}>\n                  <div className={msg.count ? \"count\" : \"no-count\"}>{msg.count ? msg.count : ''}</div>\n                  <div className=\"msg\">\n                    {msg.msg}\n                    <div\n                      className={classNames('file', {tooltip, fileLink: msg.section})}\n                      onClick={() => onGoToLine(msg)}\n                      data-tooltip={`${msg.section || msg.url}:${msg.lineNo}`}\n                    >\n                      {msg.section || basename(msg.url)}:{msg.lineNo}\n                    </div>\n                  </div>\n                </div>\n              );\n            })}\n        </div>\n      </div>\n    );\n  }\n}\n\nLog.contextType = ServiceContext;","import React from 'react';\n\nimport {isDevelopment} from './flags.js';\nimport ServiceContext from './ServiceContext.js';\nimport {createURL} from './url.js';\nimport * as winMsgMgr from './window-message-manager.js';\n\nexport default class Runner extends React.Component {\n  constructor(props) {\n    super(props);\n    this.runnerRef = React.createRef();\n  }\n  handleJSLog = (data) => {\n    const {logManager} = this.context;\n    logManager.addMsg(data);\n  }\n  handleJSError = (data) => {\n    const {logManager} = this.context;\n    logManager.addMsg({...data, type: 'error'});\n  }\n  handleGimmeDaCodez = () => {\n    this.iframe.contentWindow.postMessage({\n      type: 'run',\n      data: this.data,\n    }, \"*\");\n  }\n  componentDidMount() {\n    const {registerAPI} = this.props;\n    registerAPI({\n      run: (data, blank) => {\n        this.data = data;\n        this.removeIFrame();\n        const iframe = document.createElement('iframe');\n        this.iframe = iframe;\n        iframe.src = isDevelopment\n            ? createURL(`http://${window.location.hostname}:8081/runner-03.html`, {url: `http://${window.location.hostname}:8080/jsgist-runner.js`})\n            : createURL('https://jsgistrunner.devcomments.org/runner-03.html', {url: 'https://jsgist.org/jsgist-runner.js'});\n        if (blank) {\n          iframe.style.background = 'none';\n        }\n        this.runnerRef.current.appendChild(iframe);\n      },\n    })\n    winMsgMgr.on('gimmeDaCodez', this.handleGimmeDaCodez);\n    winMsgMgr.on('jsLog', this.handleJSLog);\n    winMsgMgr.on('jsError', this.handleJSError);\n  }\n  removeIFrame() {\n    if (this.iframe) {\n      this.iframe.remove();\n      this.iframe.src = 'about:blank';\n      this.iframe = undefined;\n    }\n  }\n  componentWillUnmount() {\n    this.removeIFrame();\n    winMsgMgr.remove('gimmeDaCodez', this.handleGimmeDaCodez);\n    winMsgMgr.remove('jsLog', this.handleJSLog);\n    winMsgMgr.remove('jsError', this.handleJSError);\n  }\n  handleMessage = (e) => {\n    const {type, data} =  e.data;\n    const fn = this.handlers[type];\n    if (fn) {\n      fn(data);\n    }\n  }\n  render() {\n    return (\n      <div className=\"runner\" ref={this.runnerRef}></div>\n    )\n  }\n}\n\nRunner.contextType = ServiceContext;","import React from 'react';\nimport Split from 'react-split-it';\n\nimport Files from './Files.js';\nimport Log from './Log.js';\nimport Runner from './Runner.js';\n\nexport default class Layout3Vertical extends React.Component {\n  registerFilesAPI = (api) => {\n    this.filesAPI = api;\n  }\n  handleGoToLine = (data) => {\n    this.filesAPI.goToLine(data);\n  }\n  render() {\n    const {hackKey, data, registerRunnerAPI} = this.props;\n    return (\n      <Split direction=\"horizontal\" minSize={0}>\n        <div className=\"left\">\n          <Files\n            direction=\"vertical\"\n            data={data}\n            hackKey={hackKey}\n            registerAPI={this.registerFilesAPI}\n          />\n        </div>\n        <div className=\"right\">\n          <Split direction=\"vertical\" sizes={[0.9, 0.1]}>\n            <Runner registerAPI={registerRunnerAPI} />\n            <Log onGoToLine={this.handleGoToLine} />\n          </Split>\n        </div>\n      </Split>\n    );\n  };\n}","import React from 'react';\nimport Split from 'react-split-it';\n\nimport Files from './Files.js';\nimport Log from './Log.js';\nimport Runner from './Runner.js';\n\nexport default class Layout3Horizontal extends React.Component {\n  registerFilesAPI = (api) => {\n    this.filesAPI = api;\n  }\n  handleGoToLine = (data) => {\n    this.filesAPI.goToLine(data);\n  }\n  render() {\n    const {hackKey, data, registerRunnerAPI} = this.props;\n    return (\n      <Split direction=\"vertical\" minSize={0}>\n        <div className=\"layout-3-horizontal-top\">\n          <Files direction=\"horizontal\" data={data} hackKey={hackKey} registerAPI={this.registerFilesAPI} />\n        </div>\n        <div className=\"layout-3-horizontal-bottom\">\n          <Split direction=\"vertical\" sizes={[0.9, 0.1]}>\n            <Runner registerAPI={registerRunnerAPI} />\n            <Log onGoToLine={this.handleGoToLine} />\n          </Split>\n        </div>\n      </Split>\n    );\n  };\n}","export const noop = () => {};\nexport const wait = ms => new Promise(resolve => setTimeout(resolve, ms));\n\nfunction findNdx(files, endings) {\n  // calling toLowerCase a bunch is bad but there will never be more than a few files\n  for (const ending of endings) {\n    const ndx = files.findIndex(file => file.name.toLowerCase().endsWith(ending.toLowerCase()));\n    if (ndx >= 0) {\n      return ndx;\n    }\n  }\n  return -1;\n}\n\nexport function getOrFindNdx(files, name, ...endings) {\n  const ndx = files.findIndex(f => f.name.toLowerCase() === name.toLowerCase);\n  if (ndx >= 0) {\n    return ndx;\n  }\n  return findNdx(files, endings);\n}\n\nexport function getOrFind(files, ...args) {\n  const ndx = getOrFindNdx(files, ...args);\n  return ndx >= 0 ? files[ndx] : '';\n}\n\nconst stringify = options => Object.entries(options).map(([key, value]) => `${key}=${value}`).join(',');\n\nexport function createPopup(url, config = {}) {\n  const width = config.width || 500;\n  const height = config.height || 500;\n  const options = {\n    width: width,\n    height: height,\n    top: window.screenY + ((window.outerHeight - height) / 2.5),\n    left: window.screenX + ((window.outerWidth - width) / 2)\n  };\n  return window.open(url, '_blank', stringify(options, ','));\n}","import React from 'react';\nimport Split from 'react-split-it';\n\nimport File from './File.js';\nimport Log from './Log.js';\nimport * as model from './model.js';\nimport Runner from './Runner.js';\nimport {getOrFindNdx} from './utils.js';\n\nfunction NamedFile(props) {\n  const {data, ndx, hackKey, register, unregister} = props;\n  const file = data.files[ndx];\n  return (\n    <File\n      //key={`ca${this.getFileKey(file)}`}\n      hackKey={hackKey}\n      desc=\"filename\"\n      title={file.name}\n      value={file.content}\n      onTitleChange={name => model.setFileName(ndx, name)}\n      onValueChange={value => model.setFileContent(ndx, value)}\n      register={register}\n      unregister={unregister}\n    />\n  );\n}\n\n\nexport default class Layout2x2 extends React.Component {\n  constructor(props) {\n    super(props);\n    this.files = new Map();\n  }\n  handleRegister = (file, api) => {\n    this.files.set(file, api);\n  }\n  handleUnregister = (file) => {\n    this.files.delete(file);\n  }\n  handleGoToLine = (data) => {\n    this.files.forEach(api => {\n      api.goToLine(data);\n    });\n  }\n  render() {\n    const {hackKey, data, registerRunnerAPI} = this.props;\n    const files = data.files;\n    const mainHTMLNdx = getOrFindNdx(files, 'index.html', 'html');\n    const mainJSNdx = getOrFindNdx(files, 'index.js', 'js', 'js', 'javascript');\n    const mainCSSNdx = getOrFindNdx(files, 'index.css', 'css');\n\n    return (\n      <Split direction=\"horizontal\" minSize={0}>\n        <div className=\"left\">\n          <Split direction=\"vertical\" minSize={0} sizes={[0.4, 0.6]}>\n            <NamedFile hackKey={hackKey} register={this.handleRegister} unregister={this.handleUnregister} data={data} ndx={mainHTMLNdx} />\n            <NamedFile hackKey={hackKey} register={this.handleRegister} unregister={this.handleUnregister} data={data} ndx={mainJSNdx} />\n          </Split>\n        </div>\n        <div className=\"right\">\n          <Split direction=\"vertical\" sizes={[0.4, 0.5, 0.1]}>\n            <NamedFile hackKey={hackKey} register={this.handleRegister} unregister={this.handleUnregister} data={data} ndx={mainCSSNdx} />\n            <Runner registerAPI={registerRunnerAPI} />\n            <Log onGoToLine={this.handleGoToLine} />\n          </Split>\n        </div>\n      </Split>\n    );\n  };\n}","import React from 'react';\nimport Split from 'react-split-it';\n\nimport File from './File.js';\nimport Log from './Log.js';\nimport * as model from './model.js';\nimport Runner from './Runner.js';\n\nconst makeId = _ => `${Date.now()}-${Math.random()}`;\n\nfunction fixSizes(sizes, lastSizes, ndx, show) {\n  if (show) {\n    // we're adding a size back in.\n    const oldSize = lastSizes[ndx];\n    const availableSpace = 1 - oldSize;\n    const s = sizes.filter((_, i) => ndx !== i);\n    const len = s.reduce((sum, size) => sum + size, 0);\n    const newSizes = s.map(size => size / len * availableSpace);\n    newSizes.splice(ndx, 0, oldSize);\n    return newSizes;\n  } else {\n    // we're removing a size\n    const s = sizes.map((size, i) => ndx === i ? 0 : size);\n    const len = s.reduce((sum, size) => sum + size, 0);\n    const newSizes = s.map(size => size / len);\n    return newSizes;\n  }\n}\n\nexport default class Layout3Horizontal extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showResult: true,\n      showLog: true,\n      sizes: [0.45, 0.45, 0.1],\n      currentNdx: 2,\n    };\n    this.lastSizes = this.state.sizes.slice();\n    this.files = new Map();\n    this.fileToKeyMap = new Map();\n  }\n  handleRegister = (file, api) => {\n    this.files.set(file, api);\n  }\n  handleUnregister = (file) => {\n    this.files.delete(file);\n  }\n  getFileKey(test) {\n    let key = this.fileToKeyMap.get(test);\n    if (!key) {\n      key = makeId();\n      this.fileToKeyMap.set(test, key);\n    }\n    return key;\n  }\n  setSizes = (sizes) => {\n    if (this.state.currentNdx >= 0) { this.lastSizes[0] = sizes[0] }\n    if (this.state.showResult) { this.lastSizes[1] = sizes[1]; }\n    if (this.state.showLow) { this.lastSizes[2] = sizes[2]; }\n    this.setState({sizes});\n  }\n  handleGoToLine = (data) => {\n    // this.files is Map of File components\n    this.files.forEach((api, file) => {\n      if (api.goToLine(data)) {\n        const {files} = this.props.data;\n        // this is gross (T_T)\n        const ndx = files.findIndex(file => file.name === data.section);\n        if (ndx !== this.state.currentNdx) {\n          this.handleOnChange(ndx);\n        }\n      }\n    });\n  }\n  handleOnChange = (ndx) => {\n    const currentNdx = this.state.currentNdx === ndx ? -1 : ndx;\n    this.setState({\n      currentNdx,\n      sizes: fixSizes(this.state.sizes, this.lastSizes, 0, currentNdx >= 0),\n    });\n  }\n  toggleShowLog = () => {\n    const showLog = !this.state.showLog;\n    this.setState({\n      showLog,\n      sizes: fixSizes(this.state.sizes, this.lastSizes, 2, showLog),\n    });\n  }\n  toggleShowResult = () => {\n    const showResult = !this.state.showResult;\n    this.setState({\n      showResult,\n      sizes: fixSizes(this.state.sizes, this.lastSizes, 1, showResult),\n    });\n  }\n  componentDidUpdate() {\n    if (this.previousNdx !== this.state.currentNdx) {\n      this.previousNdx = this.state.currentNdx;\n      this.files.forEach(api => {\n        api.refresh();\n        api.focus();\n      });\n    }\n  }\n  render() {\n    const {hackKey, data, registerRunnerAPI} = this.props;\n    const {showResult, showLog, sizes, currentNdx} = this.state;\n    const resultStyle = {...(!showResult && {display: 'none'})}\n    const logStyle = {...(!showLog && {display: 'none'})}\n    return (\n      <div className=\"layout-tabbed\">\n        <div className=\"layout-tabbed-top\">\n          <div className=\"tab-tabs\">\n            {\n              data.files.map((file, ndx) => {\n                const key = `ca${this.getFileKey(file)}`;\n                return (\n                  <React.Fragment key={key}>\n                    <input\n                      type=\"radio\"\n                      name=\"tabbed-files\"\n                      id={key}\n                      checked={ndx === currentNdx}\n                      onClick={_ => this.handleOnChange(ndx)}\n                      onChange={_ => _} /* this is to shut up react */\n                    />\n                    <label htmlFor={key}>{file.name}</label>\n                  </React.Fragment>\n                );\n              })\n            }\n            <input\n              type=\"checkbox\"\n              checked={showResult}\n              onChange={this.toggleShowResult}\n              id=\"result\"\n            />\n            <label htmlFor=\"result\">result</label>\n            <input\n              type=\"checkbox\"\n              checked={showLog}\n              onChange={this.toggleShowLog}\n              id=\"log\"\n            />\n            <label htmlFor=\"log\">log</label>\n          </div>\n        </div>\n        <Split direction=\"vertical\" minSize={0} sizes={sizes} onSetSizes={this.setSizes}>\n          <div className=\"tab-content\">\n          {\n            data.files.map((file, ndx) => {\n              const key = `ca${this.getFileKey(file)}`;\n              return (\n                <div key={key} style={{...(ndx !== currentNdx && {display: 'none'})}}>\n                  <File\n                    hackKey={hackKey}\n                    desc=\"filename\"\n                    title={file.name}\n                    value={file.content}\n                    onTitleChange={name => model.setFileName(ndx, name)}\n                    onValueChange={value => model.setFileContent(ndx, value)}\n                    register={this.handleRegister}\n                    unregister={this.handleUnregister}\n                  />\n                </div>\n              );\n            })\n          }\n          </div>\n          <div className=\"layout-tabbed-result\" style={resultStyle}><Runner registerAPI={registerRunnerAPI} /></div>\n          <div className=\"layout-tabbed-log\" style={logStyle}><Log onGoToLine={this.handleGoToLine} /></div>\n        </Split>\n      </div>\n    );\n  };\n}","import {storageManager} from './globals.js';\nimport * as model from './model.js';\n\nconst settingsKey = 'ui-settings';\n\nlet initialized = false;\nlet settings;\n\nfunction init() {\n  if (initialized) {\n    return;\n  }\n  initialized = true;\n  try {\n    settings = JSON.parse(storageManager.get(settingsKey, true));\n    if (!settings) {\n      throw new Error('no settings');\n    }\n  } catch (e) {\n    settings = {\n      layout: (window.screen.width < 540 || window.screen.height << 540) ? 3 : 0,\n    };\n  }\n}\n\nmodel.add('settings', settings);\n\nexport function set(name, value) {\n  settings[name] = value;\n  const json = JSON.stringify(settings);\n  storageManager.set(settingsKey, json, true);\n  model.set('settings', settings);\n}\n\nexport function get() {\n  init();\n  return settings;\n}\n\nexport function subscribe(fn) {\n  model.subscribe('settings', fn);\n}\n\nexport function unsubscribe(fn) {\n  model.unsubscribe('settings', fn);\n}\n","import React from 'react';\n\nimport Layout3Vertical from './Layout3Vertical.js';\nimport Layout3Horizontal from './Layout3Horizontal.js';\nimport Layout2x2 from './Layout2x2.js';\nimport LayoutTabbed from './LayoutTabbed.js';\n\nimport * as uiModel from './ui-model.js';\n\nconst layoutModes = [\n  Layout3Vertical,\n  Layout3Horizontal,\n  Layout2x2,\n  LayoutTabbed,\n];\n\nexport default class IDE extends React.Component {\n  componentDidMount() {\n    uiModel.subscribe(this.handleChange);\n  }\n  componentWillUnmount() {\n    uiModel.unsubscribe(this.handleChange);\n  }\n  handleChange = () => {\n    this.forceUpdate();\n  }\n  render() {\n    const mode = uiModel.get().layout;\n    return React.createElement(layoutModes[mode], this.props);\n  }\n}\n\n","import Ajv from 'ajv';\nimport * as model from './model.js';\nimport {storageManager} from './globals.js';\nconst gistsKey = 'gists';\n\nconst gistSchema = {\n  \"type\": \"object\",\n  \"properties\": {\n    \"name\": { \"type\": \"string\" },\n    \"date\": { \"type\": \"string\" },\n  },\n  \"required\": [\"name\", \"date\"],\n};\n\nconst gistsSchema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"type\": \"object\",\n  \"additionalProperties\": gistSchema,\n};\nconst ajv = new Ajv() // options can be passed, e.g. {allErrors: true}\nconst gistsValidator = ajv.compile(gistsSchema);\nconst gistValidator = ajv.compile(gistSchema);\n\nfunction getStoredGists() {\n  try {\n    const gists = JSON.parse(storageManager.get(gistsKey));\n    if (!gistsValidator(gists)) {\n      storageManager.delete(gistsKey);\n      throw new Error();\n    }\n    return gists;\n  } catch(e) {\n    return {};\n  }\n}\n\nmodel.add('gists', getStoredGists());\n\n// does this need to be centralized?\nstorageManager.subscribe(gistsKey, () => {\n  model.set('gists', getStoredGists());\n});\n\nexport function addGist(id, name, date) {\n  const gist = {name, date};\n  if (!gistValidator(gist)) {\n    throw new Error(`gist not valid:\\n${gistValidator.errors.map(e => `${e.message}: ${e.dataPath}`)}`)\n  }\n  const gists = {...model.get('gists')};\n  gists[id] = gist;\n  model.set('gists', gists);\n  saveGistsToLocalStorage(gists);\n}\n\nfunction saveGistsToLocalStorage(gists) {\n  // send to other windows\n  storageManager.set(gistsKey, JSON.stringify(gists));\n}\n\nexport function getGists() {\n  return model.get('gists');\n}\n\nexport function setGists(gists) {\n  if (!gistsValidator(gists)) {\n    throw new Error(`gists not valid:\\n${gistValidator.errors.map(e => `${e.message}: ${e.dataPath}`)}`)\n  }\n  model.set('gists', gists);\n  saveGistsToLocalStorage(gists);\n}\n\nexport function subscribe(fn) {\n  model.subscribe('gists', fn);\n}\n\nexport function unsubscribe(fn) {\n  model.unsubscribe('gists', fn);\n}\n","import React from 'react';\nimport {classNames} from './css-utils.js';\nimport * as gists from './gists.js';\nimport ServiceContext from './ServiceContext.js';\n\nexport default class LoadGist extends React.Component {\n  constructor () {\n    super();\n    this.state = {\n      loading: false,\n      gists: gists.getGists(),\n    };\n  }\n  handleNewGists = (gists) => {\n    this.setState({gists});\n  }\n  onPatChange = () => {\n    this.forceUpdate();\n    const {oauthManager} = this.context;\n    const pat = oauthManager.pat();\n    if (pat) {\n      this.loadGists();\n    }\n  }\n  componentDidMount() {\n    const {oauthManager} = this.context;\n    gists.subscribe(this.handleNewGists);\n    oauthManager.subscribe(this.onPatChange);\n  }\n  componentWillUnmount() {\n    const {oauthManager} = this.context;\n    gists.unsubscribe(this.handleNewGists);\n    oauthManager.unsubscribe(this.onPatChange);\n  }\n  loadGists = async(e) => {\n    const {addError, github, oauthManager} = this.context;\n    this.setState({loading: true});\n    github.setPat(oauthManager.pat());\n    try {\n      const gistArray = await github.getUserGists();\n      const gistsById = gistArray.reduce((gists, gist) => {\n        gists[gist.id] = {\n          name: gist.description,\n          date: gist.updated_at,\n        };\n        return gists;\n      }, {});\n      gists.setGists(gistsById);\n    } catch (e) {\n      addError(`could not load gists: ${e}`);\n    }\n    this.setState({loading: false});\n  }\n  renderLogin() {\n    const {oauthManager} = this.context;\n    return (\n      <div>\n        <button\n          onClick={oauthManager.login}\n        >Login with github</button>\n      </div>\n    );\n  }\n  renderLoad() {\n    const {oauthManager} = this.context;\n    const {gists, loading} = this.state;\n    const pat = oauthManager.pat();\n    const canLoad = !!pat && !loading;\n    const gistArray = Object.entries(gists).map(([id, {name, date}]) => {\n      return {id, name, date};\n    }).sort((b, a) => a.date < b.date ? -1 : ((a.date > b.date) ? 1 : 0));\n    return (\n      <div>\n        <p>\n          <button\n            className={classNames({disabled: !canLoad})}\n            onClick={this.loadGists}\n          >{gistArray.length ? 'Reload' : 'Load'} Your Gists</button>\n        </p>\n         {\n            gistArray.length ?\n              <table className=\"gists\">\n                <tbody>\n                {\n                  gistArray.map((gist, ndx) => {\n                    return (\n                      <tr key={`g${ndx}`}>\n                        <td><a href={`${window.location.origin}?src=${encodeURIComponent(gist.id)}`}>{gist.name}</a></td>\n                        <td>{gist.date.substring(0, 10)}</td>\n                      </tr>\n                    );\n                  })\n                }\n                </tbody>\n              </table> : []\n          }\n      </div>\n    );\n  }\n  render() {\n    const {oauthManager} = this.context;\n    const pat = oauthManager.pat();\n    return pat ? this.renderLoad() : this.renderLogin();\n  }\n}\n\nLoadGist.contextType = ServiceContext;\n","import React, {useContext, useState} from 'react';\nimport Code from './Code.js';\nimport * as model from './model.js';\nimport ServiceContext from './ServiceContext.js';\n\nexport default function LoadJSON(props) {\n  const [json, setJSON] = useState('');\n  const {addError} = useContext(ServiceContext);\n  function load() {\n    const {onLoad} = props;\n    try {\n      const data = JSON.parse(json);\n      model.setData(data);\n      onLoad();\n    } catch (e) {\n      addError(`bad json: ${e}`);\n    }\n  }\n  return (\n    <div>\n      <div style={{height: '100px'}}>\n        <Code\n          value={json}\n          onValueChange={setJSON}\n\n        />\n      </div>\n      <p>\n        <button onClick={load}>Load JSON</button>\n      </p>\n    </div>\n  )\n}","import React, {useContext, useState} from 'react';\nimport EditLine from './EditLine';\nimport * as model from './model.js';\nimport ServiceContext from './ServiceContext.js';\n\nexport default function LoadURL(props) {\n  const [url, setUrl] = useState('');\n  const {addError} = useContext(ServiceContext);\n  async function loadUrl() {\n    const {onLoad} = props;\n    try {\n      const req = await fetch(url);\n      const data = await req.json();\n      model.setData(data);\n      onLoad()\n    } catch(e) {\n      addError(`could not load url: ${e}`);\n    }\n  } \n  return (\n    <div>\n      <EditLine value={url} onChange={setUrl} placeholder=\"url-to-json\" />\n      <p>\n        <button onClick={loadUrl}>Load URL</button>\n      </p>\n    </div>\n  )\n}","import React from 'react';\n\nexport default function Section(props) {\n  const {heading, children} = props;\n  return (\n    <div className=\"section\">\n      <div className=\"section-heading\">{heading}</div>\n      <div className=\"section-content\">\n        {children}\n      </div>\n    </div>\n  );\n}","import React from 'react';\nimport Dialog from './Dialog.js';\nimport LoadGist from './LoadGist.js';\nimport LoadJSON from './LoadJSON.js';\nimport LoadURL from './LoadURL.js';\nimport Section from './Section.js';\n\nexport default function Load(props) {\n  const {data, onLoad, onClose} = props;\n  return (\n    <Dialog title=\"Load\" onClose={onClose}>\n      <Section heading=\"Load Gist\">\n        <LoadGist data={data} onLoad={onLoad} />\n      </Section>\n      <Section heading=\"Load URL\">\n        <LoadURL data={data} onLoad={onLoad} />\n      </Section>\n      <Section heading=\"Load JSON\">\n        <LoadJSON data={data} onLoad={onLoad} />\n      </Section>\n    </Dialog>\n  )\n}\n","import {decode, encode} from 'base64-arraybuffer';\nimport {inflate, deflate} from 'uzip-module';\n\nconst utf8Encoder = new TextEncoder();\nconst utf8Decoder = new TextDecoder();\nconst compressedPrefix = 'cb64,';\nconst uncompressedPrefix = 'b64,';\n\nexport const isCompressedBase64 = s => s.startsWith(compressedPrefix) || s.startsWith(uncompressedPrefix);\nexport function compressedBase64ToJSON(src) {\n  const isCompressed = src.startsWith(compressedPrefix);\n  const prefix = isCompressed ? compressedPrefix : uncompressedPrefix;\n  const base64 = src.substr(prefix.length)\n     .replace(/-/g, '+')\n     .replace(/_/g, '/');\n  const raw = new Uint8Array(decode(base64));\n  const bin = isCompressed \n     ? inflate(raw)\n     : raw;\n  const json = utf8Decoder.decode(bin);\n  return JSON.parse(json);\n}\n\nexport function jsonToCompressedBase64(data) {\n  const json = JSON.stringify(data);\n  const bin = utf8Encoder.encode(json);\n  const compressed = deflate(bin);\n  const useCompressed = compressed.length < bin.length;\n  const base64 = encode(useCompressed ? compressed : bin)\n      .replace(/\\+/g, '-')    // better for URLs because + and / have to be escaped\n      .replace(/\\//g, '_');\n  const prefix = useCompressed ? compressedPrefix : uncompressedPrefix;\n  return `${prefix}${base64}`;\n}\n","\nimport {isCompressedBase64, compressedBase64ToJSON} from './compression.js';\n\nconst idRE = /^[a-z0-9]+$/i;\nexport const isGistId = s => idRE.test(s);\n\nexport async function loadGistFromSrc(src, github) {\n  if (isGistId(src)) {\n    const {data, rawData} = await github.getAnonGist(src);\n    return {data, id: src, rawData};\n  } else if (isCompressedBase64(src)) {\n    return {data: compressedBase64ToJSON(src)};\n  } else {\n    const res = await fetch(src);\n    const data = await res.json();\n    return {data};\n  }\n}\n","\nimport {clientId} from './globals.js';\nimport {createURL} from './url.js';\nimport {createPopup} from './utils.js';\nimport * as windowMessageManager from './window-message-manager.js';\n\nconst patKey = 'pat';\n\nconst getTokenURL = 'https://auth.jsgist.org/oauth-helper'\nexport default class OAuthManager {\n  constructor(storageManager) {\n    this._popup = undefined;\n    this._state = undefined;  // last state sent to auth\n    this._storageManager = storageManager;\n    windowMessageManager.on('auth', (data) => {\n      this._closePopup();\n      if (data.state === this.state) {\n        this.requestToken(data);\n      }\n    });\n  }\n  // TODO: rename this and decide if Github should be connected\n  pat() {\n    return this._storageManager.get(patKey);\n  }\n  subscribe(fn) {\n    this._storageManager.subscribe(patKey, fn);\n  }\n  unsubscribe(fn) {\n    this._storageManager.unsubscribe(patKey, fn);\n  }\n  _closePopup() {\n    if (this.popup) {\n      this.popup.close();\n      this.popup = undefined;\n    }\n  }\n  requestToken = async (auth) => {\n    try {\n      const params = {\n        client: clientId,\n        code: auth.code,\n      };\n      const url = createURL(getTokenURL, params);\n      const req = await fetch(url);\n      const data = await req.json();\n      if (!data.access_token) {\n        throw new Error(JSON.stringify(data));\n      }\n      this._storageManager.set(patKey, data.access_token);\n    } catch (e) {\n      console.error(e);\n    }\n  }\n  logout = () => {\n    this._storageManager.delete(patKey);\n  }\n  login = () => {\n    this._closePopup();\n    this.state = `${Date.now()}-${Math.random()}`;  // does this need to special? Seems like no\n    const url = createURL('https://github.com/login/oauth/authorize', {\n      client_id: clientId,\n      scope: 'gist',\n      state: this.state,\n    });\n    this.popup = createPopup(url);\n  }\n}","import React from 'react';\nimport {classNames} from './css-utils.js';\nimport * as gists from './gists.js';\nimport ServiceContext from './ServiceContext.js';\n\nexport default class SaveAsGist extends React.Component {\n  constructor () {\n    super();\n    this.state = {\n      saving: false,\n    };\n  }\n  componentDidMount() {\n    const {oauthManager} = this.context;\n    oauthManager.subscribe(this.onPatChange);\n  }\n  componentWillUnmount() {\n    const {oauthManager} = this.context;\n    oauthManager.unsubscribe(this.onPatChange);\n  }\n  onPatChange = () => {\n    this.forceUpdate();\n  }\n  saveNew = async() => {\n    const {oauthManager, github, addError} = this.context;\n    this.setState({saving: true});\n    const {data, onSave, onClose} = this.props;\n    let success = false;\n    github.setPat(oauthManager.pat());\n    try {\n      const {id, name, date} = await github.createGist(data);\n      gists.addGist(id, name, date);\n      onSave(id);\n      success = true;\n    } catch (e) {\n      addError(`could not create gist: ${e}`)\n    }\n    this.setState({saving: false});\n    if (success) {\n      onClose();\n    }\n  }\n  saveOverExisting = async() => {\n    const {oauthManager, github, addError} = this.context;\n    this.setState({saving: true});\n    const {data, gistId, onClose} = this.props;\n    let success = false;\n    github.setPat(oauthManager.pat());\n    try {\n      const {id, name, date} = await github.updateGist(gistId, data);\n      gists.addGist(id, name, date);\n      success = true;\n    } catch (e) {\n      addError(`could not update gist: ${e}`)\n    }\n    this.setState({saving: false});\n    if (success) {\n      onClose();\n    }\n  }\n  renderLogin() {\n    const {oauthManager} = this.context;\n    return (\n      <div>\n        <button\n          onClick={oauthManager.login}\n        >Login with github</button>\n      </div>\n    );\n  }\n  renderSave() {\n    const {saving} = this.state;\n    const {oauthManager} = this.context;\n    const pat = oauthManager.pat();\n    const {gistId} = this.props;\n    const canUpdate = pat && gistId;\n    return (\n      <div>\n        <button\n          className={classNames({disabled: saving})}\n          data-type=\"new\"\n          onClick={this.saveNew}\n        >Save to New Gist</button>\n        <button\n          className={classNames({disabled: !canUpdate || saving})}\n          data-type=\"update\"\n          onClick={this.saveOverExisting}\n        >Update Current Gist</button>\n      </div>\n    );\n  }\n  render() {\n    const {oauthManager} = this.context;\n    const pat = oauthManager.pat();\n    return pat ? this.renderSave() : this.renderLogin();\n  }\n}\n\nSaveAsGist.contextType = ServiceContext;","import React from 'react';\n\nexport default function SaveAsJSON(props) {\n  const {data} = props;\n  return (\n    <div>\n      <div>\n        Copy the text below, paste into the load ui or put somewhere on the net\n        and make your own URL with <code>{window.location.origin}?src=url-to-json</code>.\n      </div>\n      <pre style={{userSelect: 'all'}}>{JSON.stringify(data)}</pre>\n      <div><a href={`${window.location.origin}?src=${encodeURIComponent(`${window.location.origin}/example.json`)}`}>Example</a></div>\n    </div>\n  );\n}","import React from 'react';\n\nimport {jsonToCompressedBase64} from './compression.js';\n\nexport default function SaveAsURL(props) {\n  const {data} = props;\n  const src = jsonToCompressedBase64(data);\n  const url = `${window.location.origin}?src=${encodeURIComponent(src)}`;\n  return (\n    <div>\n      <div>Copy / bookmark the link below</div>\n      <a className=\"bookmark\" href={url} target=\"_blank\" rel=\"noopener noreferrer\">{url}</a>\n    </div>\n  );\n}\n","import React from 'react';\n\nexport default function Embed(props) {\n  const {gistId} = props;\n  return (\n    <div>\n      <div>\n        <p>\n        You can embed a jsGist by creating an iframe pointing to\n        {' '}<code>https://jsgist.org/embed.html?src=&lt;src&gt;</code>{' '} where\n        {' '}<code>&lt;src&gt;</code>{' '} is one of the forms above. Either\n        {' '}<code>?src=&lt;gist_id&gt;</code>{' '}or\n        {' '}<code>?src=&lt;base64url&gt;</code>{' '}or\n        {' '}<code>?src=&lt;url_to_json&gt;</code>{' '}.\n        You can also add {' '}<code>noheader=true</code>{' '} if you don't want the header\n        to appear. You can also just run them directly rather\n        than put in an iframe. <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://jsgist.org/embed.html?src=bad0a8491bd6614e729ff01cc14089c9\">[example]</a>{' '}\n        <a target=\"_blank\" rel=\"noopener noreferrer\" href={'https://jsgist.org/embed.html?src=bad0a8491bd6614e729ff01cc14089c9&noheader=true'}>[example no header]</a>\n        </p>\n        { gistId\n          ? (\n            <React.Fragment>\n              <p>\n              For example:\n              </p>\n              <pre><code>\n      &lt;iframe src=\"https://jsgist.org/embed.html?src={gistId}\" &gt;&lt;/iframe&gt;\n              </code></pre>\n            </React.Fragment>\n          )\n          : []\n        }\n        <p>\n        </p>\n      </div>\n    </div>\n  );\n}","import React from 'react';\nimport Dialog from './Dialog.js';\nimport SaveAsGist from './SaveAsGist.js';\nimport SaveAsJSON from './SaveAsJSON.js';\nimport SaveAsURL from './SaveAsURL.js';\nimport Section from './Section.js';\nimport Embed from './Embed.js';\n\nexport default function Save(props) {\n  const {data, gistId, onSave, onClose} = props;\n  return (\n    <Dialog title=\"Save As\" onClose={onClose}>\n      <Section heading=\"Save As Gist\">\n        <SaveAsGist gistId={gistId} data={data} onClose={onClose} onSave={onSave} />\n      </Section>\n      <Section heading=\"Save As URL\">\n        <SaveAsURL data={data} />\n      </Section>\n      <Section heading=\"Save As JSON\">\n        <SaveAsJSON data={data} />\n      </Section>\n      <Section heading=\"Embedding\">\n        <Embed gistId={gistId} />\n      </Section>\n    </Dialog>\n  )\n}\n","import React from 'react';\n\nimport Dialog from './Dialog.js';\nimport Section from './Section.js';\n\nimport verticalIcon from './icons/vertical-layout.svg';\nimport horizontalIcon from './icons/horizontal-layout.svg';\nimport twoByTwoIcon from './icons/two-by-two-layout.svg';\nimport tabbedIcon from './icons/tabbed-layout.svg';\n\nimport {classNames} from './css-utils.js';\nimport * as uiModel from './ui-model.js';\n\nfunction RadioOption(props) {\n  const {children, onChange, selected} = props;\n  return (\n    <div className={classNames({radioSelected: selected})} onClick={onChange}>\n      {children}\n    </div>\n  );\n}\n\nfunction Radio(props) {\n  const {selectedNdx, onChange, children} = props;\n\n  let childNdx = 0;\n  const newChildren = React.Children.map(children, (child) => {\n    if (!React.isValidElement(child)) {\n      return null;\n    }\n\n    const selected = childNdx === selectedNdx;\n\n    const id = childNdx;\n    childNdx += 1;\n    return React.cloneElement(child, {\n      //...child.props,\n      selected,\n      onChange: () => onChange(id),\n    });\n  });\n\n\n  return (\n    <div className=\"radio\">\n      {newChildren}\n    </div>\n  );\n}\n\nexport default class Settings extends React.Component {\n  //constructor(props) {\n  //  super(props);\n  //}\n  componentDidMount() {\n    uiModel.subscribe(this.handleChange);\n  }\n  componentWillUnmount() {\n    uiModel.unsubscribe(this.handleChange);\n  }\n  handleChange = () => {\n    this.forceUpdate();\n  }\n  handleLayoutChange = (v) => {\n    uiModel.set('layout', v);\n  }\n  render() {\n    const {onClose} = this.props;\n    return (\n      <Dialog title=\"Settings\" onClose={onClose}>\n        <Section heading=\"Layout\">\n          <div className=\"layout\">\n            <Radio selectedNdx={uiModel.get().layout} onChange={this.handleLayoutChange}>\n              <RadioOption><img src={verticalIcon} alt=\"vertical\"/></RadioOption>\n              <RadioOption><img src={horizontalIcon} alt=\"horizontal\"/></RadioOption>\n              <RadioOption><img src={twoByTwoIcon} alt=\"2x2\" /></RadioOption>\n              <RadioOption><img src={tabbedIcon} alt=\"tabbed\" /></RadioOption>\n            </Radio>\n          </div>\n        </Section>\n      </Dialog>\n    );\n  }\n}\n","import React from 'react';\n\nimport EditLine from './EditLine.js';\nimport Footer from './Footer.js';\nimport {storageManager} from './globals.js';\nimport GitHub from './GitHub.js';\nimport Head from './Head.js';\nimport Help from './Help.js';\nimport IDE from './IDE.js';\nimport Load from './Load.js';\nimport {loadGistFromSrc} from './loader.js';\nimport {LogManager} from './Log.js';\nimport * as model from './model.js';\nimport OAuthManager from './OAuthManager.js';\nimport Save from './Save.js';\nimport ServiceContext from './ServiceContext.js';\nimport Settings from './Settings.js';\n\nimport './App.css';\n\nconst backupKey = 'backup';\nconst noJSX = () => [];\nconst darkMatcher = window.matchMedia('(prefers-color-scheme: dark)');\nconst makeDisqusId = () => {\n  const loc = window.location;\n  const query = Object.fromEntries(new URLSearchParams(loc.search).entries());\n  const src = query.src;\n  return src\n      ? `${encodeURIComponent(src)}`\n      : '';\n}\n\nclass App extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      path: window.location.pathname,\n      disqusId: makeDisqusId(),\n      dark: darkMatcher.matches,\n      loading: false,\n      dialog: noJSX,\n      gistId: '',\n      messages: [],\n      userData: {},\n      updateVersion: 0,\n    };\n    this.github = new GitHub();\n    this.logManager = new LogManager();\n    this.oauthManager = new OAuthManager(storageManager);\n  }\n  componentDidMount() {\n    this.github.addEventListener('userdata', (e) => {\n      this.setState({\n        userData: e.data,\n      });\n    });\n    model.add('path', window.location.pathname);\n    model.subscribe('path', (newValue) => {\n      window.history.pushState({}, '', newValue);\n      this.setState({\n        path: newValue,\n        disqusId: makeDisqusId(),\n      });\n    });\n    // I still am not sure how I'm supposed to handle this.\n    // Putting my model in the state itself seems wrong\n    // and doesn't actually help since I'd have to \n    // generate an entirely new state object to change any\n    // nested property.\n    //\n    // Storing the data outside I see no way to tell\n    // components to re-render except to call forceUpdate\n    // which all the documentation says \"if you call this\n    // you're doing it wrong\".\n    //\n    // Redux is a joke. 50 lines code needed to set\n    // a single field. Repeat those 50 lines for every field.\n    // Things like redux-tools make it less to type those\n    // 50 lines but they still execute 50 to 500 lines of code\n    // just to set a single value.\n    model.subscribe(model.filesVersionKey, _ => {\n      this.forceUpdate();\n    });\n    // this is a hack because I can't figure out how to\n    // update the CodeMirror areas\n    model.subscribe('updateVersion', _ => {\n      this.setState({updateVersion: this.state.updateVersion + 1});\n    });\n\n    darkMatcher.addEventListener('change', () => {\n      this.setState({dark: darkMatcher.matches});\n    });\n\n    const query = Object.fromEntries(new URLSearchParams(window.location.search).entries());\n    const backup = storageManager.get(backupKey);\n    let loaded = false;\n    if (backup) {\n      try {\n        const data = JSON.parse(backup);\n        if (data.href === window.location.href) {\n          model.setData(data.data);\n          loaded = true;\n          this.addInfo('loaded backup from local storage')\n        }\n      } catch (e) {\n        console.log('bad backup')\n      }\n      storageManager.delete(backupKey);\n    }\n    if (!loaded && query.src) {\n      this.loadData(query.src);\n    }\n  }\n  async loadData(src) {\n    this.setState({loading: true});\n    let success = true;\n    try {\n      const {data, id} = await loadGistFromSrc(src, this.github);\n      model.setData(data);\n      if (id) {\n        this.setState({gistId: src})\n      }\n    } catch (e) {\n      success = false;\n      console.warn(e);\n      this.addError(`could not load jsGist: src=${src} ${e}`);\n    }\n    this.setState({loading: false});\n    if (success) {\n      this.handleRun();\n    }\n  }\n  addMsg = (msg, className) => {\n    switch (className) {\n      case 'error':\n        console.error(msg);\n        break;\n      default:\n        console.log(msg);\n        break;\n    }\n    this.setState({messages: [{msg, className}, ...this.state.messages]});\n    setTimeout(() => {\n      this.setState({messages: this.state.messages.slice(0, this.state.messages.length - 1)});\n    }, 5000);\n  }\n  addInfo = (msg) => this.addMsg(msg, 'info');\n  addError = (msg) => this.addMsg(msg, 'error');\n  closeDialog = () => {\n    this.setState({dialog: noJSX});\n  }\n  registerRunnerAPI = (api) => {\n    this.runnerAPI = api;\n    this.handleStop();\n  }\n  handleNew = async() => {\n    window.location.href = window.location.origin;\n    //window.history.pushState({}, '', `${window.location.origin}`);\n    //model.setData(model.getNewData());\n  }\n  handleRun = async () => {\n    storageManager.set(backupKey, JSON.stringify({\n      href: window.location.href,\n      data: model.getData(),\n    }));\n    this.logManager.clear();\n    console.clear();\n    this.runnerAPI.run(model.getData());\n  }\n  handleStop = async () => {\n    this.runnerAPI.run(model.getBlankData(), true);\n  }\n  handleSave = async () => {\n    this.setState({dialog: this.renderSave});\n  }\n  handleSettings = () => {\n    this.setState({dialog: this.renderSettings});\n  }\n  handleHelp = () => {\n    this.setState({dialog: this.renderHelp});\n  }\n  handleLoad = () => {\n    this.setState({dialog: this.renderLoad});\n  }\n  handleOnLoad = async() => {\n    this.setState({dialog: noJSX});\n    this.handleRun();\n  }\n  handleOnSave = (gistId) => {\n    window.history.pushState({}, '', `${window.location.origin}?src=${gistId}`);\n    this.setState({gistId});\n  }\n  handleAbort = () => {\n    this.abort();\n  };\n  renderHelp = () => {\n    return (<Help onClose={this.closeDialog} />);\n  }\n  renderSettings = () => {\n    return (\n      <Settings onClose={this.closeDialog} />\n    );\n  }\n  renderLoad = () => {\n    return (\n      <Load\n        onLoad={this.handleOnLoad}\n        onClose={this.closeDialog}\n        addError={this.addError}\n        github={this.github}\n      />\n    );\n  }\n  renderSave = () => {\n    const data = model.getData();\n    return (\n      <Save\n        onSave={this.handleOnSave}\n        onClose={this.closeDialog}\n        addError={this.addError}\n        github={this.github}\n        gistId={this.state.gistId}\n        data={data} />\n    );\n  }\n  render() {\n    const data = model.getData();\n    const {\n      loading,\n      dialog,\n      // disqusId,\n      updateVersion: hackKey,\n      userData,\n    } = this.state;\n    return (\n      <div className=\"App\">\n        <ServiceContext.Provider value={{\n          github: this.github,\n          oauthManager: this.oauthManager,\n          addError: this.addError,\n          addInfo: this.addInfo,\n          storageManager,\n          logManager: this.logManager,\n        }}>\n        <div className=\"content\">\n          <Head />\n          <div className=\"top\">\n            <div className=\"left\">\n              <div className=\"name\">\n                <EditLine value={data.name} onChange={v => model.setName(v)} />\n                {userData.name ? <div className=\"username\"><a target=\"_blank\" rel=\"noopener noreferrer\" href={`https://github.com/${userData.name}`}>{userData.name}</a></div> : [] }\n                {userData.avatarURL ? <a target=\"_blank\" rel=\"noopener noreferrer\" href={`https://github.com/${userData.name}`}><img className=\"avatar\" src={userData.avatarURL} alt=\"avatar\"/></a> : []}\n              </div>\n            </div>\n            <div className=\"right\">\n              <button tabIndex=\"1\" onClick={this.handleRun}>Run</button>\n              <button tabIndex=\"1\" onClick={this.handleStop}>Stop</button>\n              <button tabIndex=\"1\" onClick={this.handleSave}>Save</button>\n              <button tabIndex=\"1\" onClick={this.handleNew}>New</button>\n              <button tabIndex=\"1\" onClick={this.handleLoad}>Load</button>\n              <button tabIndex=\"1\" onClick={this.handleSettings} title=\"settings\"><img src={`${window.location.origin}/resources/images/gear.svg`} alt=\"settings\"></img></button>\n              <button tabIndex=\"1\" onClick={this.handleHelp} title=\"help\">?</button>\n            </div>\n          </div>\n          {\n            loading ? [] : (\n              <div className=\"bottom\">\n                <IDE\n                  hackKey={hackKey}\n                  data={data}\n                  registerRunnerAPI={this.registerRunnerAPI}\n                />\n              </div>\n            )\n          }\n        </div>\n        <Footer\n          disqusId={makeDisqusId()}\n          title={data.name}\n        />\n        {dialog()}\n        <div className=\"messages\">\n          {\n            this.state.messages.map(({msg, className}, i) => (<div className={className} key={`err${i}`}>{msg}</div>))\n          }\n        </div>\n        </ServiceContext.Provider>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport './scrollbars.js';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/vertical-layout.f248a432.svg\";","module.exports = __webpack_public_path__ + \"static/media/horizontal-layout.e3f3298b.svg\";","module.exports = __webpack_public_path__ + \"static/media/two-by-two-layout.23605ce8.svg\";","module.exports = __webpack_public_path__ + \"static/media/tabbed-layout.45000d71.svg\";"],"sourceRoot":""}