{"version":3,"sources":["scrollbars.js","EditLine.js","url.js","window-message-manager.js","Disqus.js","Footer.js","GitHub.js","Dialog.js","Help.js","css-utils.js","model.js","gists.js","utils.js","LoadGist.js","Code.js","LoadJSON.js","LoadURL.js","Section.js","Load.js","compression.js","loader.js","Log.js","SaveAsGist.js","SaveAsJSON.js","SaveAsURL.js","Embed.js","Save.js","Settings.js","Split.js","CodeArea.js","TestArea.js","Runner.js","App.js","serviceWorker.js","index.js","icons/vertical-layout.svg","icons/horizontal-layout.svg","icons/two-by-two-layout.svg"],"names":["parent","document","createElement","setAttribute","classList","add","child","appendChild","body","firstChild","clientWidth","removeChild","EditLine","props","type","onChange","e","target","value","placeholder","createURL","base","params","url","URL","searchParams","URLSearchParams","search","Object","entries","key","undefined","delete","set","toString","href","updateURL","window","location","history","replaceState","handlers","on","fn","fns","remove","push","ndx","indexOf","splice","addEventListener","data","Disqus","handleResize","iframeRef","current","style","height","React","createRef","winMsgMgr","this","nextProps","disqusId","title","ref","src","Component","Footer","className","Fragment","emptyValue","getGistContent","gist","JSON","parse","files","content","filter","map","name","file","startsWith","substr","length","concat","getAnonGist","gist_id","a","fetch","req","json","rawData","createGistData","reduce","trim","saveData","jsGistData","keys","stringify","filename","description","public","settings","private","GitHub","pat","user","unAuthorizedOctokit","Octokit","userAgent","userData","owner","login","avatarURL","avatar_url","getUserData","assign","event","Event","dispatchEvent","authorizedOctokit","auth","paginate","gists","list","_updateUserData","octokit","get","gistData","create","id","date","updated_at","update","EventTarget","Dialog","handleKeyDown","keyCode","onClose","removeEventListener","children","onClick","tabIndex","stopPropagation","Help","rel","camelCaseRE","toDash","_","left","right","camelCaseToDash","s","replace","toLowerCase","classNames","names","args","arg","join","validator","Ajv","compile","schema","trackedValues","getValueOrMakeNew","trackedValue","subscriptions","Set","initialValue","newValue","Error","subscribe","newTestData","getBlankData","origin","console","log","errors","notify","version","setData","newData","message","dataPath","validate","gistSchema","gistsSchema","ajv","gistsValidator","gistValidator","getStoredGists","localStorage","getItem","removeIem","addGist","model","saveGistsToLocalStorage","setItem","setGists","unsubscribe","noop","wait","ms","Promise","resolve","setTimeout","LoadGist","handlePATChange","setState","handleSubmit","preventDefault","loadGists","handleNewGists","loading","addError","github","state","setPat","getUserGists","gistArray","loggedIn","canLoad","sort","b","display","disabled","encodeURIComponent","substring","darkMatcher","matchMedia","Code","hackKey","options","onValueChange","isDarkMode","matches","mode","scrollbarStyle","theme","editor","onBeforeChange","LoadJSON","useState","setJSON","onLoad","LoadURL","setUrl","Section","heading","Load","utf8Encoder","TextEncoder","utf8Decoder","TextDecoder","isCompressedBase64","compressedBase64ToJSON","isCompressed","prefix","base64","raw","Uint8Array","decode","bin","inflate","idRE","isGistId","test","loadGistFromSrc","res","LogManager","clear","_msgs","_notify","addMsg","msg","Log","handleChange","forceUpdate","logManager","logMessagesRef","prevProps","prevState","snapshot","elem","scrollTop","scrollHeight","parentElement","clientHeight","getMsgs","SaveAsGist","saveFn","markToSaveNewGist","saveNew","markToUpdateGist","saveOverExisting","saving","onSave","success","createGist","gistId","updateGist","canSave","onSubmit","data-type","SaveAsJSON","userSelect","SaveAsURL","encode","compressed","deflate","useCompressed","jsonToCompressedBase64","Embed","Save","RadioOption","selected","radioSelected","Radio","selectedNdx","childNdx","newChildren","Children","isValidElement","cloneElement","class","v","verticalIcon","alt","horizontalIcon","twoByTwoIcon","distribute","items","buckets","extra","array","Array","fill","leap","halfLeap","i","getMouseOrTouchPosition","clientAxis","touches","getDirectionProps","direction","dimension","position","positionEnd","clientSize","width","computeNewSizes","startSizes","currentSizes","prevPaneNdx","gutterReservedSizesPX","minSizePX","deltaPX","outerSizePX","nextPaneNdx","prevPaneStartSizePX","Math","ceil","spaceUsedByBothElementsPX","prevPaneNewSizePX","min","max","nextPaneNewSizePX","slice","stopMobileBrowserFromScrolling","Gutter","handleMouseDownAndTouchStart","onMouseDownAndTouchStart","elementRef","passive","dragging","GManSplit","_setSizes","sizes","handleMouseUpAndTouchEnd","handleMouseAndTouchMove","gutterSize","minSize","computeNewSizesFn","onSetSizes","propSizes","mouseStart","stateSizes","setSizes","numPanes","prototype","call","recomputeSizes","numChildren","count","newSizes","totalSize","sum","normalizeSizes","totalSizePX","addSpaceForChildren","size","rest","totalGutterSpace","gutterStyle","gutterReservedSizes","first","forEach","CodeArea","TestArea","mimeType","mime","lookup","Runner","handleJSLog","handleJSError","lineNo","colNo","section","handleGimmeDaCodez","iframe","contentWindow","postMessage","handleMessage","runnerRef","registerRunnerAPI","run","blank","removeIFrame","background","noJSX","makeDisqusId","loc","fromEntries","App","error","messages","addInfo","closeDialog","dialog","api","runnerAPI","handleStop","handleNew","handleRun","handleSave","renderSave","handleSettings","renderSettings","handleHelp","renderHelp","handleLoad","renderLoad","handleOnLoad","handleOnSave","pushState","handleAbort","abort","path","pathname","dark","dataVersion","updateVersion","query","backup","loaded","removeItem","loadData","warn","desc","onTitleChange","newName","Boolean","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","module","exports"],"mappings":"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","file":"static/js/main.b57699df.chunk.js","sourcesContent":["import './scrollbars.css';\n\n/*\n * Scrollbar Width Test\n * Adds `layout-scrollbar-obtrusive` class to body if scrollbars use up screen real estate\n */\nconst parent = document.createElement(\"div\");\nparent.setAttribute(\"style\", \"width:30px;height:30px;\");\nparent.classList.add('scrollbar-test');\n\nconst child = document.createElement(\"div\");\nchild.setAttribute(\"style\", \"width:100%;height:40px\");\nparent.appendChild(child);\ndocument.body.appendChild(parent);\n\n// Measure the child element, if it is not\n// 30px wide the scrollbars are obtrusive.\nconst scrollbarWidth = 30 - parent.firstChild.clientWidth;\nif(scrollbarWidth) {\n  document.body.classList.add(\"layout-scrollbar-obtrusive\");\n}\n\ndocument.body.removeChild(parent);","import React from 'react';\n\nexport default function EditLine(props) {\n  return (\n    <input\n      type=\"text\"\n      onChange={(e) => {props.onChange(e.target.value)}}\n      placeholder={props.placeholder}\n      value={props.value} />\n  );\n}","export function createURL(base, params) {\n  const url = new URL(base);\n  const searchParams = new URLSearchParams(url.search);\n  for (const [key, value] of Object.entries(params)) {\n    if (value === undefined) {\n      searchParams.delete(key);\n    } else {\n      searchParams.set(key, value);\n    }\n  }\n  url.search = searchParams.toString();\n  return url.href;\n}\n\nexport function updateURL(params) {\n  const url = createURL(window.location.href, params);\n  window.history.replaceState({}, '', url.href);\n}\n\n","const handlers = {};\n\nexport function on(type, fn) {\n  let fns = handlers[type];\n  if (!fns) {\n    fns = [];\n    handlers[type] = fns;\n  }\n  remove(type, fn);\n  fns.push(fn);\n}\n\nexport function remove(type, fn) {\n  const fns = handlers[type];\n  if (fns) {\n    const ndx = fns.indexOf(fn);\n    if (ndx >= 0) {\n      fns.splice(ndx, 1);\n    }\n  }\n}\n\nwindow.addEventListener('message', (e) => {\n  const {type, data} = e.data;\n  const fns = handlers[type];\n  if (fns) {\n    for (const fn of fns) {\n      fn(data);\n    }\n  }\n});\n\n","import React from 'react';\nimport {createURL} from './url.js';\nimport * as winMsgMgr from './window-message-manager.js';\n\n// Disqus is served from a separate domain in an iframe. In other words\n//\n// +--[jsgist.org]-----------------------------+\n// |                                           |\n// | +--[iframe src=jsgist.devcomments.org]--+ |\n// | |                                       | |\n// | | +--[iframe src=disqus.com]---+        | |\n// | | |                            |        | |\n// | | +----------------------------+        | |\n// | |                                       | |\n// | +---------------------------------------+ |\n// |                                           |\n// +-------------------------------------------+\n//\n// This is because disqus works by embedded script\n// so we can't let it be on our page directly\n// otherwise it could read our secrets\n//\nexport default class Disqus extends React.Component {\n  constructor() {\n    super();\n    this.iframeRef = React.createRef();\n  }\n  // Disqus's script creates an iframe and the content in the iframe\n  // communicates back to the main page to tell it the size of the iframe\n  // so the main page can adjust the iframe size. We do that same thing\n  // so our top page can just the size of the middle iframe in the\n  // diagram above.\n  handleResize = (data) => {\n    this.iframeRef.current.style.height = `${data.height}px`;\n  }\n  componentDidMount() {\n    winMsgMgr.on('resize', this.handleResize);\n  }\n  componentWillUnmount() {\n    winMsgMgr.remove('resize', this.handleResize);\n  }\n  shouldComponentUpdate(nextProps) {\n    return nextProps.disqusId !== this.disqusId;\n  }\n  render() {\n    const {disqusId, title} = this.props;\n    const url = createURL('https://jsgist.devcomments.org/comments.html', {disqusId, title});\n    return (\n      <div>\n        { disqusId ?\n          <iframe\n            ref={this.iframeRef}\n            title=\"comments\"\n            src={url}\n          /> : []\n        }\n      </div>\n    );\n  }\n}","\nimport React from 'react';\nimport Disqus from './Disqus.js';\n\nexport default function Footer(props) {\n  return (\n    <div className=\"comments\">\n      <hr/>\n      {/*\n      <div className=\"links\">\n         <a target=\"_blank\" href=\"https://github.com/greggman/jsgist/issues/new?assignees=&labels=suggested+topic&template=suggest-topic.md&title=%5BSUGGESTION%5D\">Suggestion</a>?<span> </span>\n         <a target=\"_blank\" href=\"https://github.com/greggman/jsgist/issues/new?assignees=&labels=&template=request.md&title=\">Request</a>?<span> </span>\n         <a target=\"_blank\" href=\"https://github.com/greggman/jsgist/issues/new?assignees=&labels=bug+%2F+issue&template=bug-issue-report.md&title=\">Issue</a>?<span> </span>\n         <a target=\"_blank\" href=\"https://github.com/greggman/jsgist/issues/new?assignees=&labels=bug+%2F+issue&template=bug-issue-report.md&title=\">Bug</a>?\n      </div>\n      */}\n      {\n        props.disqusId ? (\n          <React.Fragment>\n            <div className=\"comment-notes\">\n               Use <b>&lt;pre&gt;&lt;code&gt;</b>code goes here<b>&lt;/code&gt;&lt;/pre&gt;</b> for code blocks\n            </div>\n            <Disqus disqusId={props.disqusId} title={props.title} />\n          </React.Fragment>\n        ) : []\n      }\n    </div>\n  );\n}","import { Octokit } from '@octokit/rest';\n\nconst userAgent = 'jsGist v0.0.1';\nconst emptyValue = '/*bug-in-github-api-content-can-not-be-empty*/';\n\nexport function getGistContent(gist) {\n  const data = JSON.parse(gist.files['jsGist.json'].content);\n  data.files = Object.entries(gist.files)\n    .filter(([name]) => name !== 'jsGist.json')\n    .map(([name, file]) => {\n      return {\n        name,\n        content: file.content.startsWith(emptyValue)\n            ? file.content.substr(emptyValue.length)\n            : file.content,\n      }\n    }).concat(data.files || []);\n  return data;\n} \n\nexport async function getAnonGist(gist_id) {\n  const req = await fetch(`https://api.github.com/gists/${gist_id}`);\n  const gist = await req.json();\n  return {\n    data: getGistContent(gist),\n    rawData: gist,\n  };\n}\n\nexport function getUserData(data) {\n  return (data && data.owner)\n      ? {\n          name: data.owner.login,\n          avatarURL: data.owner.avatar_url,\n      }\n      : undefined;\n}\n\nfunction createGistData(data, gist_id) {\n  let files = data.files.reduce((files, file) => {\n    files[file.name] = {\n      content: file.content.trim() ? file.content : `${emptyValue}${file.content}`,\n    };\n    return files;\n  }, {});\n  const saveData = {\n    ...data,\n  };\n  /*\n  // we can't add a readme because we don't know the gist_id. I guess we would double\n  // save? create then update?\n\n  const lowerCaseFiles = Object.keys(files).map(n => n.toLowerCase());\n  const hadReadme = \n      lowerCaseFiles.includes('readme.md') ||\n      lowerCaseFiles.includes('readme.txt') ||\n      lowerCaseFiles.includes('readme');\n  if (!hadReadme) {\n    files['README.md'] = `# ${data.name}\\n\\n[jsGist Link](${window.location.origin}?src=${})`\n  }\n  */\n  const jsGistData = {}\n  files['jsGist.json'] = jsGistData;\n  const noDuplicateNames = Object.keys(files).length === data.files.length + 1;\n  if (noDuplicateNames) {\n    delete saveData.files;\n  } else {\n    // save the files in the json\n    files = {\n      'jsGist.json': jsGistData,\n    };\n  }\n  jsGistData.content = JSON.stringify(saveData);\n  if (gist_id) {\n    // if we have a gist_id this is an update\n    // updates need filenames (which allows renaming)\n    for (const [filename, file] of Object.entries(files)) {\n      file.filename = filename;\n    }\n  }\n  return {\n    files,\n    description: data.name,\n    ...(!gist_id && {public: !data.settings.private}),\n    ...(gist_id && {gist_id}),\n  };\n}\n\nexport default class GitHub extends EventTarget {\n  constructor() {\n    super();\n    this.pat = '';\n    this.user = {};\n    this.unAuthorizedOctokit = new Octokit({\n      userAgent,\n    });\n  }\n  get octokit() {\n    return this.authorizedOctokit || this.unAuthorizedOctokit;\n  }\n  _updateUserData(data) {\n    const userData = getUserData(data);\n    if (userData) {\n      Object.assign(this.user, userData);\n      const event = new Event('userdata');\n      event.data = {...this.user};\n      this.dispatchEvent(event);\n    }\n  }\n  setPat(pat) {\n    if (pat !== this.pat) {\n      this.pat = pat;\n      this.authorizedOctokit = new Octokit({\n        auth: pat,\n        userAgent,\n      });\n    }\n  }\n  async getUserGists() {\n    const gists = await this.authorizedOctokit.paginate(this.authorizedOctokit.gists.list);\n    return gists.filter(gist => !!gist.files['jsGist.json']);\n    // return await this.authorizedOctokit.gists.list();\n  }\n\n  async getAnonGist(gist_id) {\n    const {data, rawData} = await getAnonGist(gist_id);\n    this._updateUserData(rawData);\n    return {data, rawData};\n  }\n\n  async getUserGist(gist_id) {\n    const gist = await this.octokit.gists.get({gist_id});\n    this._updateUserData(gist.data);\n    return getGistContent(gist.data);\n  }\n\n  async createGist(data) {\n    const gistData = createGistData(data);\n    const gist = await this.authorizedOctokit.gists.create(gistData);\n    this._updateUserData(gist.data);\n    return {\n      id: gist.data.id,\n      name: gist.data.description,\n      date: gist.data.updated_at,\n    };\n  }\n  async updateGist(gist_id, data) {\n    const gistData = createGistData(data, gist_id);\n    const gist = await this.authorizedOctokit.gists.update(gistData);\n    return {\n      id: gist.data.id,\n      name: gist.data.description,\n      date: gist.data.updated_at,\n    };\n  }\n\n}\n\n","import React from 'react';\n\nexport default class Dialog extends React.Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n  handleKeyDown = (e) => {\n    if (e.keyCode === 27) {\n      this.props.onClose();\n    }\n  }\n  render() {\n    const {title, children, onClose} = this.props;\n    return (\n      <div onClick={onClose} className=\"dialog\">\n        <div\n          tabIndex=\"-1\"\n          onClick={(e) =>{e.stopPropagation()}}\n        >\n          <div className=\"dialog-heading\">\n            <div className=\"dialog-title\">{title}</div>\n            <div className=\"dialog-close\">\n              <button onClick={onClose}>X</button>\n            </div>\n          </div>\n          <div className=\"dialog-content\">\n            {children}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport Dialog from './Dialog.js';\n\nexport default function Help(props) {\n  const {onClose} = props;\n  return (\n    <Dialog title=\"jsGist\" onClose={onClose}>\n      <div className=\"markdown\">\n      <p>Add your test cases, click <code>Run</code>.</p>\n      <h2>Contribute, Fix, Enhance!</h2>\n      <p>\n        <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/greggman/jsgist\">https://github.com/greggman/jsgist</a>\n      </p>\n      <p>Also see <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://jsbenchit.org\">jsbenchit.org</a></p>\n      <h2>Saving</h2>\n      <p>You can save your tests in multiple ways.</p>\n      <ol>\n        <li>To a github gist using a <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://docs.github.com/en/github/authenticating-to-github/creating-a-personal-access-token\">Personal Access Token</a>\n          <p>\n           Be sure to give the token <b>ONLY GIST</b> permissions. Paste it into the\n           save as UI click <code>Save to new gist</code>. Be sure to keep a copy of it\n           somewhere so you can use if you clear your browser's storage or switch\n           machines or browser. This site is a static site. The token is saved\n           in the browser only.\n          </p>\n        </li>\n        <li>Save it manually into github\n          <p>\n           Copy the JSON. Go to github. Create a new gist. Name the file\n           <code>jsGist.json</code> Paste the JSON in. Pick \"Create public gist\".\n          </p>\n          <p>\n           Note the id in the URL after you create the gist.\n          </p>\n          <p>\n           Create a url in the form <code>https://jsgist.org/?src=&lt;gist_id&gt;--</code>.\n          </p>\n          <p>\n           Example: <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://jsgist.org/?src=bad0a8491bd6614e729ff01cc14089c9\">https://jsgist.org/?src=bad0a8491bd6614e729ff01cc14089c9</a>\n          </p>\n        </li>\n        <li>Save it manually somewhere else.\n          <p>\n           If there's some other service that will provide a string via\n           http get then copy and save the JSON there then create a URL\n           in the form of <code>https://jsgist.org/?src=&lt;url&gt;</code>. Note: you\n           will have to escape the URL although if just paste it into your\n           browser it will likely do the conversion for you.\n          </p>\n        </li>\n        <li>Save it as a bookmark or link\n          <p>\n           In the SaveAs dialog there's a link that contains all the data\n           for your benchmark.\n          </p>\n        </li>\n      </ol>\n      </div>\n    </Dialog>\n  );\n}","const camelCaseRE = /([a-z])([A-Z])/g;\nconst toDash = (_, left, right) => `${left}-${right}`;\nconst camelCaseToDash = s => s.replace(camelCaseRE, toDash).toLowerCase();\n\nexport function classNames(...args) {\n  const names = [];\n  for (const arg of args) {\n    if (typeof arg === 'string') {\n      names.push(arg);\n    } else {\n      for (const [key, value] of Object.entries(arg)) {\n        if (value) {\n          names.push(camelCaseToDash(key));\n        }\n      }\n    }\n  }\n  return names.join(' ');\n}","import Ajv from 'ajv';\n\nimport {isDevelopment} from './flags.js';\nimport schema from './schema.json';\n\nconst ajv = new Ajv() // options can be passed, e.g. {allErrors: true}\nconst validator = ajv.compile(schema);\n\nconst trackedValues = {};\n\nfunction getValueOrMakeNew(name) {\n  const trackedValue = trackedValues[name] || {\n    subscriptions: new Set(),\n  };\n  trackedValues[name] = trackedValue;\n  return trackedValue;\n}\n\nexport function add(name, initialValue) {\n  const trackedValue = getValueOrMakeNew(name);\n  if (initialValue !== undefined) {\n    trackedValue.value = initialValue;\n  }\n  return trackedValue;\n}\n\nexport function get(name) {\n  return trackedValues[name].value;\n}\n\nexport function set(name, newValue) {\n  const trackedValue = trackedValues[name];\n  if (!trackedValue) {\n    throw new Error(`no such track value: ${name}`);\n  }\n  trackedValue.value = newValue;\n  const fns = [...trackedValue.subscriptions.keys()];\n  for (const fn of fns) {\n    fn(newValue, name);\n  }\n}\n\nexport function subscribe(name, fn) {\n  const trackedValue = getValueOrMakeNew(name);\n  trackedValue.subscriptions.add(fn);\n}\n\nexport function unsubscribe(name, fn) {\n  const trackedValue = getValueOrMakeNew(name);\n  trackedValue.subscriptions.delete(fn);\n}\n\nconst newTestData = {\n  \"name\": \"My jsGist\",\n  \"settings\": {},\n  \"files\": [\n    {\n      name: \"index.html\",\n      content: \"\",\n    },\n    {\n      name: \"index.css\",\n      content: \"\",\n    },\n    {\n      name: \"index.js\",\n      content: \"\",\n    },\n  ],\n};\nexport function getNewData() {\n  return JSON.parse(JSON.stringify(newTestData));\n}\nexport function getBlankData() {\n  const url = `${window.location.origin}/resources/images/logo.svg`;\n  return JSON.parse(JSON.stringify({\n    \"name\": \"jsGist\",\n    \"settings\": {},\n    \"files\": [\n      {\n        \"name\": \"index.html\",\n        \"content\": ``,\n      },\n      {\n        \"name\": \"index.css\",\n        \"content\": `\n          html, body {\n            margin: 0;\n            width: 100%;\n            height: 100%;\n            background-image: url(${url});\n            background-size: contain contain;\n            background-position: center center;\n            background-repeat: no-repeat no-repeat;\n          }\n          @media (prefers-color-scheme: dark) {\n            html {\n              background: #222;\n            }\n          }\n        `,\n      },\n      {\n        \"name\": \"index.js\",\n        \"content\": \"\",\n      }\n    ]\n  }));\n}\n\nexport let data = isDevelopment ? {\n  \"name\": \"ThreeJSFundamentals Scenegraph Tank\",\n  \"settings\": {},\n  \"files\": [\n    {\n      \"name\": \"index.html\",\n      \"content\": \"<canvas id=\\\"c\\\"></canvas>\\n<div id=\\\"info\\\"></div>\",\n    },\n    {\n      \"name\": \"index.css\",\n      \"content\": \"body {\\n  margin: 0;\\n}\\n#c {\\n  width: 100vw;\\n  height: 100vh;\\n  display: block;\\n}\\n#info { \\n  position: absolute; \\n  left: 1em; \\n  top: 1em; \\n  background: rgba(0,0,0,.8); \\n  padding: .5em;\\n  color: white;\\n  font-family: monospace;\\n}\",\n    },\n    {\n      \"name\": \"index.js\",\n      \"content\": \"import * as THREE from 'https://threejsfundamentals.org/threejs/resources/threejs/r119/build/three.module.js';\\n\\nfunction main() {\\n  const canvas = document.querySelector('#c');\\n  const renderer = new THREE.WebGLRenderer({canvas: canvas});\\n  renderer.setClearColor(0xAAAAAA);\\n  renderer.shadowMap.enabled = true;\\n\\n  function makeCamera(fov = 40) {\\n    const aspect = 2;  // the canvas default\\n    const zNear = 0.1;\\n    const zFar = 1000;\\n    return new THREE.PerspectiveCamera(fov, aspect, zNear, zFar);\\n  }\\n  const camera = makeCamera();\\n  camera.position.set(8, 4, 10).multiplyScalar(3);\\n  camera.lookAt(0, 0, 0);\\n\\n  const scene = new THREE.Scene();\\n\\n  {\\n    const light = new THREE.DirectionalLight(0xffffff, 1);\\n    light.position.set(0, 20, 0);\\n    scene.add(light);\\n    light.castShadow = true;\\n    light.shadow.mapSize.width = 2048;\\n    light.shadow.mapSize.height = 2048;\\n\\n    const d = 50;\\n    light.shadow.camera.left = -d;\\n    light.shadow.camera.right = d;\\n    light.shadow.camera.top = d;\\n    light.shadow.camera.bottom = -d;\\n    light.shadow.camera.near = 1;\\n    light.shadow.camera.far = 50;\\n    light.shadow.bias = 0.001;\\n  }\\n\\n  {\\n    const light = new THREE.DirectionalLight(0xffffff, 1);\\n    light.position.set(1, 2, 4);\\n    scene.add(light);\\n  }\\n\\n  const groundGeometry = new THREE.PlaneBufferGeometry(50, 50);\\n  const groundMaterial = new THREE.MeshPhongMaterial({color: 0xCC8866});\\n  const groundMesh = new THREE.Mesh(groundGeometry, groundMaterial);\\n  groundMesh.rotation.x = Math.PI * -.5;\\n  groundMesh.receiveShadow = true;\\n  scene.add(groundMesh);\\n\\n  const carWidth = 4;\\n  const carHeight = 1;\\n  const carLength = 8;\\n\\n  const tank = new THREE.Object3D();\\n  scene.add(tank);\\n\\n  const bodyGeometry = new THREE.BoxBufferGeometry(carWidth, carHeight, carLength);\\n  const bodyMaterial = new THREE.MeshPhongMaterial({color: 0x6688AA});\\n  const bodyMesh = new THREE.Mesh(bodyGeometry, bodyMaterial);\\n  bodyMesh.position.y = 1.4;\\n  bodyMesh.castShadow = true;\\n  tank.add(bodyMesh);\\n\\n  const tankCameraFov = 75;\\n  const tankCamera = makeCamera(tankCameraFov);\\n  tankCamera.position.y = 3;\\n  tankCamera.position.z = -6;\\n  tankCamera.rotation.y = Math.PI;\\n  bodyMesh.add(tankCamera);\\n\\n  const wheelRadius = 1;\\n  const wheelThickness = .5;\\n  const wheelSegments = 6;\\n  const wheelGeometry = new THREE.CylinderBufferGeometry(\\n      wheelRadius,     // top radius\\n      wheelRadius,     // bottom radius\\n      wheelThickness,  // height of cylinder\\n      wheelSegments);\\n  const wheelMaterial = new THREE.MeshPhongMaterial({color: 0x888888});\\n  const wheelPositions = [\\n    [-carWidth / 2 - wheelThickness / 2, -carHeight / 2,  carLength / 3],\\n    [ carWidth / 2 + wheelThickness / 2, -carHeight / 2,  carLength / 3],\\n    [-carWidth / 2 - wheelThickness / 2, -carHeight / 2, 0],\\n    [ carWidth / 2 + wheelThickness / 2, -carHeight / 2, 0],\\n    [-carWidth / 2 - wheelThickness / 2, -carHeight / 2, -carLength / 3],\\n    [ carWidth / 2 + wheelThickness / 2, -carHeight / 2, -carLength / 3],\\n  ];\\n  const wheelMeshes = wheelPositions.map((position) => {\\n    const mesh = new THREE.Mesh(wheelGeometry, wheelMaterial);\\n    mesh.position.set(...position);\\n    mesh.rotation.z = Math.PI * .5;\\n    mesh.castShadow = true;\\n    bodyMesh.add(mesh);\\n    return mesh;\\n  });\\n\\n  const domeRadius = 2;\\n  const domeWidthSubdivisions = 12;\\n  const domeHeightSubdivisions = 12;\\n  const domePhiStart = 0;\\n  const domePhiEnd = Math.PI * 2;\\n  const domeThetaStart = 0;\\n  const domeThetaEnd = Math.PI * .5;\\n  const domeGeometry = new THREE.SphereBufferGeometry(\\n    domeRadius, domeWidthSubdivisions, domeHeightSubdivisions,\\n    domePhiStart, domePhiEnd, domeThetaStart, domeThetaEnd);\\n  const domeMesh = new THREE.Mesh(domeGeometry, bodyMaterial);\\n  domeMesh.castShadow = true;\\n  bodyMesh.add(domeMesh);\\n  domeMesh.position.y = .5;\\n\\n  const turretWidth = .1;\\n  const turretHeight = .1;\\n  const turretLength = carLength * .75 * .2;\\n  const turretGeometry = new THREE.BoxBufferGeometry(\\n      turretWidth, turretHeight, turretLength);\\n  const turretMesh = new THREE.Mesh(turretGeometry, bodyMaterial);\\n  const turretPivot = new THREE.Object3D();\\n  turretMesh.castShadow = true;\\n  turretPivot.scale.set(5, 5, 5);\\n  turretPivot.position.y = .5;\\n  turretMesh.position.z = turretLength * .5;\\n  turretPivot.add(turretMesh);\\n  bodyMesh.add(turretPivot);\\n\\n  const turretCamera = makeCamera();\\n  turretCamera.position.y = .75 * .2;\\n  turretMesh.add(turretCamera);\\n\\n  const targetGeometry = new THREE.SphereBufferGeometry(.5, 6, 3);\\n  const targetMaterial = new THREE.MeshPhongMaterial({color: 0x00FF00, flatShading: true});\\n  const targetMesh = new THREE.Mesh(targetGeometry, targetMaterial);\\n  const targetOrbit = new THREE.Object3D();\\n  const targetElevation = new THREE.Object3D();\\n  const targetBob = new THREE.Object3D();\\n  targetMesh.castShadow = true;\\n  scene.add(targetOrbit);\\n  targetOrbit.add(targetElevation);\\n  targetElevation.position.z = carLength * 2;\\n  targetElevation.position.y = 8;\\n  targetElevation.add(targetBob);\\n  targetBob.add(targetMesh);\\n\\n  const targetCamera = makeCamera();\\n  const targetCameraPivot = new THREE.Object3D();\\n  targetCamera.position.y = 1;\\n  targetCamera.position.z = -2;\\n  targetCamera.rotation.y = Math.PI;\\n  targetBob.add(targetCameraPivot);\\n  targetCameraPivot.add(targetCamera);\\n\\n  // Create a sine-like wave\\n  const curve = new THREE.SplineCurve( [\\n    new THREE.Vector2( -10, 0 ),\\n    new THREE.Vector2( -5, 5 ),\\n    new THREE.Vector2( 0, 0 ),\\n    new THREE.Vector2( 5, -5 ),\\n    new THREE.Vector2( 10, 0 ),\\n    new THREE.Vector2( 5, 10 ),\\n    new THREE.Vector2( -5, 10 ),\\n    new THREE.Vector2( -10, -10 ),\\n    new THREE.Vector2( -15, -8 ),\\n    new THREE.Vector2( -10, 0 ),\\n  ] );\\n\\n  const points = curve.getPoints( 50 );\\n  const geometry = new THREE.BufferGeometry().setFromPoints( points );\\n  const material = new THREE.LineBasicMaterial( { color : 0xff0000 } );\\n  const splineObject = new THREE.Line( geometry, material );\\n  splineObject.rotation.x = Math.PI * .5;\\n  splineObject.position.y = 0.05;\\n  scene.add(splineObject);\\n\\n  function resizeRendererToDisplaySize(renderer) {\\n    const canvas = renderer.domElement;\\n    const width = canvas.clientWidth;\\n    const height = canvas.clientHeight;\\n    const needResize = canvas.width !== width || canvas.height !== height;\\n    if (needResize) {\\n      renderer.setSize(width, height, false);\\n    }\\n    return needResize;\\n  }\\n\\n  const targetPosition = new THREE.Vector3();\\n  const tankPosition = new THREE.Vector2();\\n  const tankTarget = new THREE.Vector2();\\n\\n  const cameras = [\\n    { cam: camera, desc: 'detached camera', },\\n    { cam: turretCamera, desc: 'on turret looking at target', },\\n    { cam: targetCamera, desc: 'near target looking at tank', },\\n    { cam: tankCamera, desc: 'above back of tank', },\\n  ];\\n\\n  const infoElem = document.querySelector('#info');\\n\\n  function render(time) {\\n    time *= 0.001;\\n\\n    if (resizeRendererToDisplaySize(renderer)) {\\n      const canvas = renderer.domElement;\\n      cameras.forEach((cameraInfo) => {\\n        const camera = cameraInfo.cam;\\n        camera.aspect = canvas.clientWidth / canvas.clientHeight;\\n        camera.updateProjectionMatrix();\\n      });\\n    }\\n\\n    // move target\\n    targetOrbit.rotation.y = time * .27;\\n    targetBob.position.y = Math.sin(time * 2) * 4;\\n    targetMesh.rotation.x = time * 7;\\n    targetMesh.rotation.y = time * 13;\\n    targetMaterial.emissive.setHSL(time * 10 % 1, 1, .25);\\n    targetMaterial.color.setHSL(time * 10 % 1, 1, .25);\\n\\n    // move tank\\n    const tankTime = time * .05;\\n    curve.getPointAt(tankTime % 1, tankPosition);\\n    curve.getPointAt((tankTime + 0.01) % 1, tankTarget);\\n    tank.position.set(tankPosition.x, 0, tankPosition.y);\\n    tank.lookAt(tankTarget.x, 0, tankTarget.y);\\n\\n    // face turret at target\\n    targetMesh.getWorldPosition(targetPosition);\\n    turretPivot.lookAt(targetPosition);\\n\\n    // make the turretCamera look at target\\n    turretCamera.lookAt(targetPosition);\\n\\n    // make the targetCameraPivot look at the at the tank\\n    tank.getWorldPosition(targetPosition);\\n    targetCameraPivot.lookAt(targetPosition);\\n\\n    wheelMeshes.forEach((obj) => {\\n      obj.rotation.x = time * 3;\\n    });\\n\\n    const camera = cameras[time * .25 % cameras.length | 0];\\n    infoElem.textContent = camera.desc;\\n\\n    renderer.render(scene, camera.cam);\\n\\n    requestAnimationFrame(render);\\n  }\\n\\n  requestAnimationFrame(render);\\n}\\n\\nmain();\\n\",\n    }\n  ]\n} : getNewData();\n\nif (!validator(data)) {\n  console.log(validator.errors);\n}\n\nconst dataVersionKey = 'dataVersion';\nconst updateVersionKey = 'updateVersion';\n\nadd(dataVersionKey, 0);   // any data changes\nadd(updateVersionKey, 0);  // all data changes\n\nfunction notify(version = 'dataVersion') {\n  set(version, get(version) + 1);\n}\n\nfunction getUniqueName(basename) {\n  const filenames = new Set(data.files.map(f => f.name));\n  for (let count = data.files.length + 1; ; ++count) {\n    const name = `${basename}${count}`;\n    if (!filenames.has(name)) {\n      return name;\n    }\n  }\n}\n\nexport function addFile(name = \"\", content = \"\") {\n  name = name || getUniqueName('unnamed');\n  data.files.push({\n    name,\n    content,\n  });\n  notify();\n}\n\nexport function setName(name) {\n  data.name = name;\n  notify();\n}\n\nexport function setFileName(ndx, newName) {\n  data.files[ndx].name = newName;\n  notify();\n}\n\nexport function setFileContent(ndx, content) {\n  data.files[ndx].content = content;\n  notify();\n}\n\nexport function setFileType(ndx, type) {\n  data.files[ndx].type = type;\n  notify();\n}\n\nexport function deleteFile(ndx) {\n  data.files.splice(ndx, 1);\n  notify();\n}\n\nexport function validate(data) {\n  if (!validator(data)) {\n    debugger;\n    throw new Error(`data not valid:\\n${validator.errors.map(e => `${e.message}: ${e.dataPath}`)}`);\n  }\n}\n\nexport function setData(newData) {\n  validate(newData);\n  data = newData;\n  notify();\n  set('updateVersion', get('updateVersion') + 1);\n}\n","import Ajv from 'ajv';\nimport * as model from './model';\n\nconst gistsKey = 'jsGist-gists';\n\nconst gistSchema = {\n  \"type\": \"object\",\n  \"properties\": {\n    \"name\": { \"type\": \"string\" },\n    \"date\": { \"type\": \"string\" },\n  },\n  \"required\": [\"name\", \"date\"],\n};\n\nconst gistsSchema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"type\": \"object\",\n  \"additionalProperties\": gistSchema,\n};\nconst ajv = new Ajv() // options can be passed, e.g. {allErrors: true}\nconst gistsValidator = ajv.compile(gistsSchema);\nconst gistValidator = ajv.compile(gistSchema);\n\nfunction getStoredGists() {\n  try {\n    const gists = JSON.parse(localStorage.getItem(gistsKey));\n    if (!gistsValidator(gists)) {\n      localStorage.removeIem(gistsKey);\n      throw new Error();\n    }\n    return gists;\n  } catch(e) {\n    return {};\n  }\n}\n\nmodel.add('gists', getStoredGists());\n\n// does this need to be centralized?\nwindow.addEventListener('storage', (e) => {\n  if (e.key === 'gists') {\n    model.set('gists', getStoredGists());\n  }\n});\n\nexport function addGist(id, name, date) {\n  const gist = {name, date};\n  if (!gistValidator(gist)) {\n    throw new Error(`gist not valid:\\n${gistValidator.errors.map(e => `${e.message}: ${e.dataPath}`)}`)\n  }\n  const gists = {...model.get('gists')};\n  gists[id] = gist;\n  model.set('gists', gists);\n  saveGistsToLocalStorage(gists);\n}\n\nfunction saveGistsToLocalStorage(gists) {\n  // send to other windows\n  localStorage.setItem(gistsKey, JSON.stringify(gists));\n}\n\nexport function getGists() {\n  return model.get('gists');\n}\n\nexport function setGists(gists) {\n  if (!gistsValidator(gists)) {\n    throw new Error(`gists not valid:\\n${gistValidator.errors.map(e => `${e.message}: ${e.dataPath}`)}`)\n  }\n  model.set('gists', gists);\n  saveGistsToLocalStorage(gists);\n}\n\nexport function subscribe(fn) {\n  model.subscribe('gists', fn);\n}\n\nexport function unsubscribe(fn) {\n  model.unsubscribe('gists', fn);\n}\n","export const noop = () => {};\nexport const wait = ms => new Promise(resolve => setTimeout(resolve, ms));\n\nfunction find(files, endings) {\n  // calling toLowerCase a bunch is bad but there will never be more than a few files\n  for (const ending of endings) {\n    const file = files.find(file => file.name.toLowerCase().endsWith(ending.toLowerCase()));\n    if (file) {\n      return file;\n    }\n  }\n  return '';\n}\n\nexport function getOrFind(files, name, ...endings) {\n  return files.find(f => f.name.toLowerCase() === name.toLowerCase) || find(files, endings);\n}\n","import React from 'react';\nimport {classNames} from './css-utils.js';\nimport * as gists from './gists.js';\nimport {updateURL} from './url.js';\nimport {noop, wait} from './utils.js';\n\nexport default class LoadGist extends React.Component {\n  constructor () {\n    super();\n    this.state = {\n      loading: false,\n      pat: localStorage.getItem('pat') || '',\n      gists: gists.getGists(),\n    };\n  }\n  handlePATChange = (e) => {\n    const pat = e.target.value;\n    this.setState({pat});\n    localStorage.setItem('pat', pat);\n  }\n  handleSubmit = (e) => {\n    e.preventDefault();\n    this.loadGists();\n  }\n  handleNewGists = (gists) => {\n    this.setState({gists});\n  }\n  componentDidMount() {\n    document.body.addEventListener('submit', this.handleSubmit);\n    gists.subscribe(this.handleNewGists);\n  }\n  componentWillUnmount() {\n    document.body.removeEventListener('submit', this.handleSubmit);\n    gists.unsubscribe(this.handleNewGists);\n  }\n  loadGists = async(e) => {\n    this.setState({loading: true});\n    const {addError, github} = this.props;\n    const {pat} = this.state;\n    github.setPat(pat);\n    try {\n      const gistArray = await github.getUserGists();\n      const gistsById = gistArray.reduce((gists, gist) => {\n        gists[gist.id] = {\n          name: gist.description,\n          date: gist.updated_at,\n        };\n        return gists;\n      }, {});\n      gists.setGists(gistsById);\n      // apparently we need to update the URL in order for the browser\n      // to save the password.\n      updateURL({loggedIn: true});\n      await wait();\n      updateURL({loggedIn: undefined});\n    } catch (e) {\n      addError(`could not load gists: ${e}`);\n    }\n    this.setState({loading: false});\n  }\n  render() {\n    const {pat, gists, loading} = this.state;\n    const canLoad = !!pat && !loading;\n    const gistArray = Object.entries(gists).map(([id, {name, date}]) => {\n      return {id, name, date};\n    }).sort((b, a) => a.date < b.date ? -1 : ((a.date > b.date) ? 1 : 0));\n    return (\n      <div>\n        <form>\n          <div className=\"save-as-gist-pat\">\n            <div>Personal Access Token:&nbsp;</div>\n            <div>\n              <input type=\"text\" name=\"username\" value=\"unused\" style={{display: 'none'}} onChange={noop} />\n              <input\n                type=\"password\"\n                name=\"password\"\n                value={pat}\n                placeholder=\"personal access token\"\n                onChange={this.handlePATChange}\n              />\n            </div>\n          </div>\n          <p>\n            <button\n              type=\"submit\"\n              className={classNames({disabled: !canLoad})}\n            >{gistArray.length ? 'Reload' : 'Load'} Your Gists</button>\n          </p>\n        </form>\n        <p>\n          <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/settings/tokens\">Create a Personal Access Token</a> with only <b>gist</b> permissions.\n          Paste it above. Note: This is a static website. Your personal access token\n          is stored only locally in your browser and only accessible by this domain.\n        </p>\n        {\n          gistArray.length ?\n            <table className=\"gists\">\n              <tbody>\n              {\n                gistArray.map((gist, ndx) => {\n                  return (\n                    <tr key={`g${ndx}`}>\n                      <td><a href={`${window.location.origin}?src=${encodeURIComponent(gist.id)}`}>{gist.name}</a></td>\n                      <td>{gist.date.substring(0, 10)}</td>\n                    </tr>\n                  );\n                })\n              }\n              </tbody>\n            </table> : []\n        }\n      </div>\n    );\n  }\n}","import React from 'react';\nimport {Controlled as CodeMirror} from 'react-codemirror2';\nimport 'codemirror/lib/codemirror.css';\nimport 'codemirror/theme/material.css';\nimport 'codemirror/theme/eclipse.css';\nimport 'codemirror/mode/css/css.js';\nimport 'codemirror/mode/javascript/javascript.js';\nimport 'codemirror/mode/htmlmixed/htmlmixed.js';\nimport 'codemirror/addon/scroll/simplescrollbars.js';\nimport 'codemirror/addon/scroll/simplescrollbars.css';\n\nconst darkMatcher = window.matchMedia\n    ? window.matchMedia('(prefers-color-scheme: dark)')\n    : {};\n// darkMatcher.addListener(render);\n\nconst noop = () => {};\n\nexport default class Code extends React.Component {\n  constructor(props) {\n    super(props);\n    const {value, hackKey} = props;\n    this.state = {value, hackKey}\n  }\n  static getDerivedStateFromProps(props, state) {\n    const needNewData = state.hackKey !== props.hackKey;\n    return (needNewData)\n       ? {hackKey: props.hackKey, value: props.value}\n       : null;\n  }\n  render() {\n    const {options = {}, onValueChange = noop} = this.props;\n    const {value} =  this.state;\n    const isDarkMode = darkMatcher.matches;\n    return (\n      <CodeMirror\n        value={value}\n        options={{\n          mode: 'javascript',\n          scrollbarStyle: 'overlay',\n          theme: isDarkMode ? 'material' : 'eclipse',\n          ...(options.editor && options.editor),\n        }}\n        onBeforeChange={(editor, data, value) => {\n          this.setState({value});\n        }}\n        onChange={(editor, data, value) => {\n          onValueChange(value);\n        }}\n      />\n    );\n  }\n};\n","import React, {useState} from 'react';\nimport Code from './Code.js';\nimport * as model from './model.js';\n\nexport default function LoadJSON(props) {\n  const [json, setJSON] = useState('');\n  function load() {\n    const {onLoad, addError} = props;\n    try {\n      const data = JSON.parse(json);\n      model.setData(data);\n      onLoad();\n    } catch (e) {\n      addError(`bad json: ${e}`);\n    }\n  }\n  return (\n    <div>\n      <div style={{height: '100px'}}>\n        <Code\n          value={json}\n          onValueChange={setJSON}\n\n        />\n      </div>\n      <p>\n        <button onClick={load}>Load JSON</button>\n      </p>\n    </div>\n  )\n}","import React, {useState} from 'react';\nimport EditLine from './EditLine';\nimport * as model from './model.js';\n\nexport default function LoadURL(props) {\n  const [url, setUrl] = useState('');\n  async function loadUrl() {\n    const {addError, onLoad} = props;\n    try {\n      const req = await fetch(url);\n      const data = await req.json();\n      model.setData(data);\n      onLoad()\n    } catch(e) {\n      addError(`could not load url: ${e}`);\n    }\n  } \n  return (\n    <div>\n      <EditLine value={url} onChange={setUrl} placeholder=\"url-to-json\" />\n      <p>\n        <button onClick={loadUrl}>Load URL</button>\n      </p>\n    </div>\n  )\n}","import React from 'react';\n\nexport default function Section(props) {\n  const {heading, children} = props;\n  return (\n    <div className=\"section\">\n      <div className=\"section-heading\">{heading}</div>\n      <div className=\"section-content\">\n        {children}\n      </div>\n    </div>\n  );\n}","import React from 'react';\nimport Dialog from './Dialog.js';\nimport LoadGist from './LoadGist.js';\nimport LoadJSON from './LoadJSON.js';\nimport LoadURL from './LoadURL.js';\nimport Section from './Section.js';\n\nexport default function Load(props) {\n  const {data, github, onLoad, onClose, addError} = props;\n  return (\n    <Dialog title=\"Load\" onClose={onClose}>\n      <Section heading=\"Load Gist\">\n        <LoadGist github={github} data={data} onLoad={onLoad} addError={addError} />\n      </Section>\n      <Section heading=\"Load URL\">\n        <LoadURL data={data} onLoad={onLoad} addError={addError} />\n      </Section>\n      <Section heading=\"Load JSON\">\n        <LoadJSON data={data} onLoad={onLoad} addError={addError} />\n      </Section>\n    </Dialog>\n  )\n}\n","import {decode, encode} from 'base64-arraybuffer';\nimport {inflate, deflate} from 'uzip-module';\n\nconst utf8Encoder = new TextEncoder();\nconst utf8Decoder = new TextDecoder();\nconst compressedPrefix = 'cb64,';\nconst uncompressedPrefix = 'b64,';\n\nexport const isCompressedBase64 = s => s.startsWith(compressedPrefix) || s.startsWith(uncompressedPrefix);\nexport function compressedBase64ToJSON(src) {\n  const isCompressed = src.startsWith(compressedPrefix);\n  const prefix = isCompressed ? compressedPrefix : uncompressedPrefix;\n  const base64 = src.substr(prefix.length)\n     .replace(/-/g, '+')\n     .replace(/_/g, '/');\n  const raw = new Uint8Array(decode(base64));\n  const bin = isCompressed \n     ? inflate(raw)\n     : raw;\n  const json = utf8Decoder.decode(bin);\n  return JSON.parse(json);\n}\n\nexport function jsonToCompressedBase64(data) {\n  const json = JSON.stringify(data);\n  const bin = utf8Encoder.encode(json);\n  const compressed = deflate(bin);\n  const useCompressed = compressed.length < bin.length;\n  const base64 = encode(useCompressed ? compressed : bin)\n      .replace(/\\+/g, '-')    // better for URLs because + and / have to be escaped\n      .replace(/\\//g, '_');\n  const prefix = useCompressed ? compressedPrefix : uncompressedPrefix;\n  return `${prefix}${base64}`;\n}\n","\nimport {isCompressedBase64, compressedBase64ToJSON} from './compression.js';\n\nconst idRE = /^[a-z0-9]+$/i;\nexport const isGistId = s => idRE.test(s);\n\nexport async function loadGistFromSrc(src, github) {\n  if (isGistId(src)) {\n    const {data, rawData} = await github.getAnonGist(src);\n    return {data, id: src, rawData};\n  } else if (isCompressedBase64(src)) {\n    return {data: compressedBase64ToJSON(src)};\n  } else {\n    const res = await fetch(src);\n    const data = await res.json();\n    return {data};\n  }\n}\n","import React from 'react';\n\nexport class LogManager extends EventTarget {\n  constructor() {\n    super();\n    this._msgs = [];\n  }\n  _notify() {\n    this.dispatchEvent(new Event('change'));\n  }\n  clear = () => {\n    this._msgs = [];\n    this._notify();\n  }\n  addMsg = (type, msg) => {\n    this._msgs.push({type, msg});\n    this._notify();\n  }\n  getMsgs() {\n    return this._msgs\n  }\n}\n\nexport default class Log extends React.Component {\n  constructor(props) {\n    super(props);\n    const {logManager} = props;\n    this.logManager = logManager;\n    this.logMessagesRef = React.createRef();\n  }\n  handleChange = () => {\n    this.forceUpdate();\n  }\n  componentDidMount() {\n    this.logManager.addEventListener('change', this.handleChange);\n  }\n  componentWillUnmount() {\n    this.logManager.removeEventListener('change', this.handleChange);\n  }\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    if (snapshot !== null) {\n      // if we were at the bottom of the log then\n      // stay at the bottom of the log\n      if (snapshot < 1) {\n        const elem = this.logMessagesRef.current;\n        elem.scrollTop = elem.scrollHeight - elem.parentElement.clientHeight;\n      }\n    }\n  }\n  getSnapshotBeforeUpdate(prevProps, prevState) {\n    const elem = this.logMessagesRef.current;\n    return elem.scrollHeight - (elem.scrollTop + elem.parentElement.clientHeight);\n  }\n  render() {\n    return (\n      <div className=\"logger\">\n        <div className=\"log-messages layout-scrollbar\" ref={this.logMessagesRef}>\n          { this.logManager.getMsgs().map((msg, ndx) => (\n            <div key={`l${ndx}`} className={msg.type}>{msg.msg}</div>\n          ))}\n        </div>\n      </div>\n    );\n  }\n}","import React from 'react';\nimport {classNames} from './css-utils.js';\nimport * as gists from './gists.js';\nimport {updateURL} from './url.js';\nimport {noop, wait} from './utils.js';\n\nexport default class SaveAsGist extends React.Component {\n  constructor () {\n    super();\n    this.state = {\n      saving: false,\n      pat: localStorage.getItem('pat') || '',\n    };\n  }\n  handlePATChange = (e) => {\n    const pat = e.target.value;\n    this.setState({pat});\n    localStorage.setItem('pat', pat);\n  }\n  handleSubmit = (e) => {\n    e.preventDefault();\n    this.saveFn();\n  }\n  // this nonsense about markToSaveAsNewGist and markToUpdateNewGist\n  // is because in order to get the browser to save the token as a password\n  // we need to use a form. The reason to save it is to that if you \n  // switch machines you don't have to go look up the password, the browser\n  // will hopefully offer it.\n  markToSaveNewGist = () => {\n    this.saveFn = this.saveNew;\n  }\n  markToUpdateGist =  () => {\n    this.saveFn = this.saveOverExisting;\n  }\n  saveNew = async() => {\n    this.setState({saving: true});\n    const {data, github, addError, onSave, onClose} = this.props;\n    const {pat} = this.state;\n    let success = false;\n    github.setPat(pat);\n    try {\n      const {id, name, date} = await github.createGist(data);\n      gists.addGist(id, name, date);\n      onSave(id);\n      success = true;\n    } catch (e) {\n      addError(`could not create gist: ${e}`)\n    }\n    this.setState({saving: false});\n    if (success) {\n      // we apparently need to update the URL in order for the browser\n      // to save the password.\n      updateURL({loggedIn: true});\n      await wait();\n      updateURL({loggedIn: undefined})\n      onClose();\n    }\n  }\n  saveOverExisting = async() => {\n    this.setState({saving: true});\n    const {data, gistId, github, addError, onClose} = this.props;\n    const {pat} = this.state;\n    let success = false;\n    github.setPat(pat);\n    try {\n      const {id, name, date} = await github.updateGist(gistId, data);\n      gists.addGist(id, name, date);\n      success = true;\n    } catch (e) {\n      addError(`could not update gist: ${e}`)\n    }\n    this.setState({saving: false});\n    if (success) {\n      onClose();\n    }\n  }\n  render() {\n    const {pat, saving} = this.state;\n    const {gistId} = this.props;\n    const canSave = pat && gistId;\n    return (\n      <div>\n        <form onSubmit={this.handleSubmit}>\n          <div className=\"save-as-gist-pat\">\n            <div>Personal Access Token:&nbsp;</div>\n            <div>\n              <input type=\"text\" name=\"username\" value=\"unused\" style={{display: 'none'}} onChange={noop} />\n              <input\n                type=\"password\"\n                name=\"password\"\n                value={pat}\n                placeholder=\"personal access token\"\n                onChange={this.handlePATChange}\n              />\n            </div>\n          </div>\n          <p>\n            <button\n              type=\"submit\"\n              className={classNames({disabled: !pat || saving})}\n              data-type=\"new\"\n              onClick={this.markToSaveNewGist}\n            >Save to new Gist</button>\n            <button\n              className={classNames({disabled: !canSave || saving})}\n              type=\"submit\"\n              data-type=\"update\"\n              onClick={this.markToUpdateGist}\n            >Update Existing Gist</button>\n          </p>\n          <p>\n            <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/settings/tokens\">Create a Personal Access Token</a> with only <b>gist</b> permissions.\n            Paste it above. Note: This is a static website. Your personal access token\n            is stored only locally in your browser and only accessible by this domain.\n          </p>\n        </form>\n      </div>\n    );\n  }\n}","import React from 'react';\n\nexport default function SaveAsJSON(props) {\n  const {data} = props;\n  return (\n    <div>\n      <div>\n        Copy the text below, paste into the load ui or put somewhere on the net\n        and make your own URL with <code>{window.location.origin}?src=url-to-json</code>.\n      </div>\n      <pre style={{userSelect: 'all'}}>{JSON.stringify(data)}</pre>\n      <div><a href={`${window.location.origin}?src=${encodeURIComponent(`${window.location.origin}/example.json`)}`}>Example</a></div>\n    </div>\n  );\n}","import React from 'react';\n\nimport {jsonToCompressedBase64} from './compression.js';\n\nexport default function SaveAsURL(props) {\n  const {data} = props;\n  const src = jsonToCompressedBase64(data);\n  const url = `${window.location.origin}?src=${encodeURIComponent(src)}`;\n  return (\n    <div>\n      <div>Copy / bookmark the link below</div>\n      <a className=\"bookmark\" href={url} target=\"_blank\" rel=\"noopener noreferrer\">{url}</a>\n    </div>\n  );\n}\n","import React from 'react';\n\nexport default function Embed(props) {\n  const {gistId} = props;\n  return (\n    <div>\n      <div>\n        <p>\n        You can embed a jsGist by creating an iframe pointing to\n        {' '}<code>https://jsgist.org/embed.html?src=&lt;src&gt;</code>{' '} where\n        {' '}<code>&lt;src&gt;</code>{' '} is one of the forms above. Either\n        {' '}<code>?src=&lt;gist_id&gt;</code>{' '}or\n        {' '}<code>?src=&lt;base64url&gt;</code>{' '}or\n        {' '}<code>?src=&lt;url_to_json&gt;</code>{' '}.\n        You can also add {' '}<code>noheader=true</code>{' '} if you don't want the header\n        to appear. You can also just run them directly rather\n        than put in an iframe. <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://jsgist.org/embed.html?src=bad0a8491bd6614e729ff01cc14089c9\">[example]</a>{' '}\n        <a target=\"_blank\" rel=\"noopener noreferrer\" href={'https://jsgist.org/embed.html?src=bad0a8491bd6614e729ff01cc14089c9&noheader=true'}>[example no header]</a>\n        </p>\n        { gistId\n          ? (\n            <React.Fragment>\n              <p>\n              For example:\n              </p>\n              <pre><code>\n      &lt;iframe src=\"https://jsgist.org/embed.html?src={gistId}\" &gt;&lt;/iframe&gt;\n              </code></pre>\n            </React.Fragment>\n          )\n          : []\n        }\n        <p>\n        </p>\n      </div>\n    </div>\n  );\n}","import React from 'react';\nimport Dialog from './Dialog.js';\nimport SaveAsGist from './SaveAsGist.js';\nimport SaveAsJSON from './SaveAsJSON.js';\nimport SaveAsURL from './SaveAsURL.js';\nimport Section from './Section.js';\nimport Embed from './Embed.js';\n\nexport default function Save(props) {\n  const {data, github, gistId, onSave, onClose, addError} = props;\n  return (\n    <Dialog title=\"Save As\" onClose={onClose}>\n      <Section heading=\"Save As Gist\">\n        <SaveAsGist gistId={gistId} github={github} data={data} onClose={onClose} onSave={onSave} addError={addError} />\n      </Section>\n      <Section heading=\"Save As URL\">\n        <SaveAsURL data={data} />\n      </Section>\n      <Section heading=\"Save As JSON\">\n        <SaveAsJSON data={data} />\n      </Section>\n      <Section heading=\"Embedding\">\n        <Embed gistId={gistId} />\n      </Section>\n    </Dialog>\n  )\n}\n","import React from 'react';\nimport Dialog from './Dialog.js';\n\nimport verticalIcon from './icons/vertical-layout.svg';\nimport horizontalIcon from './icons/horizontal-layout.svg';\nimport twoByTwoIcon from './icons/two-by-two-layout.svg';\nimport {classNames} from './css-utils.js';\n\nfunction RadioOption(props) {\n  const {children, onChange, selected} = props;\n  return (\n    <div className={classNames({radioSelected: selected})} onClick={onChange}>\n      {children}\n    </div>\n  );\n}\n\nfunction Radio(props) {\n  const {selectedNdx, onChange, children} = props;\n\n  let childNdx = 0;\n  const newChildren = React.Children.map(children, (child) => {\n    if (!React.isValidElement(child)) {\n      return null;\n    }\n\n    const selected = childNdx === selectedNdx;\n\n    const id = childNdx;\n    childNdx += 1;\n    return React.cloneElement(child, {\n      //...child.props,\n      selected,\n      onChange: () => onChange(id),\n    });\n  });\n\n\n  return (\n    <div class=\"radio\">\n      {newChildren}\n    </div>\n  );\n}\n\nexport default function Save(props) {\n  const {onClose} = props;\n\n  return (\n    <Dialog title=\"Settings\" onClose={onClose}>\n      <Radio selectedNdx={0} onChange={(v) => {console.log(v)}}>\n        <RadioOption><img style={{height: '2em'}} src={verticalIcon} alt=\"vertical\"/></RadioOption>\n        <RadioOption><img style={{height: '2em'}} src={horizontalIcon} alt=\"horizontal\"/></RadioOption>\n        <RadioOption><img style={{height: '2em'}} src={twoByTwoIcon} alt=\"2x2\" /></RadioOption>\n      </Radio>\n    </Dialog>\n  )\n}\n","import React from 'react';\n\nconst defaultGutterSize = 10;\nconst defaultDirection = 'horizontal';\nconst defaultMinSize = 10;\n\nfunction distribute(items, buckets) {\n  const base = items / buckets | 0;\n  const extra = items % buckets;\n  const array = new Array(buckets).fill(base);\n  if (extra === 0) {\n    return array;\n  } else if (extra <= buckets / 2 | 0) {\n    const leap = buckets / extra | 0;\n    const halfLeap = leap / 2 | 0; \n    return array.map((v, i) => v + ((i % leap === halfLeap) ? 1 : 0));\n  } else {\n    const leap = buckets / (buckets - extra) | 0;\n    const halfLeap = leap / 2 | 0;\n    return array.map((v, i) => v + (1 - (i % leap === halfLeap ? 1 : 0)));\n  }\n}\n\nfunction normalizeSizes(sizes) {\n  const totalSize = sizes.reduce((sum, v) => sum + v, 0);\n  return sizes.map(v => v / totalSize);\n}\n\nconst getMouseOrTouchPosition = (e, clientAxis) => e.touches ? e.touches[0][clientAxis] : e[clientAxis];\n\nfunction addSpaceForChildren(sizes, numChildren, gutterSize, minSizePX, totalSizePX) {\n  // const numGutters = numChildren - 1;\n  // const totalGutterSpacePX = numGutters * gutterSize;\n  // const availableSpacePX = totalSizePX - totalGutterSpacePX;\n  //\n  // this is not so trivial\n  // let's say we have 3 items and we add 2 more.\n  // each of those 2 has a minSize. So need to take 2 * minSize\n  // from the 3 items or (2 * minSize / 3). But any of those items\n  // themselves might already be at or near minSize\n  //\n  // This seems like it's then iterative.\n  //\n  // go through and try to remove (minSize * numNewElements / numOldElements)\n  // from each old element but only remove such that that element\n  // is still >= minSize. When done there's possibly some amount\n  // you haven't distributed yet so repeat the process over and over\n  // until it's all distributed.\n  //\n  // given that we don't know which elements are new, for now\n  // lets just reset all the sizes\n  return new Array(numChildren).fill(1 / numChildren);\n}\n\nconst getDirectionProps = direction => (direction === 'horizontal')\n  ? {\n      dimension: 'width',\n      clientAxis: 'clientX',\n      position: 'left',\n      positionEnd: 'right',\n      clientSize: 'clientWidth',\n      style: {\n        width: '100%',\n        display: 'flex',\n      },\n    }\n  : {\n      dimension: 'height',\n      clientAxis: 'clientY',\n      position: 'top',\n      positionEnd: 'bottom',\n      clientSize: 'clientHeight',\n      style: { /*height: '100%'*/ },\n    };\n\nfunction computeNewSizes({\n  startSizes,\n  currentSizes,\n  prevPaneNdx,\n  gutterReservedSizesPX,\n  minSizePX,\n  deltaPX,\n  outerSizePX,\n}) {\n  const nextPaneNdx = prevPaneNdx + 1;\n  const prevPaneStartSizePX = Math.ceil(startSizes[prevPaneNdx] * outerSizePX) - gutterReservedSizesPX[prevPaneNdx];\n  const nextPaneStartSizePX = Math.ceil(startSizes[nextPaneNdx] * outerSizePX) - gutterReservedSizesPX[nextPaneNdx];\n  const spaceUsedByBothElementsPX = prevPaneStartSizePX + nextPaneStartSizePX;\n  const prevPaneNewSizePX = Math.min(\n    Math.max(minSizePX, prevPaneStartSizePX + deltaPX),\n    spaceUsedByBothElementsPX - minSizePX);\n  const nextPaneNewSizePX = spaceUsedByBothElementsPX - prevPaneNewSizePX;\n  const newSizes = [\n    ...currentSizes.slice(0, prevPaneNdx),\n    (prevPaneNewSizePX + gutterReservedSizesPX[prevPaneNdx]) / outerSizePX,\n    (nextPaneNewSizePX + gutterReservedSizesPX[nextPaneNdx]) / outerSizePX,\n    ...currentSizes.slice(prevPaneNdx + 2, currentSizes.length),\n  ];\n\n  /*\n  const availableSpacePX = outerSizePX - totalGutterSizePX;\n  const info = `\n  gutterReservedSizes: ${gutterReservedSizesPX}\n  availableSpacePX: ${availableSpacePX}\n  prevStartSizePX: ${prevPaneStartSizePX}\n  nextStartSizePX: ${nextPaneStartSizePX}\n  spaceUsedByBothElementsPX: ${spaceUsedByBothElementsPX}\n  prevNewSizePX: ${prevPaneNewSizePX}\n  nextNewSizePX: ${nextPaneNewSizePX}\n  sizes: ${currentSizes}\n  newSizes: ${newSizes}\n  `;\n  const infoElem = document.querySelector('#info');\n  infoElem.textContent = info;\n  */\n\n  return newSizes;\n}\n\nconst stopMobileBrowserFromScrolling = e => e.preventDefault();\n\nclass Gutter extends React.Component {\n  constructor(props) {\n    super(props);\n    this.elementRef = React.createRef();\n  }\n  handleMouseDownAndTouchStart = (e) => {\n    const {onMouseDownAndTouchStart} = this.props;\n    onMouseDownAndTouchStart(e);\n  }\n  componentDidMount() {\n    // There's no way in React 16 to add passive false event listeners\n    // which means there is no way to drag a splitter and prevent mobile browsers\n    // from scrolling\n    const elem = this.elementRef.current;\n    elem.addEventListener('mousedown', this.handleMouseDownAndTouchStart, {passive: false});\n    elem.addEventListener('touchstart', this.handleMouseDownAndTouchStart, {passive: false});\n  }\n  componentWillUnmount() {\n    const elem = this.elementRef.current;\n    elem.removeEventListener('mousedown', this.handleMouseDownAndTouchStart);\n    elem.removeEventListener('touchstart', this.handleMouseDownAndTouchStart);\n  }\n  render() {\n    const {direction, dragging, current, style} = this.props;\n    return (\n      <div\n        ref={this.elementRef}\n        className={`gutter gutter-${direction} ${dragging && current ? 'gutter-dragging' : ''}`}\n        style={style}\n      />\n    );\n  }\n}\n\nexport default class GManSplit extends React.Component {\n  constructor(props) {\n    super(props);\n    const numPanes = React.Children.count(props.children);\n    const size = 1 / numPanes;\n    this.state = {\n      sizes: props.sizes || new Array(numPanes).fill(size),\n    };\n    this.elementRef = React.createRef();\n  }\n  _setSizes = (sizes) => {\n    this.setState({sizes});\n  }\n  handleMouseUpAndTouchEnd = () => {\n    document.removeEventListener(\"mousemove\", this.handleMouseAndTouchMove);\n    document.removeEventListener(\"mouseup\", this.handleMouseUpAndTouchEnd);\n    document.removeEventListener(\"touchmove\", this.handleMouseAndTouchMove);\n    document.removeEventListener(\"touchend\", this.handleMouseUpAndTouchEnd);\n    this.setState({dragging: false});\n  };\n  handleMouseAndTouchMove = (e) => {\n    stopMobileBrowserFromScrolling(e);\n    const {\n      gutterSize = defaultGutterSize,\n      direction = defaultDirection,\n      minSize = defaultMinSize,\n      computeNewSizesFn = computeNewSizes,\n      onSetSizes,\n      sizes: propSizes,\n    } = this.props;\n    const {\n      prevPaneNdx,\n      mouseStart,\n      startSizes,\n      sizes: stateSizes,\n    } = this.state;\n    const setSizes = onSetSizes || this._setSizes;\n    const sizes = onSetSizes ? propSizes : stateSizes;\n\n    const {\n      clientAxis,\n      clientSize,\n    } = getDirectionProps(direction);\n\n    const deltaPX = getMouseOrTouchPosition(e, clientAxis) - mouseStart;\n    const outerSizePX = this.elementRef.current[clientSize];\n\n    const numPanes = sizes.length;\n    const numGutters = numPanes - 1;\n    const totalGutterSizePX = numGutters * gutterSize;\n\n    const gutterReservedSizesPX = distribute(totalGutterSizePX, numPanes);\n\n    const newSizes = computeNewSizesFn({\n      startSizes,\n      currentSizes: sizes,\n      prevPaneNdx,\n      gutterReservedSizesPX,\n      minSizePX: minSize,\n      deltaPX,\n      outerSizePX,\n    });\n\n    setSizes(newSizes);\n  };\n  handleMouseDownAndTouchStart = (e) => {\n    stopMobileBrowserFromScrolling(e);\n    const {\n      direction = defaultDirection,\n    } = this.props;\n    const {\n      clientAxis,\n    } = getDirectionProps(direction);\n\n    document.addEventListener(\"mousemove\", this.handleMouseAndTouchMove, {passive: false});\n    document.addEventListener(\"mouseup\", this.handleMouseUpAndTouchEnd);\n    document.addEventListener(\"touchmove\", this.handleMouseAndTouchMove, {passive: false});\n    document.addEventListener(\"touchend\", this.handleMouseUpAndTouchEnd);\n    const gutterNdx = Array.prototype.indexOf.call(e.target.parentElement.children, e.target);\n    const prevPaneNdx = (gutterNdx - 1) / 2;    \n    this.setState({\n      startSizes: this.state.sizes.slice(),\n      mouseStart: getMouseOrTouchPosition(e, clientAxis),\n      prevPaneNdx,\n      dragging: true,\n    });\n  };\n  recomputeSizes = () => {\n    // here it's not entirely clear what to do. Maybe we need options\n    // If they user removes a child which sizes do they want? I guess\n    // since they removed a child they passed in new sizes so we should\n    // pass sizes back? Ugh!\n    //\n    // Example:\n    //\n    //   * start: 3 panes, sizes a(33%), b(33%), c(33%)\n    //   * user adjusts to sizes a(10%), b(80%), c(10%)\n    //   * user deletes pane (a)\n    //\n    // If we just continue to use the current sizes the we'd get\n    //\n    //   b(10%), c(90%)\n    //\n    // We have no way of knowing that b should get the 90%\n    //\n    // One way would be to pass responsibility for saving the sizes\n    // up to the parent. Basically if you want to add/remove children\n    // then you need need to keep their state. In that case\n    // passing an `onSetSize` prop. It's a function that will be called\n    // with an array of sizes.  Update your sizes and pass them in as\n    // props\n    //\n    // But, just so we don't completely fail if the user has not opted\n    // into managing the size state then at least do something.\n    const {sizes} = this.state;\n    const {minSize, direction, gutterSize} = this.props;\n    const {\n      clientSize,\n    } = getDirectionProps(direction);\n\n    const numChildren = React.Children.count(this.props.children);\n    const newSizes = numChildren < sizes.length\n      // a child was removed, normalizes the sizes\n      ? normalizeSizes(sizes.slice(0, numChildren))\n      // children were added, make space for them\n      : addSpaceForChildren(sizes, numChildren, gutterSize, minSize, this.elementRef.current.parentElement[clientSize]);\n    this._setSizes(newSizes);\n  }\n  componentDidUpdate() {\n    const {children, onSetSizes} = this.props;\n    const {sizes} = this.state;\n    // we need to check if new elements were added.\n    if (onSetSizes) {\n      return; // not our responsibility\n    }\n\n    const numChildren = React.Children.count(children);\n    if (sizes.length !== numChildren) {\n      setTimeout(this.recomputeSizes);\n    }\n  }\n  render() {\n    const {\n      children, \n      direction = defaultDirection, \n      gutterSize = defaultGutterSize, \n      sizes: propSizes,\n      onSetSizes,\n      minSize,\n      ...rest\n    } = this.props;\n    const {\n      dragging,\n      prevPaneNdx,\n      sizes: stateSizes,\n    } = this.state;\n    const {\n      dimension,\n      style,\n    } = getDirectionProps(direction);\n\n    const sizes = onSetSizes ? propSizes : stateSizes;\n    const numPanes = React.Children.count(children);\n    const numGutters = numPanes - 1;\n    const totalGutterSpace = gutterSize * numGutters;\n    const gutterStyle = {[dimension]: `${gutterSize}px`};\n    const gutterReservedSizes = distribute(totalGutterSpace, numPanes);\n\n    let childNdx = 0;\n    let first = true;\n    const newChildren = [];\n    React.Children.forEach(children, (child, props) => {\n      if (!React.isValidElement(child)) {\n        return null;\n      }\n      if (!first) {\n        newChildren.push(\n          <Gutter\n            key={`gutter${newChildren.length}`}\n            direction={direction}\n            dragging={dragging}\n            current={dragging && childNdx === prevPaneNdx + 1}\n            style={gutterStyle}\n            onMouseDownAndTouchStart={this.handleMouseDownAndTouchStart}\n          />\n        );\n      }\n\n      const style = {\n        [dimension]: `calc(${sizes[childNdx] * 100}% - ${gutterReservedSizes[childNdx]}px)`,\n      };\n\n      newChildren.push(\n        <div key={`pane${newChildren.length}`} style={style}>\n          {React.cloneElement(child)}\n        </div>\n      );\n      first = false;\n      ++childNdx;\n    });\n    return (\n      <div\n        className=\"split\"\n        ref={this.elementRef}\n        style={{\n          ...this.props.style,\n          ...style,\n          ...(dragging && {userSelect: 'none'})\n        }}\n        {...rest}\n      >\n        {newChildren}\n        {dragging ? \n          <style>\n            iframe {'{'}\n              pointer-events: none !important;\n            {'}'}\n          </style> : []\n        }\n      </div>\n    );\n  }\n}\n\n/*\ndirection\nsizes\nonSetSizes\ncompute\n\n*/\n\n","import React from 'react';\n//import {Resizable} from 're-resizable';\nimport Code from './Code.js';\nimport {classNames} from './css-utils.js';\n\nexport default function CodeArea(props) {\n  const {value, hackKey, heading, extra = [], options = {}, onValueChange} = props;\n  return (\n    <div className=\"code-area\" style={props.style}>\n        <div className=\"expander\">\n          {heading}\n        </div>\n        <div className={classNames(\"hidee\")}>\n            <Code\n              hackKey={hackKey}\n              value={value}\n              options={options}\n              onValueChange={onValueChange}\n            />\n          {extra}\n        </div>\n    </div>\n  );\n};\n","import mime from 'mime-types';\nimport React from 'react';\n// import EditLine from './EditLine.js';\nimport CodeArea from './CodeArea.js';\n\nexport default function TestArea(props) {\n  const {title, hackKey} = props;\n  const heading = (\n    <div style={{width: '100%'}}>{title}</div>\n  );\n  const mimeType = mime.lookup(title) || (title.toLowerCase() === 'javascript' ? 'application/javascript' : 'application/octet-stream');\n  const options = {\n    ...props.options,\n    editor: {\n      ...(props.options?.editor && props.options.editor),\n      mode: mimeType,\n    },\n  };\n  return (\n    <CodeArea key={hackKey} {...props} options={options} heading={heading} />\n  );\n}\n\n/*\nexport default function TestArea(props) {\n  const {desc, title, onTitleChange, hackKey} = props;\n  const heading = (\n    <div>{title}</div>\n    <EditLine\n      placeholder={desc}\n      value={title}\n      onChange={onTitleChange}\n    />\n  );\n\n  return (\n    <CodeArea key={hackKey} {...props} heading={heading} />\n  );\n}\n*/\n","import React from 'react';\n\nimport {isDevelopment} from './flags.js';\nimport * as winMsgMgr from './window-message-manager.js';\n\nexport default class Runner extends React.Component {\n  constructor(props) {\n    super(props);\n    this.runnerRef = React.createRef();\n  }\n  handleJSLog = (data) => {\n    this.props.logManager.addMsg(data.type, data.msg);\n  }\n  handleJSError = (data) => {\n    const {\n      msg,\n      url,\n      lineNo,\n      colNo,\n      section,\n    } = data;\n    this.props.logManager.addMsg('error', `${url}:${lineNo}:${colNo}:${section} ${msg}`);\n  }\n  handleGimmeDaCodez = () => {\n    this.iframe.contentWindow.postMessage({\n      type: 'run',\n      data: this.data,\n    }, \"*\");\n  }\n  componentDidMount() {\n    const {registerRunnerAPI} = this.props;\n    registerRunnerAPI({\n      run: (data, blank) => {\n        this.data = data;\n        this.removeIFrame();\n        const iframe = document.createElement('iframe');\n        this.iframe = iframe;\n        iframe.src = isDevelopment\n            ? 'http://localhost:8081/runner-02.html?development=true'\n            : 'https://jsgistrunner.devcomments.org/runner-02.html';\n        if (blank) {\n          iframe.style.background = 'none';\n        }\n        this.runnerRef.current.appendChild(iframe);\n      },\n    })\n    winMsgMgr.on('gimmeDaCodez', this.handleGimmeDaCodez);\n    winMsgMgr.on('jsLog', this.handleJSLog);\n    winMsgMgr.on('jsError', this.handleJSError);\n  }\n  removeIFrame() {\n    if (this.iframe) {\n      this.iframe.remove();\n      this.iframe = undefined;\n    }\n  }\n  componentWillUnmount() {\n    this.removeIFrame();\n    winMsgMgr.remove('gimmeDaCodez', this.handleGimmeDaCodez);\n    winMsgMgr.remove('jsLog', this.handleJSLog);\n    winMsgMgr.remove('jsError', this.handleJSError);\n  }\n  handleMessage = (e) => {\n    const {type, data} =  e.data;\n    const fn = this.handlers[type];\n    if (fn) {\n      fn(data);\n    }\n  }\n  render() {\n    return (\n      <div className=\"runner\" ref={this.runnerRef}></div>\n    )\n  }\n}\n\n","import React from 'react';\n\nimport EditLine from './EditLine.js';\nimport {isDevelopment} from './flags.js';\nimport Footer from './Footer.js';\nimport GitHub from './GitHub.js';\nimport Help from './Help.js';\nimport Load from './Load.js';\nimport {loadGistFromSrc} from './loader.js';\nimport Log, {LogManager} from './Log.js';\nimport * as model from './model.js';\nimport Save from './Save.js';\nimport Settings from './Settings.js';\nimport Split from './Split.js';\nimport TestArea from './TestArea.js';\nimport Runner from './Runner.js';\n\nimport './App.css';\n\nif (isDevelopment) {\n  window.d = model.data;\n}\n\nconst backupKey = 'jsGist-backup';\nconst noJSX = () => [];\nconst darkMatcher = window.matchMedia('(prefers-color-scheme: dark)');\nconst makeDisqusId = () => {\n  const loc = window.location;\n  const query = Object.fromEntries(new URLSearchParams(loc.search).entries());\n  const src = query.src;\n  return src\n      ? `${encodeURIComponent(src)}`\n      : '';\n}\n\nclass App extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      path: window.location.pathname,\n      disqusId: makeDisqusId(),\n      dark: darkMatcher.matches,\n      loading: false,\n      dialog: noJSX,\n      dataVersion: 0,\n      gistId: '',\n      pat: localStorage.getItem('pat'),\n      messages: [],\n      userData: {},\n    };\n    this.github = new GitHub();\n    this.logManager = new LogManager();\n  }\n  componentDidMount() {\n    this.github.addEventListener('userdata', (e) => {\n      this.setState({\n        userData: e.data,\n      });\n    });\n    model.add('path', window.location.pathname);\n    model.subscribe('path', (newValue) => {\n      window.history.pushState({}, '', newValue);\n      this.setState({\n        path: newValue,\n        disqusId: makeDisqusId(),\n      });\n    });\n    // I still am not sure how I'm supposed to handle this.\n    // Putting my model in the state itself seems wrong\n    // and doesn't actually help since I'd have to \n    // generate an entirely new state object to change any\n    // nested property.\n    //\n    // Storing the data outside I see no way to tell\n    // components to re-render except to call forceUpdate\n    // which all the documentation says \"if you call this\n    // you're doing it wrong\".\n    //\n    // Redux is a joke. 50 lines code needed to set\n    // a single field. Repeat those 50 lines for every field.\n    // Things like redux-tools make it less to type those\n    // 50 lines but they still execute 50 to 500 lines of code\n    // just to set a single value.\n    model.subscribe('dataVersion', (dataVersion) => {\n      this.setState({dataVersion})\n    });\n    // this is a hack because I can't figure out how to\n    // update the CodeMirror areas\n    model.subscribe('updateVersion', (updateVersion) => {\n      this.setState({updateVersion})\n    });\n\n    darkMatcher.addEventListener('change', () => {\n      this.setState({dark: darkMatcher.matches});\n    });\n\n    const query = Object.fromEntries(new URLSearchParams(window.location.search).entries());\n    const backup = localStorage.getItem(backupKey);\n    let loaded = false;\n    if (backup) {\n      try {\n        const data = JSON.parse(backup);\n        if (data.href === window.location.href) {\n          model.setData(data.data);\n          loaded = true;\n          this.addInfo('loaded backup from local storage')\n        }\n      } catch (e) {\n        console.log('bad backup')\n      }\n      localStorage.removeItem(backupKey);\n    }\n    if (!loaded && query.src) {\n      this.loadData(query.src);\n    }\n  }\n  async loadData(src) {\n    this.setState({loading: true});\n    let success = true;\n    try {\n      const {data, id} = await loadGistFromSrc(src, this.github);\n      model.setData(data);\n      if (id) {\n        this.setState({gistId: src})\n      }\n    } catch (e) {\n      success = false;\n      console.warn(e);\n      this.addError(`could not load jsGist: src=${src} ${e}`);\n    }\n    this.setState({loading: false});\n    if (success) {\n      this.handleRun();\n    }\n  }\n  addMsg = (msg, className) => {\n    switch (className) {\n      case 'error':\n        console.error(msg);\n        break;\n      default:\n        console.log(msg);\n        break;\n    }\n    this.setState({messages: [{msg, className}, ...this.state.messages]});\n    setTimeout(() => {\n      this.setState({messages: this.state.messages.slice(0, this.state.messages.length - 1)});\n    }, 5000);\n  }\n  addInfo = (msg) => this.addMsg(msg, 'info');\n  addError = (msg) => this.addMsg(msg, 'error');\n  closeDialog = () => {\n    this.setState({dialog: noJSX});\n  }\n  registerRunnerAPI = (api) => {\n    this.runnerAPI = api;\n    this.handleStop();\n  }\n  handleNew = async() => {\n    window.location.href = window.location.origin;\n    //window.history.pushState({}, '', `${window.location.origin}`);\n    //model.setData(model.getNewData());\n  }\n  handleRun = async () => {\n    localStorage.setItem(backupKey, JSON.stringify({\n      href: window.location.href,\n      data: model.data,\n    }));\n    this.logManager.clear();\n    this.runnerAPI.run(model.data);\n  }\n  handleStop = async () => {\n    this.runnerAPI.run(model.getBlankData(), true);\n  }\n  handleSave = async () => {\n    this.setState({dialog: this.renderSave});\n  }\n  handleSettings = () => {\n    this.setState({dialog: this.renderSettings});\n  }\n  handleHelp = () => {\n    this.setState({dialog: this.renderHelp});\n  }\n  handleLoad = () => {\n    this.setState({dialog: this.renderLoad});\n  }\n  handleOnLoad = async() => {\n    this.setState({dialog: noJSX});\n    this.handleRun();\n  }\n  handleOnSave = (gistId) => {\n    window.history.pushState({}, '', `${window.location.origin}?src=${gistId}`);\n    this.setState({gistId});\n  }\n  handleAbort = () => {\n    this.abort();\n  };\n  renderHelp = () => {\n    return (<Help onClose={this.closeDialog} />);\n  }\n  renderSettings = () => {\n    return (\n      <Settings onClose={this.closeDialog} />\n    );\n  }\n  renderLoad = () => {\n    return (\n      <Load\n        onLoad={this.handleOnLoad}\n        onClose={this.closeDialog}\n        addError={this.addError}\n        github={this.github}\n      />\n    );\n  }\n  renderSave = () => {\n    const data = model.data;\n    return (\n      <Save\n        onSave={this.handleOnSave}\n        onClose={this.closeDialog}\n        addError={this.addError}\n        github={this.github}\n        gistId={this.state.gistId}\n        data={data} />\n    );\n  }\n  render() {\n    const data = model.data;\n    const {\n      loading,\n      dialog,\n      // disqusId,\n      updateVersion: hackKey,\n      userData,\n    } = this.state;\n    const extra = [];\n    return (\n      <div className=\"App\">\n        <div className=\"content\">\n          <div className=\"head\">\n            <div>\n              <img src=\"/resources/images/logo-small.svg\" alt=\"logo\"/>\n            jsGist.org<span className=\"beta\">(alpha)</span>\n            </div>\n            <div className=\"fix-help-contribute\">\n              <div className=\"three-words\">\n                <div><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/greggman/jsgist/\">Fix</a></div>\n                <div><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/greggman/jsgist/\">Help</a></div>\n                <div><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/greggman/jsgist/\">Contribute</a></div>\n              </div>\n              <div className=\"octocat\">\n                <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/greggman/jsgist/\">\n                  <img alt=\"github\" src=\"/resources/images/octocat-icon.svg\"/>\n                </a>\n              </div>\n            </div>\n          </div>\n          <div className=\"top\">\n            <div className=\"left\">\n              <div className=\"name\">\n                <EditLine value={data.name} onChange={v => model.setName(v)} />\n                {userData.name ? <div className=\"username\"><a target=\"_blank\" rel=\"noopener noreferrer\" href={`https://github.com/${userData.name}`}>{userData.name}</a></div> : [] }\n                {userData.avatarURL ? <a target=\"_blank\" rel=\"noopener noreferrer\" href={`https://github.com/${userData.name}`}><img className=\"avatar\" src={userData.avatarURL} alt=\"avatar\"/></a> : []}\n              </div>\n            </div>\n            <div className=\"right\">\n              <button tabIndex=\"1\" onClick={this.handleRun}>Run</button>\n              <button tabIndex=\"1\" onClick={this.handleStop}>Stop</button>\n              <button tabIndex=\"1\" onClick={this.handleSave}>Save</button>\n              <button tabIndex=\"1\" onClick={this.handleNew}>New</button>\n              <button tabIndex=\"1\" onClick={this.handleLoad}>Load</button>\n              {/*<button tabIndex=\"1\" onClick={this.handleSettings} title=\"settings\"><img src={`${window.location.origin}/resources/images/gear.svg`} alt=\"settings\"></img></button>*/}\n              <button tabIndex=\"1\" onClick={this.handleHelp} title=\"help\">?</button>\n            </div>\n          </div>\n          {\n            loading ? [] : (\n              <div className=\"bottom\">\n                <Split direction=\"horizontal\" minSize={0}>\n                  <div className=\"left\">\n                    <div className=\"codes\">\n                    <Split\n                      direction=\"vertical\"\n                      minSize={0}\n                    >\n                    {\n                      data.files.map((file, ndx) => {\n                        return (\n                          <TestArea\n                            key={`ca${ndx}`}\n                            hackKey={hackKey}\n                            desc=\"filename\"\n                            title={file.name}\n                            value={file.content}\n                            onTitleChange={name => model.setFileName(ndx, name)}\n                            onValueChange={value => model.setFileContent(ndx, value)}\n                            extra={extra}\n                          />\n                        );\n                      })\n                    }\n                    </Split>\n                    </div>\n                      {/*<button onClick={() => model.addFile()}>+</button>*/}\n                  </div>\n                  <div className=\"right\">\n                    <Split direction=\"vertical\" sizes={[0.9, 0.1]}>\n                      <Runner logManager={this.logManager} registerRunnerAPI={this.registerRunnerAPI} />\n                      <Log logManager={this.logManager} />\n                    </Split>\n                  </div>\n                </Split>\n              </div>\n            )\n          }\n        </div>\n        <Footer\n          disqusId={makeDisqusId()}\n          title={data.name}\n        />\n        {dialog()}\n        <div className=\"messages\">\n          {\n            this.state.messages.map(({msg, className}, i) => (<div className={className} key={`err${i}`}>{msg}</div>))\n          }\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport './scrollbars.js';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/vertical-layout.f248a432.svg\";","module.exports = __webpack_public_path__ + \"static/media/horizontal-layout.e3f3298b.svg\";","module.exports = __webpack_public_path__ + \"static/media/two-by-two-layout.23605ce8.svg\";"],"sourceRoot":""}